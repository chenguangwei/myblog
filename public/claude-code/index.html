<!DOCTYPE html>
<html lang="zh-CN">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Claude Code ç²¾é€šæŒ‡å—ï¼šå®ç° 10 å€æ•ˆç‡çš„é«˜çº§æ¨¡å¼ - ä¸€è·¯åŒè¡Œ</title><meta name="Description" content="ä¸€ä»½å…³äºé‚£äº›çœŸæ­£èƒ½å¸¦æ¥å®è´¨æå‡çš„æ¨¡å¼çš„ç»¼åˆæŒ‡å—ã€‚åŸºäº 2000&#43; å°æ—¶ LLM è¾…åŠ©ç¼–ç¨‹ç»éªŒã€‚"><meta property="og:url" content="http://localhost:1313/claude-code/">
  <meta property="og:site_name" content="ä¸€è·¯åŒè¡Œ">
  <meta property="og:title" content="Claude Code ç²¾é€šæŒ‡å—ï¼šå®ç° 10 å€æ•ˆç‡çš„é«˜çº§æ¨¡å¼">
  <meta property="og:description" content="ä¸€ä»½å…³äºé‚£äº›çœŸæ­£èƒ½å¸¦æ¥å®è´¨æå‡çš„æ¨¡å¼çš„ç»¼åˆæŒ‡å—ã€‚åŸºäº 2000&#43; å°æ—¶ LLM è¾…åŠ©ç¼–ç¨‹ç»éªŒã€‚">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-01-22T23:00:00+08:00">
    <meta property="article:modified_time" content="2026-01-22T23:27:34+08:00">
    <meta property="article:tag" content="Claude Code">
    <meta property="article:tag" content="LLM">
    <meta property="article:tag" content="æ•ˆç‡">
    <meta property="article:tag" content="ç¼–ç¨‹">
    <meta property="og:image" content="http://localhost:1313/claude-code/featured-image.jpg">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/claude-code/featured-image.jpg">
  <meta name="twitter:title" content="Claude Code ç²¾é€šæŒ‡å—ï¼šå®ç° 10 å€æ•ˆç‡çš„é«˜çº§æ¨¡å¼">
  <meta name="twitter:description" content="ä¸€ä»½å…³äºé‚£äº›çœŸæ­£èƒ½å¸¦æ¥å®è´¨æå‡çš„æ¨¡å¼çš„ç»¼åˆæŒ‡å—ã€‚åŸºäº 2000&#43; å°æ—¶ LLM è¾…åŠ©ç¼–ç¨‹ç»éªŒã€‚">
<meta name="application-name" content="ä¸€è·¯é€šè¡Œ">
<meta name="apple-mobile-web-app-title" content="ä¸€è·¯é€šè¡Œ"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://localhost:1313/claude-code/" /><link rel="prev" href="http://localhost:1313/claude-code-en/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Claude Code ç²¾é€šæŒ‡å—ï¼šå®ç° 10 å€æ•ˆç‡çš„é«˜çº§æ¨¡å¼",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/localhost:1313\/claude-code\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "http:\/\/localhost:1313\/claude-code\/featured-image.jpg",
                            "width":  1024 ,
                            "height":  572 
                        }],"genre": "posts","keywords": "Claude Code, LLM, æ•ˆç‡, ç¼–ç¨‹","wordcount":  11134 ,
        "url": "http:\/\/localhost:1313\/claude-code\/","datePublished": "2025-01-22T23:00:00+08:00","dateModified": "2026-01-22T23:27:34+08:00","license": "ä¸€è·¯åŒè¡Œ","publisher": {
            "@type": "Organization",
            "name": "ä¸€è·¯åŒè¡Œ","logo": {
                    "@type": "ImageObject",
                    "url": "http:\/\/localhost:1313\/images\/avatar.png",
                    "width":  256 ,
                    "height":  256 
                }},"author": {
                "@type": "Person",
                "name": "ä¸€è·¯åŒè¡Œ"
            },"description": "ä¸€ä»½å…³äºé‚£äº›çœŸæ­£èƒ½å¸¦æ¥å®è´¨æå‡çš„æ¨¡å¼çš„ç»¼åˆæŒ‡å—ã€‚åŸºäº 2000+ å°æ—¶ LLM è¾…åŠ©ç¼–ç¨‹ç»éªŒã€‚"
    }
    </script></head>
    <body data-header-desktop="auto" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="ä¸€è·¯åŒè¡Œ"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw' aria-hidden='true'></i></span>AIä¸€è·¯åŒè¡Œ</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/ai/"> AI </a><a class="menu-item" href="/posts/"> æ‰€æœ‰æ–‡ç«  </a><a class="menu-item" href="/tags/"> æ ‡ç­¾ </a><a class="menu-item" href="/categories/"> åˆ†ç±» </a><a class="menu-item" href="/about/"> å…³äº </a><a class="menu-item" href="https://github.com/chenguangwei/blog" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i>  </a><a class="menu-item" href="/posts/jianzhan/"> jianzhan </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="é€‰æ‹©è¯­è¨€">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/en/claude-code/">English</option><option value="/claude-code/" selected>ç®€ä½“ä¸­æ–‡</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="ä¸€è·¯åŒè¡Œ"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw' aria-hidden='true'></i></span>AIä¸€è·¯åŒè¡Œ</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/posts/ai/" title="">AI</a><a class="menu-item" href="/posts/" title="">æ‰€æœ‰æ–‡ç« </a><a class="menu-item" href="/tags/" title="">æ ‡ç­¾</a><a class="menu-item" href="/categories/" title="">åˆ†ç±»</a><a class="menu-item" href="/about/" title="">å…³äº</a><a class="menu-item" href="https://github.com/chenguangwei/blog" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i></a><a class="menu-item" href="/posts/jianzhan/" title="">jianzhan</a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="é€‰æ‹©è¯­è¨€">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/en/claude-code/">English</option><option value="/claude-code/" selected>ç®€ä½“ä¸­æ–‡</option></select>
                </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Claude Code ç²¾é€šæŒ‡å—ï¼šå®ç° 10 å€æ•ˆç‡çš„é«˜çº§æ¨¡å¼</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>ä¸€è·¯åŒè¡Œ</a></span>&nbsp;<span class="post-category">æ”¶å½•äº <a href="/categories/ai/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>AI</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2025-01-22">2025-01-22</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;çº¦ 11134 å­—&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;é¢„è®¡é˜…è¯» 23 åˆ†é’Ÿ&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#ç›®å½•">ç›®å½•</a></li>
    <li><a href="#1-æ ¸å¿ƒç†å¿µcontextä¸Šä¸‹æ–‡å·¥ç¨‹">1. æ ¸å¿ƒç†å¿µï¼šContextï¼ˆä¸Šä¸‹æ–‡ï¼‰å·¥ç¨‹</a>
      <ul>
        <li><a href="#æ ¹æœ¬æ€§çš„æ€ç»´è½¬å˜">æ ¹æœ¬æ€§çš„æ€ç»´è½¬å˜</a></li>
        <li><a href="#context-è´¨é‡æ›²çº¿">Context è´¨é‡æ›²çº¿</a></li>
      </ul>
    </li>
    <li><a href="#2-æ¨¡å¼-1é”™è¯¯æ—¥å¿—ç³»ç»Ÿ">2. æ¨¡å¼ 1ï¼šé”™è¯¯æ—¥å¿—ç³»ç»Ÿ</a>
      <ul>
        <li><a href="#é—®é¢˜æ‰€åœ¨">é—®é¢˜æ‰€åœ¨</a></li>
        <li><a href="#è§£å†³æ–¹æ¡ˆé‡æ„åé¦ˆå¾ªç¯">è§£å†³æ–¹æ¡ˆï¼šé‡æ„åé¦ˆå¾ªç¯</a></li>
        <li><a href="#å®ç°">å®ç°</a>
          <ul>
            <li><a href="#é”™è¯¯æ—¥å¿—æ¨¡æ¿-claudeerror-logmd">é”™è¯¯æ—¥å¿—æ¨¡æ¿ (<code>~/.claude/error-log.md</code>)</a></li>
            <li><a href="#ç”¨äºå¿«é€Ÿè®°å½•çš„-slash-å‘½ä»¤">ç”¨äºå¿«é€Ÿè®°å½•çš„ Slash å‘½ä»¤</a></li>
          </ul>
        </li>
        <li><a href="#é”™è¯¯ç±»åˆ«ä¸å¸¸è§ä¿®å¤">é”™è¯¯ç±»åˆ«ä¸å¸¸è§ä¿®å¤</a></li>
      </ul>
    </li>
    <li><a href="#3-æ¨¡å¼-2slash-å‘½ä»¤ä½œä¸ºè½»é‡çº§æœ¬åœ°åº”ç”¨">3. æ¨¡å¼ 2ï¼šSlash å‘½ä»¤ä½œä¸ºè½»é‡çº§æœ¬åœ°åº”ç”¨</a>
      <ul>
        <li><a href="#å¿ƒæ™ºæ¨¡å‹">å¿ƒæ™ºæ¨¡å‹</a></li>
        <li><a href="#å‘½ä»¤æ¶æ„">å‘½ä»¤æ¶æ„</a></li>
        <li><a href="#å¿…å¤‡-slash-å‘½ä»¤é›†">å¿…å¤‡ Slash å‘½ä»¤é›†</a>
          <ul>
            <li><a href="#1-æ™ºèƒ½æäº¤-claudecommandscommitmd">1. æ™ºèƒ½æäº¤ (<code>~/.claude/commands/commit.md</code>)</a></li>
            <li><a href="#2-pr-åˆ›å»ºå™¨-claudecommandsprmd">2. PR åˆ›å»ºå™¨ (<code>~/.claude/commands/pr.md</code>)</a></li>
            <li><a href="#3-æ·±åº¦è°ƒæŸ¥-claudecommandsinvestigatemd">3. æ·±åº¦è°ƒæŸ¥ (<code>~/.claude/commands/investigate.md</code>)</a></li>
            <li><a href="#4-æµ‹è¯•ç”Ÿæˆå™¨-claudecommandstestmd">4. æµ‹è¯•ç”Ÿæˆå™¨ (<code>~/.claude/commands/test.md</code>)</a></li>
            <li><a href="#5-å®‰å…¨å®¡è®¡-claudecommandssecurity-auditmd">5. å®‰å…¨å®¡è®¡ (<code>~/.claude/commands/security-audit.md</code>)</a></li>
            <li><a href="#6-é‡æ„è§„åˆ’å™¨-claudecommandsrefactor-planmd">6. é‡æ„è§„åˆ’å™¨ (<code>~/.claude/commands/refactor-plan.md</code>)</a></li>
            <li><a href="#bash-å®‰å…¨-hook-claudehooksbash-safetysh">Bash å®‰å…¨ Hook (<code>~/.claude/hooks/bash-safety.sh</code>)</a></li>
            <li><a href="#å†™å…¥å®‰å…¨-hook-claudehookswrite-safetysh">å†™å…¥å®‰å…¨ Hook (<code>~/.claude/hooks/write-safety.sh</code>)</a></li>
            <li><a href="#ä¼šè¯æ‘˜è¦-hook-claudehookssession-summarysh">ä¼šè¯æ‘˜è¦ Hook (<code>~/.claude/hooks/session-summary.sh</code>)</a></li>
          </ul>
        </li>
        <li><a href="#ä½¿-hooks-å¯æ‰§è¡Œ">ä½¿ Hooks å¯æ‰§è¡Œ</a></li>
        <li><a href="#å®‰å…¨-yolo-åˆ«å">â€œå®‰å…¨ YOLOâ€ åˆ«å</a></li>
      </ul>
    </li>
    <li><a href="#5-æ¨¡å¼-4context-å«ç”Ÿç®¡ç†">5. æ¨¡å¼ 4ï¼šContext å«ç”Ÿç®¡ç†</a>
      <ul>
        <li><a href="#ç†è§£-context-è¡°å‡">ç†è§£ Context è¡°å‡</a></li>
        <li><a href="#ç¦ç”¨è‡ªåŠ¨å‹ç¼©-auto-compact">ç¦ç”¨è‡ªåŠ¨å‹ç¼© (Auto-Compact)</a></li>
        <li><a href="#context-çŠ¶æ€æ¨¡å¼"><code>/context</code> çŠ¶æ€æ¨¡å¼</a></li>
        <li><a href="#åŒå‡»-esc-æ—¶é—´æ—…è¡Œæ¨¡å¼">â€œåŒå‡» Esc æ—¶é—´æ—…è¡Œâ€æ¨¡å¼</a></li>
        <li><a href="#context-ç®¡ç†å·¥ä½œæµ">Context ç®¡ç†å·¥ä½œæµ</a></li>
        <li><a href="#æ™ºèƒ½å‹ç¼©å‘½ä»¤">æ™ºèƒ½å‹ç¼©å‘½ä»¤</a></li>
      </ul>
    </li>
    <li><a href="#6-æ¨¡å¼-5å­-agentæ™ºèƒ½ä½“æ§åˆ¶">6. æ¨¡å¼ 5ï¼šå­ Agentï¼ˆæ™ºèƒ½ä½“ï¼‰æ§åˆ¶</a>
      <ul>
        <li><a href="#é»˜è®¤é—®é¢˜">é»˜è®¤é—®é¢˜</a></li>
        <li><a href="#å¼ºåˆ¶ä½¿ç”¨-opus-å­-agent">å¼ºåˆ¶ä½¿ç”¨ Opus å­ Agent</a></li>
        <li><a href="#è‡ªå®šä¹‰å­-agent-é›†åˆ">è‡ªå®šä¹‰å­ Agent é›†åˆ</a>
          <ul>
            <li><a href="#ä»£ç å®¡æŸ¥å‘˜-claudeagentscode-reviewermd">ä»£ç å®¡æŸ¥å‘˜ (<code>~/.claude/agents/code-reviewer.md</code>)</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#critical-">Critical ğŸ”´</a></li>
    <li><a href="#important-">Important ğŸŸ¡</a></li>
    <li><a href="#suggestions-">Suggestions ğŸŸ¢</a>
      <ul>
        <li>
          <ul>
            <li><a href="#æµ‹è¯•ç¼–å†™è€…-claudeagentstest-writermd">æµ‹è¯•ç¼–å†™è€… (<code>~/.claude/agents/test-writer.md</code>)</a></li>
            <li><a href="#æ¶æ„åˆ†æå¸ˆ-claudeagentsarchitectmd">æ¶æ„åˆ†æå¸ˆ (<code>~/.claude/agents/architect.md</code>)</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#step-3-confirm-ç¡®è®¤">Step 3: Confirm (ç¡®è®¤)</a>
      <ul>
        <li><a href="#ç¤ºä¾‹ä¼šè¯">ç¤ºä¾‹ä¼šè¯</a></li>
      </ul>
    </li>
    <li><a href="#8-å­-agent-ç›‘æ§ä»ªè¡¨ç›˜">8. å­ Agent ç›‘æ§ä»ªè¡¨ç›˜</a>
      <ul>
        <li><a href="#å®‰è£…">å®‰è£…</a></li>
        <li><a href="#ä»ªè¡¨ç›˜ä»£ç -claudemonitoringpagesindextsx">ä»ªè¡¨ç›˜ä»£ç  (<code>~/.claude/monitoring/pages/index.tsx</code>)</a></li>
        <li><a href="#æ—¥å¿—æ”¶é›†-hook">æ—¥å¿—æ”¶é›† Hook</a></li>
        <li><a href="#æ—¥å¿—è„šæœ¬-claudemonitoringlog-subagentsh">æ—¥å¿—è„šæœ¬ (<code>~/.claude/monitoring/log-subagent.sh</code>)</a></li>
      </ul>
    </li>
    <li><a href="#9-å¿«é€Ÿå‚è€ƒè¡¨">9. å¿«é€Ÿå‚è€ƒè¡¨</a>
      <ul>
        <li><a href="#é”®ç›˜å¿«æ·é”®">é”®ç›˜å¿«æ·é”®</a></li>
        <li><a href="#å¿…å¤‡å‘½ä»¤">å¿…å¤‡å‘½ä»¤</a></li>
        <li><a href="#context-ç®¡ç†é˜ˆå€¼">Context ç®¡ç†é˜ˆå€¼</a></li>
        <li><a href="#æ¨¡å‹é€‰æ‹©æŒ‡å—">æ¨¡å‹é€‰æ‹©æŒ‡å—</a></li>
        <li><a href="#æ–‡ä»¶ä½ç½®">æ–‡ä»¶ä½ç½®</a></li>
        <li><a href="#å®‰å…¨-hook-æ£€æŸ¥æ¸…å•">å®‰å…¨ Hook æ£€æŸ¥æ¸…å•</a></li>
        <li><a href="#prompt-è´¨é‡æ£€æŸ¥æ¸…å•">Prompt è´¨é‡æ£€æŸ¥æ¸…å•</a></li>
        <li><a href="#é”™è¯¯æ¢å¤æµç¨‹å›¾">é”™è¯¯æ¢å¤æµç¨‹å›¾</a></li>
      </ul>
    </li>
    <li><a href="#é™„å½•claudemd-æ¨¡æ¿">é™„å½•ï¼šCLAUDE.md æ¨¡æ¿</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="claude-code-ç²¾é€šæŒ‡å—å®ç°-10-å€æ•ˆç‡çš„é«˜çº§æ¨¡å¼">Claude Code ç²¾é€šæŒ‡å—ï¼šå®ç° 10 å€æ•ˆç‡çš„é«˜çº§æ¨¡å¼</h1>
<p><strong>ä¸€ä»½å…³äºé‚£äº›çœŸæ­£èƒ½å¸¦æ¥å®è´¨æå‡çš„æ¨¡å¼çš„ç»¼åˆæŒ‡å—</strong></p>
<p><em>åŸºäº 2000+ å°æ—¶ LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰è¾…åŠ©ç¼–ç¨‹ç»éªŒ</em></p>
<hr>
<h2 id="ç›®å½•">ç›®å½•</h2>
<ol>
<li><a href="#1-%e6%a0%b8%e5%bf%83%e7%90%86%e5%bf%b5context%e4%b8%8a%e4%b8%8b%e6%96%87%e5%b7%a5%e7%a8%8b" rel="">æ ¸å¿ƒç†å¿µï¼šContextï¼ˆä¸Šä¸‹æ–‡ï¼‰å·¥ç¨‹</a></li>
<li><a href="#2-%e6%a8%a1%e5%bc%8f-1%e9%94%99%e8%af%af%e6%97%a5%e5%bf%97%e7%b3%bb%e7%bb%9f" rel="">æ¨¡å¼ 1ï¼šé”™è¯¯æ—¥å¿—ç³»ç»Ÿ</a></li>
<li><a href="#3-%e6%a8%a1%e5%bc%8f-2slash-%e5%91%bd%e4%bb%a4%e4%bd%9c%e4%b8%ba%e8%bd%bb%e9%87%8f%e7%ba%a7%e6%9c%ac%e5%9c%b0%e5%ba%94%e7%94%a8" rel="">æ¨¡å¼ 2ï¼šSlash å‘½ä»¤ä½œä¸ºè½»é‡çº§æœ¬åœ°åº”ç”¨</a></li>
<li><a href="#4-%e6%a8%a1%e5%bc%8f-3%e7%94%a8%e4%ba%8e%e7%a1%ae%e5%ae%9a%e6%80%a7%e5%ae%89%e5%85%a8%e7%9a%84-hooks" rel="">æ¨¡å¼ 3ï¼šç”¨äºç¡®å®šæ€§å®‰å…¨çš„ Hooks</a></li>
<li><a href="#5-%e6%a8%a1%e5%bc%8f-4context-%e5%8d%ab%e7%94%9f%e7%ae%a1%e7%90%86" rel="">æ¨¡å¼ 4ï¼šContext å«ç”Ÿç®¡ç†</a></li>
<li><a href="#6-%e6%a8%a1%e5%bc%8f-5%e5%ad%90-agent%e6%99%ba%e8%83%bd%e4%bd%93%e6%8e%a7%e5%88%b6" rel="">æ¨¡å¼ 5ï¼šå­ Agentï¼ˆæ™ºèƒ½ä½“ï¼‰æ§åˆ¶</a></li>
<li><a href="#7-%e6%a8%a1%e5%bc%8f-6%e9%87%8d%e6%8f%90%e7%a4%bareprompter%e7%b3%bb%e7%bb%9f" rel="">æ¨¡å¼ 6ï¼šé‡æç¤ºï¼ˆReprompterï¼‰ç³»ç»Ÿ</a></li>
<li><a href="#8-%e5%ad%90-agent-%e7%9b%91%e6%8e%a7%e4%bb%aa%e8%a1%a8%e7%9b%98" rel="">å­ Agent ç›‘æ§ä»ªè¡¨ç›˜</a></li>
<li><a href="#9-%e5%bf%ab%e9%80%9f%e5%8f%82%e8%80%83%e8%a1%a8" rel="">å¿«é€Ÿå‚è€ƒè¡¨</a></li>
</ol>
<hr>
<h2 id="1-æ ¸å¿ƒç†å¿µcontextä¸Šä¸‹æ–‡å·¥ç¨‹">1. æ ¸å¿ƒç†å¿µï¼šContextï¼ˆä¸Šä¸‹æ–‡ï¼‰å·¥ç¨‹</h2>
<h3 id="æ ¹æœ¬æ€§çš„æ€ç»´è½¬å˜">æ ¹æœ¬æ€§çš„æ€ç»´è½¬å˜</h3>
<p><strong>LLM ç”Ÿæˆä»£ç ä¸­çš„ä»»ä½•é—®é¢˜ï¼Œå½’æ ¹ç»“åº•éƒ½æ˜¯ä½ çš„è´£ä»»ã€‚</strong></p>
<p>è¿™å¹¶ä¸æ˜¯æŒ‡è´£ï¼Œè€Œæ˜¯èµ‹èƒ½ã€‚æ¯ä¸€ä¸ªé”™è¯¯éƒ½å¯ä»¥è¿½æº¯åˆ°ï¼š</p>
<ul>
<li><strong>Promptï¼ˆæç¤ºè¯ï¼‰ä¸å½“</strong>ï¼šæŒ‡ä»¤æ¨¡ç³Šã€ç¼ºå°‘çº¦æŸæ¡ä»¶ã€æˆåŠŸæ ‡å‡†ä¸æ˜ç¡®ã€‚</li>
<li><strong>Context å·¥ç¨‹ä¸å½“</strong>ï¼šåŠ è½½äº†é”™è¯¯çš„æ–‡ä»¶ã€Context è¿‡æ—¶ã€ç¼ºå°‘æ¶æ„çŸ¥è¯†ã€‚</li>
<li><strong>Context è…çƒ‚ (Context rot)</strong>ï¼šéšç€æ— å…³ä¿¡æ¯å¡«æ»¡ Context çª—å£ï¼Œè´¨é‡éšä¹‹ä¸‹é™ã€‚</li>
<li><strong>ä¸­é—´è¿·å¤± (Lost in the middle)</strong>ï¼šLLM å¯¹ Context ä¸­é—´éƒ¨åˆ†çš„ä¿¡æ¯å…³æ³¨åº¦è¾ƒä½ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰æ®å¯æŸ¥çš„ç°è±¡ã€‚</li>
</ul>
<h3 id="context-è´¨é‡æ›²çº¿">Context è´¨é‡æ›²çº¿</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">è¾“å‡ºè´¨é‡
</span></span><span class="line"><span class="cl">     â”‚
</span></span><span class="line"><span class="cl"> 100%â”œâ”€â”€â”€â”€â”€â”€â”€â”€â•®
</span></span><span class="line"><span class="cl">     â”‚        â”‚â•²
</span></span><span class="line"><span class="cl">  80%â”‚        â”‚ â•²
</span></span><span class="line"><span class="cl">     â”‚        â”‚  â•² â† &#34;ä¸­é—´è¿·å¤±&#34; å¼€å§‹å‡ºç°
</span></span><span class="line"><span class="cl">  60%â”‚        â”‚   â•²
</span></span><span class="line"><span class="cl">     â”‚        â”‚    â•²____
</span></span><span class="line"><span class="cl">  40%â”‚        â”‚         â•²___
</span></span><span class="line"><span class="cl">     â”‚        â”‚              â•²___
</span></span><span class="line"><span class="cl">  20%â”‚        â”‚                   â•²
</span></span><span class="line"><span class="cl">     â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Context ä½¿ç”¨ç‡ %
</span></span><span class="line"><span class="cl">           20%   40%   60%   80%  100%
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>å…³é”®æ´å¯Ÿ</strong>ï¼šè´¨é‡ä¸‹é™æ˜¯éçº¿æ€§çš„ã€‚æœ€å 20% çš„ Context å¾€å¾€æ˜¯â€œæ¯’è¯â€ã€‚</p>
<hr>
<h2 id="2-æ¨¡å¼-1é”™è¯¯æ—¥å¿—ç³»ç»Ÿ">2. æ¨¡å¼ 1ï¼šé”™è¯¯æ—¥å¿—ç³»ç»Ÿ</h2>
<h3 id="é—®é¢˜æ‰€åœ¨">é—®é¢˜æ‰€åœ¨</h3>
<p>Agenticï¼ˆä»£ç†å¼ï¼‰ç¼–ç¨‹å¯¹ä½ éšè—äº†è¾“å…¥-è¾“å‡ºçš„å¾ªç¯ã€‚Claude åšå‡ºå†³å®šï¼Œæ‰§è¡Œå·¥å…·ï¼Œè€Œä½ åªçœ‹åˆ°æœ€ç»ˆç»“æœã€‚å½“äº‹æƒ…å‡ºé”™æ—¶ï¼Œä½ ä¸çŸ¥é“<em>åŸå› </em>ã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆé‡æ„åé¦ˆå¾ªç¯">è§£å†³æ–¹æ¡ˆï¼šé‡æ„åé¦ˆå¾ªç¯</h3>
<p>å»ºç«‹ä¸€ä¸ªç³»ç»Ÿçš„å¤±è´¥æ—¥å¿—ï¼ŒåŒ…å«ï¼š</p>
<ol>
<li><strong>è§¦å‘è¯¥é—®é¢˜çš„ç¡®åˆ‡ Prompt</strong></li>
<li><strong>Context çŠ¶æ€</strong>ï¼ˆåŠ è½½äº†å“ªäº›æ–‡ä»¶ï¼Œä½¿ç”¨ç™¾åˆ†æ¯”ï¼‰</li>
<li><strong>å¤±è´¥æ¨¡å¼</strong>ï¼ˆè¾“å‡ºé”™è¯¯ã€å¹»è§‰ã€æ‹’ç»æ‰§è¡Œã€æ­»å¾ªç¯ï¼‰</li>
<li><strong>ä½ çš„è¯Šæ–­</strong>ï¼ˆä½ å“ªé‡Œåšé”™äº†ï¼Ÿï¼‰</li>
</ol>
<h3 id="å®ç°">å®ç°</h3>
<h4 id="é”™è¯¯æ—¥å¿—æ¨¡æ¿-claudeerror-logmd">é”™è¯¯æ—¥å¿—æ¨¡æ¿ (<code>~/.claude/error-log.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl"><span class="gh"># Claude Code é”™è¯¯æ—¥å¿—
</span></span></span><span class="line"><span class="cl"><span class="gh"></span>
</span></span><span class="line"><span class="cl"><span class="gu">## è®°å½•æ ¼å¼
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> **Date**: 
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Prompt**: [ç¡®åˆ‡çš„æ–‡æœ¬]
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Context %**: 
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Files Loaded**: 
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Failure Mode**: [wrong-output | hallucination | refusal | infinite-loop | context-rot]
</span></span><span class="line"><span class="cl"><span class="k">-</span> **What Claude Did**: 
</span></span><span class="line"><span class="cl"><span class="k">-</span> **What I Expected**: 
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Root Cause**: [prompting | context | model-limitation]
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Fix Applied**: 
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Pattern Identified**: 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## 2025-01-03 | Auth é‡æ„ä¸­çš„ Context è…çƒ‚
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>
</span></span><span class="line"><span class="cl"><span class="gs">**Prompt**</span>: &#34;Now refactor the auth module to use the new pattern&#34; (ç°åœ¨é‡æ„ auth æ¨¡å—ä»¥ä½¿ç”¨æ–°æ¨¡å¼)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gs">**Context %**</span>: 78%
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gs">**Files Loaded**</span>: 12 files from src/auth/, 3 config files, previous conversation
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gs">**Failure Mode**</span>: wrong-output (è¾“å‡ºé”™è¯¯)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gs">**What Claude Did**</span>: ä½¿ç”¨äº†æ—§æ¨¡å¼ï¼Œå°½ç®¡ 30 æ¡æ¶ˆæ¯å‰å·²ç»å±•ç¤ºäº†æ–°æ¨¡å¼
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gs">**What I Expected**</span>: åº”ç”¨ç¬¬ 4 æ¡æ¶ˆæ¯ä¸­çš„æ–° auth æ¨¡å¼
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gs">**Root Cause**</span>: context - æ–°æ¨¡å¼å¤„äºâ€œä¸­é—´è¿·å¤±â€åŒºåŸŸ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gs">**Fix Applied**</span>: /clear â†’ é‡æ–°é™ˆè¿°æ¨¡å¼ â†’ æŒ‡å‘åŒ…å«è¯¥æ¨¡å¼çš„å…·ä½“æ–‡ä»¶
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gs">**Pattern Identified**</span>: å¦‚æœ Context ä½¿ç”¨ç‡ &gt;50%ï¼Œåœ¨è¦æ±‚å®æ–½ä¹‹å‰ï¼ŒåŠ¡å¿…é‡æ–°é™ˆè¿°å…³é”®æ¨¡å¼
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">---
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç”¨äºå¿«é€Ÿè®°å½•çš„-slash-å‘½ä»¤">ç”¨äºå¿«é€Ÿè®°å½•çš„ Slash å‘½ä»¤</h4>
<p>åˆ›å»º <code>~/.claude/commands/log-error.md</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Log a Claude Code error for pattern analysis
</span></span><span class="line"><span class="cl">argument-hint: [failure-mode] [brief-description]
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">æˆ‘éœ€è¦ä¸ºæˆ‘çš„å­¦ä¹ ç³»ç»Ÿè®°å½•ä¸€ä¸ªé”™è¯¯ã€‚è¯·å¸®æˆ‘å¡«å†™è¿™ä¸ªæ¨¡æ¿ï¼š
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gs">**Failure Mode**</span>: $1
</span></span><span class="line"><span class="cl"><span class="gs">**Brief Description**</span>: $2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">è¯·ä¸€æ¬¡ä¸€ä¸ªåœ°é—®æˆ‘ä»¥ä¸‹é—®é¢˜ï¼š
</span></span><span class="line"><span class="cl"><span class="k">1.</span> è§¦å‘æ­¤é—®é¢˜çš„ç¡®åˆ‡ Prompt æ˜¯ä»€ä¹ˆï¼Ÿ
</span></span><span class="line"><span class="cl"><span class="k">2.</span> å‘ç”Ÿæ—¶ Context % æ˜¯å¤šå°‘ï¼Ÿ
</span></span><span class="line"><span class="cl"><span class="k">3.</span> åŠ è½½äº†å“ªäº›æ–‡ä»¶ï¼Ÿ
</span></span><span class="line"><span class="cl"><span class="k">4.</span> ä½ é¢„æœŸçš„æ˜¯ä»€ä¹ˆ vs å®é™…å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ
</span></span><span class="line"><span class="cl"><span class="k">5.</span> ä½ è®¤ä¸ºæ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ç„¶åå°†å…¶æ ¼å¼åŒ–ä¸º Markdown æ¡ç›®ï¼Œä»¥ä¾¿æˆ‘å¯ä»¥å°†å…¶è¿½åŠ åˆ°æˆ‘çš„é”™è¯¯æ—¥å¿—ä¸­ã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="é”™è¯¯ç±»åˆ«ä¸å¸¸è§ä¿®å¤">é”™è¯¯ç±»åˆ«ä¸å¸¸è§ä¿®å¤</h3>
<table>
  <thead>
      <tr>
          <th>å¤±è´¥æ¨¡å¼ (Failure Mode)</th>
          <th>å¸¸è§åŸå›  (Common Causes)</th>
          <th>æ ‡å‡†ä¿®å¤ (Standard Fixes)</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Wrong Output (è¾“å‡ºé”™è¯¯)</strong></td>
          <td>Prompt æ¨¡ç³Šï¼Œç¼ºå°‘çº¦æŸ</td>
          <td>æ·»åŠ æ˜ç¡®çš„çº¦æŸå’Œç¤ºä¾‹</td>
      </tr>
      <tr>
          <td><strong>Hallucination (å¹»è§‰)</strong></td>
          <td>è¯¢é—® Claude æ²¡çœ‹è¿‡çš„ä»£ç </td>
          <td>å…ˆ @-mention å…·ä½“æ–‡ä»¶</td>
      </tr>
      <tr>
          <td><strong>Refusal (æ‹’ç»)</strong></td>
          <td>è§¦å‘å®‰å…¨æœºåˆ¶ï¼Œè¯·æ±‚æ¨¡æ£±ä¸¤å¯</td>
          <td>é‡æ–°è¡¨è¿°ï¼Œæä¾›æ›´å¤šèƒŒæ™¯</td>
      </tr>
      <tr>
          <td><strong>Infinite Loop (æ­»å¾ªç¯)</strong></td>
          <td>æˆåŠŸæ ‡å‡†ä¸æ˜ç¡®</td>
          <td>æ˜ç¡®å®šä¹‰é€€å‡ºæ¡ä»¶</td>
      </tr>
      <tr>
          <td><strong>Context Rot (Context è…çƒ‚)</strong></td>
          <td>Context &gt;70%ï¼Œä¿¡æ¯è¿‡æ—¶</td>
          <td><code>/clear</code>ï¼Œç”¨æ–°é²œçš„ Context é‡å¯</td>
      </tr>
      <tr>
          <td><strong>Regression (å€’é€€/å›å½’)</strong></td>
          <td>ä¿®å¥½äº†è¿™ä¸ªï¼Œæåäº†é‚£ä¸ª</td>
          <td>å®æ–½å‰è¦æ±‚å…ˆå†™æµ‹è¯•</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="3-æ¨¡å¼-2slash-å‘½ä»¤ä½œä¸ºè½»é‡çº§æœ¬åœ°åº”ç”¨">3. æ¨¡å¼ 2ï¼šSlash å‘½ä»¤ä½œä¸ºè½»é‡çº§æœ¬åœ°åº”ç”¨</h2>
<h3 id="å¿ƒæ™ºæ¨¡å‹">å¿ƒæ™ºæ¨¡å‹</h3>
<p>æŠŠ Slash å‘½ä»¤ï¼ˆSlash Commandsï¼‰æƒ³è±¡æˆ <strong>Claudeå³æœåŠ¡ (Claude-as-a-Service) çš„å·¥ä½œæµ</strong>ã€‚å®ƒä»¬å°±åƒæ˜¯ä½ å¯ä»¥åœ¨ 5 åˆ†é’Ÿå†…æ„å»ºçš„ SaaS äº§å“ï¼š</p>
<ul>
<li>é¢„é…ç½®äº†å†…ç½®æœ€ä½³å®è·µçš„ Prompt</li>
<li>ç”¨äºåŠ¨æ€è¡Œä¸ºçš„å‚æ•°å¤„ç†</li>
<li>ç”¨äºå®‰å…¨çš„å·¥å…·é™åˆ¶</li>
<li>ç”¨äºæˆæœ¬/è´¨é‡æƒè¡¡çš„æ¨¡å‹é€‰æ‹©</li>
</ul>
<h3 id="å‘½ä»¤æ¶æ„">å‘½ä»¤æ¶æ„</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">~/.claude/commands/          # ä¸ªäººå‘½ä»¤ï¼ˆéšå¤„å¯ç”¨ï¼‰
</span></span><span class="line"><span class="cl">â”œâ”€â”€ quick/                   # å¿«é€Ÿã€ç®€å•çš„å‘½ä»¤
</span></span><span class="line"><span class="cl">â”‚   â”œâ”€â”€ commit.md
</span></span><span class="line"><span class="cl">â”‚   â”œâ”€â”€ pr.md
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ review.md
</span></span><span class="line"><span class="cl">â”œâ”€â”€ research/                # è°ƒæŸ¥ç±»å‘½ä»¤
</span></span><span class="line"><span class="cl">â”‚   â”œâ”€â”€ deep-dive.md
</span></span><span class="line"><span class="cl">â”‚   â”œâ”€â”€ compare.md
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ audit.md
</span></span><span class="line"><span class="cl">â””â”€â”€ workflows/               # å¤šæ­¥éª¤æµç¨‹
</span></span><span class="line"><span class="cl">    â”œâ”€â”€ feature.md
</span></span><span class="line"><span class="cl">    â”œâ”€â”€ debug.md
</span></span><span class="line"><span class="cl">    â””â”€â”€ refactor.md
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">.claude/commands/            # é¡¹ç›®å‘½ä»¤ï¼ˆå›¢é˜Ÿå…±äº«ï¼‰
</span></span><span class="line"><span class="cl">â”œâ”€â”€ test.md
</span></span><span class="line"><span class="cl">â”œâ”€â”€ deploy.md
</span></span><span class="line"><span class="cl">â””â”€â”€ docs.md
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å¿…å¤‡-slash-å‘½ä»¤é›†">å¿…å¤‡ Slash å‘½ä»¤é›†</h3>
<h4 id="1-æ™ºèƒ½æäº¤-claudecommandscommitmd">1. æ™ºèƒ½æäº¤ (<code>~/.claude/commands/commit.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Create a semantic commit with conventional format
</span></span><span class="line"><span class="cl">allowed-tools: Bash(git diff:*), Bash(git status:*), Bash(git add:*), Bash(git commit:*)
</span></span><span class="line"><span class="cl">model: claude-3-5-haiku-20241022
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">åˆ†ææˆ‘æš‚å­˜ï¼ˆstagedï¼‰çš„æ›´æ”¹å¹¶åˆ›å»ºä¸€ä¸ªæäº¤ï¼š
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">1.</span> è¿è¡Œ <span class="sb">`git diff --cached`</span> æŸ¥çœ‹æš‚å­˜çš„æ›´æ”¹
</span></span><span class="line"><span class="cl"><span class="k">2.</span> è¿è¡Œ <span class="sb">`git status`</span> äº†è§£èŒƒå›´
</span></span><span class="line"><span class="cl"><span class="k">3.</span> ç”Ÿæˆéµå¾ª Conventional Commitsï¼ˆçº¦å®šå¼æäº¤ï¼‰çš„æäº¤ä¿¡æ¯ï¼š
</span></span><span class="line"><span class="cl">   <span class="k">-</span> feat: æ–°åŠŸèƒ½
</span></span><span class="line"><span class="cl">   <span class="k">-</span> fix: ä¿®å¤ bug
</span></span><span class="line"><span class="cl">   <span class="k">-</span> refactor: ä»£ç é‡æ„
</span></span><span class="line"><span class="cl">   <span class="k">-</span> docs: æ–‡æ¡£
</span></span><span class="line"><span class="cl">   <span class="k">-</span> test: æ·»åŠ æµ‹è¯•
</span></span><span class="line"><span class="cl">   <span class="k">-</span> chore: ç»´æŠ¤æ‚é¡¹
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">4.</span> æ ¼å¼ï¼š<span class="sb">`type(scope): brief description`</span>
</span></span><span class="line"><span class="cl">   <span class="k">-</span> ä¿æŒåœ¨ 72 ä¸ªå­—ç¬¦ä»¥å†…
</span></span><span class="line"><span class="cl">   <span class="k">-</span> ä½¿ç”¨ç¥ˆä½¿è¯­æ°”ï¼ˆç”¨ &#34;add&#34; è€Œä¸æ˜¯ &#34;added&#34;ï¼‰
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">5.</span> è¯·æ±‚æˆ‘ç¡®è®¤ï¼Œç„¶åæäº¤
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">å¦‚æœæ²¡æœ‰æš‚å­˜çš„æ›´æ”¹ï¼Œå…ˆå¸®æˆ‘æš‚å­˜ç›¸å…³æ–‡ä»¶ã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="2-pr-åˆ›å»ºå™¨-claudecommandsprmd">2. PR åˆ›å»ºå™¨ (<code>~/.claude/commands/pr.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Create a comprehensive pull request
</span></span><span class="line"><span class="cl">allowed-tools: Bash(git:*), Bash(gh:*)
</span></span><span class="line"><span class="cl">argument-hint: [base-branch]
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">é’ˆå¯¹ $ARGUMENTS (é»˜è®¤: main) åˆ›å»ºä¸€ä¸ª Pull Requestï¼š
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">1.</span> è¿è¡Œ <span class="sb">`git log main..HEAD --oneline`</span> æŸ¥çœ‹æäº¤
</span></span><span class="line"><span class="cl"><span class="k">2.</span> è¿è¡Œ <span class="sb">`git diff main...HEAD --stat`</span> æŸ¥çœ‹å˜æ›´æ‘˜è¦
</span></span><span class="line"><span class="cl"><span class="k">3.</span> ç”ŸæˆåŒ…å«ä»¥ä¸‹å†…å®¹çš„ PRï¼š
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Title: ç¬¦åˆä¸»è¦å˜æ›´çš„å¸¸è§„æ ¼å¼
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Description:
</span></span><span class="line"><span class="cl">     ## Summary
</span></span><span class="line"><span class="cl">     [2-3 å¥è¯è¯´æ˜åšäº†ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     ## Changes
</span></span><span class="line"><span class="cl">     <span class="k">-</span> [å…³é”®å˜æ›´çš„è¦ç‚¹åˆ—è¡¨]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     ## Testing
</span></span><span class="line"><span class="cl">     <span class="k">-</span> [è¿™æ˜¯å¦‚ä½•æµ‹è¯•çš„]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     ## Screenshots
</span></span><span class="line"><span class="cl">     [å¦‚æœæœ‰ UI å˜æ›´ï¼Œæ³¨æ˜åº”æ·»åŠ æˆªå›¾]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">4.</span> ä½¿ç”¨ <span class="sb">`gh pr create`</span> å’Œç”Ÿæˆçš„å†…å®¹åˆ›å»º PR
</span></span><span class="line"><span class="cl"><span class="k">5.</span> å®Œæˆåè¾“å‡º PR çš„ URL
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="3-æ·±åº¦è°ƒæŸ¥-claudecommandsinvestigatemd">3. æ·±åº¦è°ƒæŸ¥ (<code>~/.claude/commands/investigate.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Deep dive into a bug or behavior
</span></span><span class="line"><span class="cl">allowed-tools: Read, Grep, Glob, Bash(git log:*), Bash(git blame:*)
</span></span><span class="line"><span class="cl">argument-hint: [issue-description]
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">è°ƒæŸ¥ï¼š$ARGUMENTS
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">éµå¾ªè¿™ä¸ªç³»ç»ŸåŒ–æµç¨‹ï¼š
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## ç¬¬ä¸€é˜¶æ®µï¼šç†è§£
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> é¢„æœŸè¡Œä¸ºæ˜¯ä»€ä¹ˆï¼Ÿ
</span></span><span class="line"><span class="cl"><span class="k">-</span> å®é™…è¡Œä¸ºæ˜¯ä»€ä¹ˆï¼Ÿ
</span></span><span class="line"><span class="cl"><span class="k">-</span> ä»€ä¹ˆæ—¶å€™å¼€å§‹çš„ï¼Ÿï¼ˆå¦‚æœç›¸å…³ï¼Œæ£€æŸ¥ git logï¼‰
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## ç¬¬äºŒé˜¶æ®µï¼šå®šä½
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> ä½¿ç”¨ Grep æœç´¢ç›¸å…³ä»£ç 
</span></span><span class="line"><span class="cl"><span class="k">-</span> ä»å…¥å£ç‚¹è¿½è¸ªä»£ç è·¯å¾„
</span></span><span class="line"><span class="cl"><span class="k">-</span> è¯†åˆ«æ‰€æœ‰æ¶‰åŠçš„æ–‡ä»¶
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## ç¬¬ä¸‰é˜¶æ®µï¼šåˆ†æ
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> ä½¿ç”¨ git blame äº†è§£å†å²
</span></span><span class="line"><span class="cl"><span class="k">-</span> å¯»æ‰¾å¯èƒ½å¯¼è‡´æ­¤é—®é¢˜çš„è¿‘æœŸæ›´æ”¹
</span></span><span class="line"><span class="cl"><span class="k">-</span> æ£€æŸ¥å…¶ä»–åœ°æ–¹æ˜¯å¦æœ‰ç›¸å…³é—®é¢˜/æ¨¡å¼
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## ç¬¬å››é˜¶æ®µï¼šæŠ¥å‘Š
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>æä¾›ç»“æ„åŒ–æŠ¥å‘Šï¼š
</span></span><span class="line"><span class="cl"><span class="k">1.</span> <span class="gs">**Root Cause (æ ¹æœ¬åŸå› )**</span>: [ä¸€å¥è¯]
</span></span><span class="line"><span class="cl"><span class="k">2.</span> <span class="gs">**Affected Files (å—å½±å“æ–‡ä»¶)**</span>: [åˆ—è¡¨]
</span></span><span class="line"><span class="cl"><span class="k">3.</span> <span class="gs">**Recommended Fix (æ¨èä¿®å¤)**</span>: [æ–¹æ³•]
</span></span><span class="line"><span class="cl"><span class="k">4.</span> <span class="gs">**Risk Assessment (é£é™©è¯„ä¼°)**</span>: [ä»€ä¹ˆå¯èƒ½ä¼šå]
</span></span><span class="line"><span class="cl"><span class="k">5.</span> <span class="gs">**Test Plan (æµ‹è¯•è®¡åˆ’)**</span>: [å¦‚ä½•éªŒè¯]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ä¸è¦åšä»»ä½•æ›´æ”¹ã€‚ä»…é™è°ƒæŸ¥ã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="4-æµ‹è¯•ç”Ÿæˆå™¨-claudecommandstestmd">4. æµ‹è¯•ç”Ÿæˆå™¨ (<code>~/.claude/commands/test.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Generate comprehensive tests for a file or function
</span></span><span class="line"><span class="cl">allowed-tools: Read, Write, Bash(npm test:*), Bash(pytest:*)
</span></span><span class="line"><span class="cl">argument-hint: [file-or-function]
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ä¸ºä»¥ä¸‹å†…å®¹ç”Ÿæˆæµ‹è¯•ï¼š$ARGUMENTS
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## æµç¨‹ï¼š
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>
</span></span><span class="line"><span class="cl"><span class="k">1.</span> <span class="gs">**é˜…è¯»ç›®æ ‡ä»£ç **</span> - ç†è§£æ‰€æœ‰è·¯å¾„å’Œè¾¹ç¼˜æƒ…å†µ
</span></span><span class="line"><span class="cl"><span class="k">2.</span> <span class="gs">**ç¡®å®šæµ‹è¯•æ¡†æ¶**</span> - æ£€æŸ¥ç°æœ‰æµ‹è¯•ã€package.jsonã€pytest.ini
</span></span><span class="line"><span class="cl"><span class="k">3.</span> <span class="gs">**ç”Ÿæˆè¦†ç›–ä»¥ä¸‹å†…å®¹çš„æµ‹è¯•**</span>ï¼š
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Happy path (æ­£å¸¸ä½¿ç”¨)
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Edge cases (ç©ºå€¼ã€nullã€è¾¹ç•Œå€¼)
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Error cases (æ— æ•ˆè¾“å…¥ã€å¼‚å¸¸)
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Integration points (å¤–éƒ¨ä¾èµ–çš„ mock)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">4.</span> <span class="gs">**éµå¾ªç°æœ‰æ¨¡å¼**</span> - åŒ¹é…ç°æœ‰æµ‹è¯•çš„é£æ ¼
</span></span><span class="line"><span class="cl"><span class="k">5.</span> <span class="gs">**è¿è¡Œæµ‹è¯•**</span> - ç¡®ä¿å®ƒä»¬é€šè¿‡
</span></span><span class="line"><span class="cl"><span class="k">6.</span> <span class="gs">**æŠ¥å‘Šè¦†ç›–ç‡ç¼ºå£**</span> - è¿˜æœ‰ä»€ä¹ˆæœªæµ‹è¯•ï¼Ÿ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">è¾“å‡ºæ ¼å¼ï¼šéµå¾ªé¡¹ç›®æƒ¯ä¾‹åˆ›å»ºæµ‹è¯•æ–‡ä»¶ã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="5-å®‰å…¨å®¡è®¡-claudecommandssecurity-auditmd">5. å®‰å…¨å®¡è®¡ (<code>~/.claude/commands/security-audit.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Security-focused code review
</span></span><span class="line"><span class="cl">allowed-tools: Read, Grep, Glob
</span></span><span class="line"><span class="cl">argument-hint: [file-or-directory]
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">å¯¹ä»¥ä¸‹å†…å®¹æ‰§è¡Œå®‰å…¨å®¡è®¡ï¼š$ARGUMENTS
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## æ£€æŸ¥ï¼š
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>
</span></span><span class="line"><span class="cl"><span class="gu">### è¾“å…¥éªŒè¯
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">- [ ]</span> SQL æ³¨å…¥æ¼æ´
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> XSS (è·¨ç«™è„šæœ¬)
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> å‘½ä»¤æ³¨å…¥
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> è·¯å¾„éå†
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">### è®¤è¯ä¸æˆæƒ
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">- [ ]</span> ç¡¬ç¼–ç å‡­æ®
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> è–„å¼±çš„ä¼šè¯å¤„ç†
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> ç¼ºå°‘æƒé™æ£€æŸ¥
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> ææƒè·¯å¾„
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">### æ•°æ®å¤„ç†
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">- [ ]</span> æ—¥å¿—ä¸­çš„æ•æ„Ÿæ•°æ®
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> æœªåŠ å¯†çš„å¯†é’¥
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> PII (ä¸ªäººéšç§ä¿¡æ¯) æš´éœ²
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> ä¸å®‰å…¨çš„ååºåˆ—åŒ–
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">### ä¾èµ–é¡¹
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">- [ ]</span> å·²çŸ¥çš„æ˜“å—æ”»å‡»åŒ…
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> è¿‡æ—¶çš„ä¾èµ–é¡¹
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> æœªä½¿ç”¨çš„ä¾èµ–é¡¹
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## è¾“å‡ºæ ¼å¼ï¼š
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>å¯¹äºæ¯ä¸ªå‘ç°ï¼š
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Severity (ä¸¥é‡æ€§)**: Critical / High / Medium / Low
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Location (ä½ç½®)**: file:line
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Issue (é—®é¢˜)**: æè¿°
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Recommendation (å»ºè®®)**: å¦‚ä½•ä¿®å¤
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Reference (å‚è€ƒ)**: CWE æˆ– OWASP é“¾æ¥ï¼ˆå¦‚æœé€‚ç”¨ï¼‰
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="6-é‡æ„è§„åˆ’å™¨-claudecommandsrefactor-planmd">6. é‡æ„è§„åˆ’å™¨ (<code>~/.claude/commands/refactor-plan.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Plan a refactoring without executing it
</span></span><span class="line"><span class="cl">allowed-tools: Read, Grep, Glob
</span></span><span class="line"><span class="cl">argument-hint: [what-to-refactor]
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">è§„åˆ’é‡æ„ï¼š$ARGUMENTS
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## ä¸è¦è¿›è¡Œä»»ä½•æ›´æ”¹ - ä»…è§„åˆ’
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>
</span></span><span class="line"><span class="cl"><span class="gu">### åˆ†æé˜¶æ®µï¼š
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">1.</span> é˜…è¯»æ‰€æœ‰ç›¸å…³æ–‡ä»¶
</span></span><span class="line"><span class="cl"><span class="k">2.</span> æ˜ å°„ä¾èµ–å…³ç³»ï¼ˆä»€ä¹ˆå¯¼å…¥äº†è¿™ä¸ªï¼Ÿè¿™ä¸ªå¯¼å…¥äº†ä»€ä¹ˆï¼Ÿï¼‰
</span></span><span class="line"><span class="cl"><span class="k">3.</span> ç¡®å®šæµ‹è¯•è¦†ç›–ç‡
</span></span><span class="line"><span class="cl"><span class="k">4.</span> è®°å½•æ½œåœ¨çš„ç ´åæ€§æ›´æ”¹
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">### è¾“å‡ºé‡æ„è®¡åˆ’ï¼š
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>
</span></span><span class="line"><span class="cl">``<span class="sb">`markdown
</span></span></span><span class="line"><span class="cl"><span class="sb"># Refactoring Plan: [title]
</span></span></span><span class="line"><span class="cl"><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">## Current State (å½“å‰çŠ¶æ€)
</span></span></span><span class="line"><span class="cl"><span class="sb">[æè¿°å½“å‰æ¶æ„/ä»£ç ]
</span></span></span><span class="line"><span class="cl"><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">## Desired State (ç›®æ ‡çŠ¶æ€)
</span></span></span><span class="line"><span class="cl"><span class="sb">[æè¿°ç›®æ ‡æ¶æ„/ä»£ç ]
</span></span></span><span class="line"><span class="cl"><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">## Steps (æ­¥éª¤ - æŒ‰é¡ºåº)
</span></span></span><span class="line"><span class="cl"><span class="sb">1. [ ] Step 1 - [æè¿°] - é£é™©: Low/Med/High
</span></span></span><span class="line"><span class="cl"><span class="sb">2. [ ] Step 2 - [æè¿°] - é£é™©: Low/Med/High
</span></span></span><span class="line"><span class="cl"><span class="sb">...
</span></span></span><span class="line"><span class="cl"><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">## Files to Modify (éœ€ä¿®æ”¹çš„æ–‡ä»¶)
</span></span></span><span class="line"><span class="cl"><span class="sb">- `</span>path/to/file.ts<span class="sb">` - [ä»€ä¹ˆå˜æ›´]
</span></span></span><span class="line"><span class="cl"><span class="sb">- `</span>path/to/other.ts<span class="sb">` - [ä»€ä¹ˆå˜æ›´]
</span></span></span><span class="line"><span class="cl"><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">## Files to Create (éœ€åˆ›å»ºçš„æ–‡ä»¶)
</span></span></span><span class="line"><span class="cl"><span class="sb">- `</span>path/to/new.ts<span class="sb">` - [ç”¨é€”]
</span></span></span><span class="line"><span class="cl"><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">## Files to Delete (éœ€åˆ é™¤çš„æ–‡ä»¶)
</span></span></span><span class="line"><span class="cl"><span class="sb">- `</span>path/to/old.ts` - [ä¸ºä»€ä¹ˆåˆ é™¤æ˜¯å®‰å…¨çš„]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Tests to Add/Update (éœ€æ·»åŠ /æ›´æ–°çš„æµ‹è¯•)
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> [æ‰€éœ€æµ‹è¯•å˜æ›´åˆ—è¡¨]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Rollback Plan (å›æ»šè®¡åˆ’)
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>[å¦‚æœå‡ºé”™å¦‚ä½•æ’¤é”€]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Estimated Effort (é¢„ä¼°å·¥ä½œé‡)
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>[æ—¶é—´é¢„ä¼°]
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“æˆ‘æ‰¹å‡†åï¼Œæˆ‘å°†è¿è¡Œå•ç‹¬çš„å‘½ä»¤æ¥æ‰§è¡Œæ¯ä¸ªæ­¥éª¤ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-----
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">## 4. æ¨¡å¼ 3ï¼šç”¨äºç¡®å®šæ€§å®‰å…¨çš„ Hooks
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">### `--dangerously-skip-permissions` çš„é—®é¢˜
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">`--dangerously-skip-permissions` æ ‡å¿—éå¸¸è¯±äººã€‚å®ƒæ¶ˆé™¤äº†ä¸æ–­çš„â€œæˆ‘å¯ä»¥è¿è¡Œ X å—ï¼Ÿâ€çš„æç¤ºï¼Œå®ç°äº†çœŸæ­£çš„â€œå¿ƒæµâ€çŠ¶æ€ã€‚ä½†å®ƒä¹‹æ‰€ä»¥è¢«ç§°ä¸ºâ€œå±é™©â€ï¼Œæ˜¯å› ä¸º Claude å¯ä»¥ï¼š
</span></span><span class="line"><span class="cl">- ä½¿ç”¨ `rm -rf` åˆ é™¤æ–‡ä»¶
</span></span><span class="line"><span class="cl">- æœªç»å®¡æŸ¥æ¨é€åˆ° git
</span></span><span class="line"><span class="cl">- è¿è¡Œä»»æ„ shell å‘½ä»¤
</span></span><span class="line"><span class="cl">- ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">### è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡ Hooks å»ºç«‹æŠ¤æ 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Hooksï¼ˆé’©å­ï¼‰å…è®¸ä½ åœ¨ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªç‚¹æ‹¦æˆª Claude çš„åŠ¨ä½œå¹¶åº”ç”¨ä½ è‡ªå·±çš„è§„åˆ™ã€‚æ¨¡å¼å¦‚ä¸‹ï¼š
</span></span></code></pre></td></tr></table>
</div>
</div><p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚   â€“dangerously-skip-permissions    +    Safety Hooks       â”‚
â”‚                                                             â”‚
â”‚        (å¿ƒæµçŠ¶æ€)                       (å®‰å…¨æŠ¤æ )          â”‚
â”‚                                                             â”‚
â”‚                    = å®‰å…¨çš„ YOLO æ¨¡å¼                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">### Hook é…ç½®
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ä½ç½®ï¼š`~/.claude/settings.json` æˆ– `.claude/settings.json`
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#### å®Œæ•´çš„å®‰å…¨ Hook é…ç½®
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">```json
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;hooks&#34;: {
</span></span><span class="line"><span class="cl">    &#34;PreToolUse&#34;: [
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;matcher&#34;: &#34;Bash&#34;,
</span></span><span class="line"><span class="cl">        &#34;hooks&#34;: [
</span></span><span class="line"><span class="cl">          {
</span></span><span class="line"><span class="cl">            &#34;type&#34;: &#34;command&#34;,
</span></span><span class="line"><span class="cl">            &#34;command&#34;: &#34;~/.claude/hooks/bash-safety.sh&#34;
</span></span><span class="line"><span class="cl">          }
</span></span><span class="line"><span class="cl">        ]
</span></span><span class="line"><span class="cl">      },
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;matcher&#34;: &#34;Write&#34;,
</span></span><span class="line"><span class="cl">        &#34;hooks&#34;: [
</span></span><span class="line"><span class="cl">          {
</span></span><span class="line"><span class="cl">            &#34;type&#34;: &#34;command&#34;,
</span></span><span class="line"><span class="cl">            &#34;command&#34;: &#34;~/.claude/hooks/write-safety.sh&#34;
</span></span><span class="line"><span class="cl">          }
</span></span><span class="line"><span class="cl">        ]
</span></span><span class="line"><span class="cl">      }
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">    &#34;PostToolUse&#34;: [
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;matcher&#34;: &#34;Write(*.py)&#34;,
</span></span><span class="line"><span class="cl">        &#34;hooks&#34;: [
</span></span><span class="line"><span class="cl">          {
</span></span><span class="line"><span class="cl">            &#34;type&#34;: &#34;command&#34;,
</span></span><span class="line"><span class="cl">            &#34;command&#34;: &#34;python -m black \&#34;$CLAUDE_FILE_PATHS\&#34;&#34;
</span></span><span class="line"><span class="cl">          }
</span></span><span class="line"><span class="cl">        ]
</span></span><span class="line"><span class="cl">      },
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;matcher&#34;: &#34;Write(*.ts)&#34;,
</span></span><span class="line"><span class="cl">        &#34;hooks&#34;: [
</span></span><span class="line"><span class="cl">          {
</span></span><span class="line"><span class="cl">            &#34;type&#34;: &#34;command&#34;,
</span></span><span class="line"><span class="cl">            &#34;command&#34;: &#34;npx prettier --write \&#34;$CLAUDE_FILE_PATHS\&#34;&#34;
</span></span><span class="line"><span class="cl">          }
</span></span><span class="line"><span class="cl">        ]
</span></span><span class="line"><span class="cl">      },
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;matcher&#34;: &#34;Write(*.tsx)&#34;,
</span></span><span class="line"><span class="cl">        &#34;hooks&#34;: [
</span></span><span class="line"><span class="cl">          {
</span></span><span class="line"><span class="cl">            &#34;type&#34;: &#34;command&#34;,
</span></span><span class="line"><span class="cl">            &#34;command&#34;: &#34;npx prettier --write \&#34;$CLAUDE_FILE_PATHS\&#34; &amp;&amp; npx tsc --noEmit \&#34;$CLAUDE_FILE_PATHS\&#34; 2&gt;&amp;1 || echo &#39;âš ï¸ TypeScript errors&#39;&#34;
</span></span><span class="line"><span class="cl">          }
</span></span><span class="line"><span class="cl">        ]
</span></span><span class="line"><span class="cl">      }
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">    &#34;Stop&#34;: [
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;matcher&#34;: &#34;*&#34;,
</span></span><span class="line"><span class="cl">        &#34;hooks&#34;: [
</span></span><span class="line"><span class="cl">          {
</span></span><span class="line"><span class="cl">            &#34;type&#34;: &#34;command&#34;,
</span></span><span class="line"><span class="cl">            &#34;command&#34;: &#34;~/.claude/hooks/session-summary.sh&#34;
</span></span><span class="line"><span class="cl">          }
</span></span><span class="line"><span class="cl">        ]
</span></span><span class="line"><span class="cl">      }
</span></span><span class="line"><span class="cl">    ]
</span></span><span class="line"><span class="cl">  }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="bash-å®‰å…¨-hook-claudehooksbash-safetysh">Bash å®‰å…¨ Hook (<code>~/.claude/hooks/bash-safety.sh</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># ä» stdin è¯»å–å·¥å…·è¾“å…¥</span>
</span></span><span class="line"><span class="cl"><span class="nv">INPUT</span><span class="o">=</span><span class="k">$(</span>cat<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">COMMAND</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$INPUT</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.tool_input.command // empty&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å®šä¹‰å±é™©æ¨¡å¼</span>
</span></span><span class="line"><span class="cl"><span class="nv">DANGEROUS_PATTERNS</span><span class="o">=(</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;rm -rf /&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;rm -rf ~&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;rm -rf \$HOME&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;rm -rf \*&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&gt; /dev/sd&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;mkfs&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;dd if=&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;:(){:|:&amp;};:&#34;</span>         <span class="c1"># Forkç‚¸å¼¹</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;chmod -R 777 /&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;chown -R&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;curl.*| bash&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;wget.*| bash&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;curl.*| sh&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;wget.*| sh&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;git push.*--force&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;git push.*-f&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;DROP TABLE&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;DROP DATABASE&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;DELETE FROM.*WHERE 1&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;npm publish&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;pip upload&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ£€æŸ¥æ¯ä¸ªæ¨¡å¼</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> pattern in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">DANGEROUS_PATTERNS</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$COMMAND</span><span class="s2">&#34;</span> <span class="p">|</span> grep -qE <span class="s2">&#34;</span><span class="nv">$pattern</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s1">&#39;{&#34;decision&#34;: &#34;block&#34;, &#34;reason&#34;: &#34;Blocked dangerous command pattern: &#39;</span><span class="s2">&#34;</span><span class="nv">$pattern</span><span class="s2">&#34;</span><span class="s1">&#39;&#34;}&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">exit</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># é˜»æ­¢é¡¹ç›®ç›®å½•ä¹‹å¤–çš„æ“ä½œï¼ˆå¯é€‰ï¼‰</span>
</span></span><span class="line"><span class="cl"><span class="nv">PROJECT_DIR</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$COMMAND</span><span class="s2">&#34;</span> <span class="p">|</span> grep -qE <span class="s2">&#34;cd\s+[^.]|cd\s+/(?!home)&#34;</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s1">&#39;{&#34;decision&#34;: &#34;ask&#34;, &#34;reason&#34;: &#34;Command navigates outside project directory&#34;}&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">exit</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å…è®¸å‘½ä»¤ç»§ç»­</span>
</span></span><span class="line"><span class="cl"><span class="nb">exit</span> <span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å†™å…¥å®‰å…¨-hook-claudehookswrite-safetysh">å†™å…¥å®‰å…¨ Hook (<code>~/.claude/hooks/write-safety.sh</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">INPUT</span><span class="o">=</span><span class="k">$(</span>cat<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">FILE_PATH</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$INPUT</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.tool_input.file_path // empty&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å—ä¿æŠ¤çš„è·¯å¾„</span>
</span></span><span class="line"><span class="cl"><span class="nv">PROTECTED_PATTERNS</span><span class="o">=(</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^/etc/&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^/usr/&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^/bin/&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^/sbin/&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^\\.env</span>$<span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^\\.env\\.&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^.*\\.pem</span>$<span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^.*\\.key</span>$<span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^.*_rsa</span>$<span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^package-lock\\.json</span>$<span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^yarn\\.lock</span>$<span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^pnpm-lock\\.yaml</span>$<span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> pattern in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">PROTECTED_PATTERNS</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$FILE_PATH</span><span class="s2">&#34;</span> <span class="p">|</span> grep -qE <span class="s2">&#34;</span><span class="nv">$pattern</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s1">&#39;{&#34;decision&#34;: &#34;ask&#34;, &#34;reason&#34;: &#34;Protected file: &#39;</span><span class="s2">&#34;</span><span class="nv">$FILE_PATH</span><span class="s2">&#34;</span><span class="s1">&#39;&#34;}&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">exit</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">exit</span> <span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ä¼šè¯æ‘˜è¦-hook-claudehookssession-summarysh">ä¼šè¯æ‘˜è¦ Hook (<code>~/.claude/hooks/session-summary.sh</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># è®°å½•ä¼šè¯ç»“æŸå’Œæ‘˜è¦</span>
</span></span><span class="line"><span class="cl"><span class="nv">TIMESTAMP</span><span class="o">=</span><span class="k">$(</span>date +%Y-%m-%d_%H:%M:%S<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">LOG_FILE</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$HOME</span><span class="s2">/.claude/session-logs/</span><span class="nv">$TIMESTAMP</span><span class="s2">.log&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">mkdir -p <span class="s2">&#34;</span><span class="nv">$HOME</span><span class="s2">/.claude/session-logs&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å¦‚æœåœ¨ repo ä¸­ï¼Œè·å– git diff</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> git rev-parse --git-dir &gt; /dev/null 2&gt;<span class="p">&amp;</span>1<span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;=== Session End: </span><span class="nv">$TIMESTAMP</span><span class="s2"> ===&#34;</span> &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;&#34;</span> &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;=== Files Changed ===&#34;</span> &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    git diff --name-only &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;&#34;</span> &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;=== Diff Summary ===&#34;</span> &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    git diff --stat &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">exit</span> <span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ä½¿-hooks-å¯æ‰§è¡Œ">ä½¿ Hooks å¯æ‰§è¡Œ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod +x ~/.claude/hooks/*.sh
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å®‰å…¨-yolo-åˆ«å">â€œå®‰å…¨ YOLOâ€ åˆ«å</h3>
<p>æ·»åŠ åˆ°ä½ çš„ shell é…ç½® (<code>~/.bashrc</code> æˆ– <code>~/.zshrc</code>)ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># å®‰å…¨ YOLO æ¨¡å¼ - è·³è¿‡æƒé™æ£€æŸ¥ä½† Hooks ä¼šä¿æŠ¤ä½ </span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> claude-yolo<span class="o">=</span><span class="s2">&#34;claude --dangerously-skip-permissions&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># é¢å¤–å®‰å…¨ - è¿˜åœ¨ Docker ä¸­è¿è¡Œ</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> claude-sandbox<span class="o">=</span><span class="s2">&#34;docker run -it -v </span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">:/workspace anthropic/claude-code --dangerously-skip-permissions&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="5-æ¨¡å¼-4context-å«ç”Ÿç®¡ç†">5. æ¨¡å¼ 4ï¼šContext å«ç”Ÿç®¡ç†</h2>
<h3 id="ç†è§£-context-è¡°å‡">ç†è§£ Context è¡°å‡</h3>
<p>Context ä¸ä»…ä»…æ˜¯å…³äºè€—å°½ tokenâ€”â€”è´¨é‡åœ¨è¾¾åˆ°é™åˆ¶ä¹‹å‰å¾ˆä¹…å°±å¼€å§‹ä¸‹é™ï¼š</p>
<table>
  <thead>
      <tr>
          <th>Context %</th>
          <th>è´¨é‡</th>
          <th>å»ºè®®</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>0-40%</td>
          <td>æä½³</td>
          <td>æ³¨æ„åŠ›é›†ä¸­ï¼Œå›å¿†èƒ½åŠ›å¼º</td>
      </tr>
      <tr>
          <td>40-60%</td>
          <td>è‰¯å¥½</td>
          <td>å¼€å§‹å¯¹æ–° Context æœ‰æ‰€é€‰æ‹©</td>
      </tr>
      <tr>
          <td>60-80%</td>
          <td>è¡°å‡</td>
          <td>â€œä¸­é—´è¿·å¤±â€æ•ˆåº”å¼€å§‹å‡ºç°</td>
      </tr>
      <tr>
          <td>80-95%</td>
          <td>å·®</td>
          <td>é¢‘ç¹çŠ¯é”™ï¼Œé—å¿˜æŒ‡ä»¤</td>
      </tr>
      <tr>
          <td>95-100%</td>
          <td>å±æ€¥</td>
          <td>è§¦å‘è‡ªåŠ¨å‹ç¼©ï¼ŒContext ä¸¢å¤±</td>
      </tr>
  </tbody>
</table>
<h3 id="ç¦ç”¨è‡ªåŠ¨å‹ç¼©-auto-compact">ç¦ç”¨è‡ªåŠ¨å‹ç¼© (Auto-Compact)</h3>
<p>è‡ªåŠ¨å‹ç¼©å¾ˆæ–¹ä¾¿ä½†ä¸é€æ˜ã€‚ä½ æ— æ³•æ§åˆ¶ä»€ä¹ˆè¢«æ€»ç»“ï¼Œå…³é”®ç»†èŠ‚å¯èƒ½ä¼šä¸¢å¤±ã€‚</p>
<p><strong>å»ºè®®</strong>ï¼šæ‰‹åŠ¨ç®¡ç†å‹ç¼©ã€‚</p>
<p>æ·»åŠ åˆ°ä½ çš„ <code>CLAUDE.md</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl"><span class="gu">## Context ç®¡ç†è§„åˆ™
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>
</span></span><span class="line"><span class="cl"><span class="k">-</span> NEVER auto-compact (ç»å¯¹ä¸è¦è‡ªåŠ¨å‹ç¼©)ã€‚æˆ‘å°†æ‰‹åŠ¨ç®¡ç† Contextã€‚
</span></span><span class="line"><span class="cl"><span class="k">-</span> å½“ Context è¶…è¿‡ 70% æ—¶ï¼Œç«‹å³è­¦å‘Šæˆ‘ã€‚
</span></span><span class="line"><span class="cl"><span class="k">-</span> å½“è¶…è¿‡ 50% æ—¶ï¼Œåœ¨ä½ çš„å›å¤ä¸­åŒ…å« &#34;Context: XX%&#34; çš„æç¤ºã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="context-çŠ¶æ€æ¨¡å¼"><code>/context</code> çŠ¶æ€æ¨¡å¼</h3>
<p>åˆ›å»º <code>~/.claude/commands/status.md</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Show current context status and recommendations
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">æä¾› Context çŠ¶æ€æŠ¥å‘Šï¼š
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Context Status (Context çŠ¶æ€)
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> **Current Usage**: [X]% of context window
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Estimated Tokens**: [X]k / 200k
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Files in Context**: [ä¸»è¦æ–‡ä»¶åˆ—è¡¨]
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Conversation Turns**: [X]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Health Assessment (å¥åº·è¯„ä¼°)
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">- [ ]</span> Under 50%: âœ… å¥åº·
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> 50-70%: âš ï¸ è€ƒè™‘å°½å¿«æ¸…ç†
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Over 70%: ğŸ”´ å»ºè®®æ¸…ç†
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Recommendations (å»ºè®®)
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>[å¦‚æœè¶…è¿‡ 50%ï¼Œå»ºè®®å¯ä»¥æ¸…ç†æˆ–å‹ç¼©ä»€ä¹ˆ]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Key Context to Preserve (éœ€ä¿ç•™çš„å…³é”® Context)
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>[åˆ—å‡ºåœ¨ /clear æ“ä½œååº”è¯¥ä¿ç•™çš„æœ€é‡è¦äº‹é¡¹]
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="åŒå‡»-esc-æ—¶é—´æ—…è¡Œæ¨¡å¼">â€œåŒå‡» Esc æ—¶é—´æ—…è¡Œâ€æ¨¡å¼</h3>
<p>è¿™æ˜¯ Claude Code ä¸­åˆ©ç”¨ç‡æœ€ä½çš„åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>æŒ‰ä¸€æ¬¡ Escape</strong>ï¼šä¸­æ–­å½“å‰ Claude æ“ä½œ</li>
<li><strong>æŒ‰ä¸¤æ¬¡ Escape</strong>ï¼šæ‰“å¼€ <strong>Rewind (å€’å¸¦)</strong> ç•Œé¢</li>
</ol>
<p>Rewind ç•Œé¢å…è®¸ä½ ï¼š</p>
<ul>
<li>æŸ¥çœ‹åŒ…å« diffï¼ˆå·®å¼‚ï¼‰çš„å®Œæ•´å¯¹è¯å†å²</li>
<li>é€‰æ‹©ä»»æ„ä¹‹å‰çš„ç‚¹è¿›è¡Œæ¢å¤</li>
<li>æ¢å¤ä»£ç å’Œå¯¹è¯çŠ¶æ€</li>
<li>æ¢ç´¢æ›¿ä»£æ–¹æ¡ˆè€Œä¸ä¸¢å¤±å·¥ä½œ</li>
</ul>
<h3 id="context-ç®¡ç†å·¥ä½œæµ">Context ç®¡ç†å·¥ä½œæµ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span></span><span class="line"><span class="cl">â”‚                                                             â”‚
</span></span><span class="line"><span class="cl">â”‚   1. Start Fresh (å…¨æ–°å¼€å§‹): /clear                         â”‚
</span></span><span class="line"><span class="cl">â”‚      â””â”€â”€ ä»¥å¹²å‡€çš„ Context å¼€å§‹                              â”‚
</span></span><span class="line"><span class="cl">â”‚                                                             â”‚
</span></span><span class="line"><span class="cl">â”‚   2. Work Phase (å·¥ä½œé˜¶æ®µ): å†™ä»£ç ï¼Œè¿­ä»£                    â”‚
</span></span><span class="line"><span class="cl">â”‚      â””â”€â”€ ç›‘æ§: &#34;æˆ‘çš„ Context ä½¿ç”¨ç‡æ˜¯å¤šå°‘ï¼Ÿ&#34;                â”‚
</span></span><span class="line"><span class="cl">â”‚                                                             â”‚
</span></span><span class="line"><span class="cl">â”‚   3. Checkpoint (æ£€æŸ¥ç‚¹ - 50%): è®°å½•çŠ¶æ€                    â”‚
</span></span><span class="line"><span class="cl">â”‚      â””â”€â”€ å°†é‡è¦å†³å®šä¿å­˜åˆ° CLAUDE.md æˆ–ç¬”è®°ä¸­                â”‚
</span></span><span class="line"><span class="cl">â”‚                                                             â”‚
</span></span><span class="line"><span class="cl">â”‚   4. Continue or Clear (ç»§ç»­æˆ–æ¸…ç† - 70%):                  â”‚
</span></span><span class="line"><span class="cl">â”‚      â”œâ”€â”€ é€‰é¡¹ A: å¸¦æ˜ç¡®æŒ‡ä»¤çš„ /compact                      â”‚
</span></span><span class="line"><span class="cl">â”‚      â””â”€â”€ é€‰é¡¹ B: /clear + ä»ç¬”è®°æ¢å¤                        â”‚
</span></span><span class="line"><span class="cl">â”‚                                                             â”‚
</span></span><span class="line"><span class="cl">â”‚   5. Emergency (ç´§æ€¥æƒ…å†µ): åŒå‡» Esc                         â”‚
</span></span><span class="line"><span class="cl">â”‚      â””â”€â”€ å€’å¸¦å›ä»»æ„ä¹‹å‰çš„çŠ¶æ€                               â”‚
</span></span><span class="line"><span class="cl">â”‚                                                             â”‚
</span></span><span class="line"><span class="cl">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ™ºèƒ½å‹ç¼©å‘½ä»¤">æ™ºèƒ½å‹ç¼©å‘½ä»¤</h3>
<p>åˆ›å»º <code>~/.claude/commands/smart-compact.md</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Compact context with explicit preservation rules
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">æ‰§è¡Œæ™ºèƒ½å‹ç¼©ï¼š
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## MUST PRESERVE (å¿…é¡»ä¿ç•™ - æ°¸ä¸æ€»ç»“æ‰):
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">1.</span> å½“å‰ä»»åŠ¡/ç›®æ ‡
</span></span><span class="line"><span class="cl"><span class="k">2.</span> è¿‡å» 10 æ¡æ¶ˆæ¯ä¸­æåˆ°çš„æ‰€æœ‰æ–‡ä»¶è·¯å¾„
</span></span><span class="line"><span class="cl"><span class="k">3.</span> æˆ‘é™ˆè¿°çš„ä»»ä½•æ˜ç¡®å†³å®šæˆ–çº¦æŸ
</span></span><span class="line"><span class="cl"><span class="k">4.</span> é”™è¯¯ä¿¡æ¯åŠå…¶è§£å†³æ–¹æ¡ˆ
</span></span><span class="line"><span class="cl"><span class="k">5.</span> å½“å‰è®¡åˆ’/æ¸…å•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## CAN SUMMARIZE (å¯ä»¥æ€»ç»“):
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">1.</span> å¯¼è‡´æ­»èƒ¡åŒçš„æ¢ç´¢
</span></span><span class="line"><span class="cl"><span class="k">2.</span> å‘½ä»¤çš„å†—é•¿è¾“å‡ºï¼ˆåªä¿ç•™ç»“è®ºï¼‰
</span></span><span class="line"><span class="cl"><span class="k">3.</span> æœªè¢«ä¿®æ”¹çš„æ–‡ä»¶å†…å®¹
</span></span><span class="line"><span class="cl"><span class="k">4.</span> å¯¼è‡´å†³ç­–çš„ä¸€èˆ¬æ€§è®¨è®ºï¼ˆåªä¿ç•™å†³ç­–ï¼‰
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## FORMAT (æ ¼å¼):
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>å‹ç¼©åï¼Œåœ¨ä½ çš„ä¸‹ä¸€æ¡æ¶ˆæ¯å¼€å¤´åŠ ä¸Šï¼š
</span></span></code></pre></td></tr></table>
</div>
</div><p>ğŸ“¦ Context compacted. Preserved:</p>
<ul>
<li>[å…³é”®é¡¹ 1]</li>
<li>[å…³é”®é¡¹ 2]</li>
<li>[å½“å‰ç›®æ ‡]</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ç°åœ¨å¸¦ç€è¿™äº›è§„åˆ™æ‰§è¡Œ /compactã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="6-æ¨¡å¼-5å­-agentæ™ºèƒ½ä½“æ§åˆ¶">6. æ¨¡å¼ 5ï¼šå­ Agentï¼ˆæ™ºèƒ½ä½“ï¼‰æ§åˆ¶</h2>
<h3 id="é»˜è®¤é—®é¢˜">é»˜è®¤é—®é¢˜</h3>
<p>Claude Code ä¼šä¸ºå„ç§ä»»åŠ¡ç”Ÿæˆå­ Agentï¼Œä½†é»˜è®¤æƒ…å†µä¸‹å¯èƒ½ä¼šä½¿ç”¨æ›´ä¾¿å®œ/æ›´å¿«çš„æ¨¡å‹ï¼ˆSonnet, Haikuï¼‰ï¼Œå³ä½¿ä½ ä¸ºäº† Opus ä»˜äº†è´¹ã€‚è¿™å¯¼è‡´ï¼š</p>
<ul>
<li>â€œç ”ç©¶â€ä»»åŠ¡çš„åˆ†æè´¨é‡è¾ƒä½</li>
<li>ä¸» Agent å’Œå­ Agent ä¹‹é—´çš„ä»£ç è´¨é‡ä¸ä¸€è‡´</li>
<li>å½“å­ Agent è¿”å›ç³Ÿç³•ç»“æœæ—¶æµªè´¹ Context</li>
</ul>
<h3 id="å¼ºåˆ¶ä½¿ç”¨-opus-å­-agent">å¼ºåˆ¶ä½¿ç”¨ Opus å­ Agent</h3>
<p>æ·»åŠ åˆ°ä½ çš„å…¨å±€ <code>~/.claude/CLAUDE.md</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl"><span class="gu">## Subagent Rules (å­ Agent è§„åˆ™)
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>
</span></span><span class="line"><span class="cl"><span class="k">-</span> **ALWAYS use Opus for subagents (å­ Agent æ°¸è¿œä½¿ç”¨ Opus)** é™¤éæˆ‘æ˜ç¡®è¦æ±‚ä¸è¿™æ ·åš
</span></span><span class="line"><span class="cl"><span class="k">-</span> å­ Agent åº”è¢«ç”¨äºï¼š
</span></span><span class="line"><span class="cl">  <span class="k">-</span> ç ”ç©¶å’Œè°ƒæŸ¥ä»»åŠ¡
</span></span><span class="line"><span class="cl">  <span class="k">-</span> å¤šä¸ªæ–‡ä»¶çš„å¹¶è¡Œåˆ†æ
</span></span><span class="line"><span class="cl">  <span class="k">-</span> å˜æ›´çš„ä»£ç å®¡æŸ¥
</span></span><span class="line"><span class="cl">  <span class="k">-</span> æµ‹è¯•ç”Ÿæˆ
</span></span><span class="line"><span class="cl">  <span class="k">-</span> æ–‡æ¡£ç¼–å†™
</span></span><span class="line"><span class="cl"><span class="k">-</span> åœ¨ç”Ÿæˆå­ Agent ä¹‹å‰ï¼Œå‘Šè¯‰æˆ‘å®ƒå°†åšä»€ä¹ˆ
</span></span><span class="line"><span class="cl"><span class="k">-</span> å­ Agent å®Œæˆåï¼Œç®€æ´åœ°æ€»ç»“å…¶å‘ç°
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è‡ªå®šä¹‰å­-agent-é›†åˆ">è‡ªå®šä¹‰å­ Agent é›†åˆ</h3>
<p>åœ¨ <code>~/.claude/agents/</code> ä¸­åˆ›å»ºä¸“ç”¨å­ Agentï¼š</p>
<h4 id="ä»£ç å®¡æŸ¥å‘˜-claudeagentscode-reviewermd">ä»£ç å®¡æŸ¥å‘˜ (<code>~/.claude/agents/code-reviewer.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">name: code-reviewer
</span></span><span class="line"><span class="cl">description: Expert code review focusing on bugs, security, and maintainability
</span></span><span class="line"><span class="cl">tools: Read, Grep, Glob
</span></span><span class="line"><span class="cl">model: opus
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ä½ æ˜¯ä¸€ä½èµ„æ·±ä»£ç å®¡æŸ¥å‘˜ï¼Œä¸“é•¿äºï¼š
</span></span><span class="line"><span class="cl"><span class="k">-</span> å®‰å…¨æ¼æ´
</span></span><span class="line"><span class="cl"><span class="k">-</span> æ€§èƒ½é—®é¢˜
</span></span><span class="line"><span class="cl"><span class="k">-</span> ä»£ç å¯ç»´æŠ¤æ€§
</span></span><span class="line"><span class="cl"><span class="k">-</span> æµ‹è¯•ç¼ºå£
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">åœ¨å®¡æŸ¥ä»£ç æ—¶ï¼š
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">1.</span> <span class="gs">**ç¬¬ä¸€é - å…³é”®é—®é¢˜**</span>
</span></span><span class="line"><span class="cl">   <span class="k">-</span> å®‰å…¨æ¼æ´ï¼ˆæ³¨å…¥ã€è®¤è¯ã€æ•°æ®æš´éœ²ï¼‰
</span></span><span class="line"><span class="cl">   <span class="k">-</span> å¯èƒ½å¯¼è‡´ Bug çš„é€»è¾‘é”™è¯¯
</span></span><span class="line"><span class="cl">   <span class="k">-</span> ç«æ€æ¡ä»¶æˆ–å¹¶å‘é—®é¢˜
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">2.</span> <span class="gs">**ç¬¬äºŒé - è´¨é‡é—®é¢˜**</span>
</span></span><span class="line"><span class="cl">   <span class="k">-</span> ä»£ç é‡å¤
</span></span><span class="line"><span class="cl">   <span class="k">-</span> éœ€è¦é‡æ„çš„å¤æ‚å‡½æ•°
</span></span><span class="line"><span class="cl">   <span class="k">-</span> ç¼ºå°‘é”™è¯¯å¤„ç†
</span></span><span class="line"><span class="cl">   <span class="k">-</span> å‘½åä¸æ¸…
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">3.</span> <span class="gs">**ç¬¬ä¸‰é - å»ºè®®**</span>
</span></span><span class="line"><span class="cl">   <span class="k">-</span> æ€§èƒ½æ”¹è¿›
</span></span><span class="line"><span class="cl">   <span class="k">-</span> æ›´å¥½çš„æ¨¡å¼/æŠ½è±¡
</span></span><span class="line"><span class="cl">   <span class="k">-</span> æ–‡æ¡£éœ€æ±‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">è¾“å‡ºæ ¼å¼ï¼š
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="critical-">Critical ğŸ”´</h2>
<ul>
<li>[file:line] é—®é¢˜æè¿°</li>
</ul>
<h2 id="important-">Important ğŸŸ¡</h2>
<ul>
<li>[file:line] é—®é¢˜æè¿°</li>
</ul>
<h2 id="suggestions-">Suggestions ğŸŸ¢</h2>
<ul>
<li>[file:line] å»ºè®®</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">å…·ä½“ä¸€ç‚¹ã€‚åŒ…å«è¡Œå·ã€‚æå‡ºä¿®å¤å»ºè®®ã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æµ‹è¯•ç¼–å†™è€…-claudeagentstest-writermd">æµ‹è¯•ç¼–å†™è€… (<code>~/.claude/agents/test-writer.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">name: test-writer
</span></span><span class="line"><span class="cl">description: Writes comprehensive tests with edge case coverage
</span></span><span class="line"><span class="cl">tools: Read, Write, Bash
</span></span><span class="line"><span class="cl">model: opus
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ä½ æ˜¯ä¸€ä½æµ‹è¯•ä¸“å®¶ã€‚åœ¨ç¼–å†™æµ‹è¯•æ—¶ï¼š
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## åŸåˆ™
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">1.</span> <span class="gs">**æµ‹è¯•è¡Œä¸ºï¼Œè€Œéå®ç°**</span>
</span></span><span class="line"><span class="cl"><span class="k">2.</span> <span class="gs">**æ¯ä¸ªæµ‹è¯•ä¸€ä¸ªæ–­è¨€**</span>ï¼ˆåœ¨å¯è¡Œæ—¶ï¼‰
</span></span><span class="line"><span class="cl"><span class="k">3.</span> <span class="gs">**æè¿°æ€§çš„æµ‹è¯•åç§°**</span>: &#34;should_return_empty_array_when_input_is_null&#34;
</span></span><span class="line"><span class="cl"><span class="k">4.</span> <span class="gs">**Arrange-Act-Assert**</span> ç»“æ„
</span></span><span class="line"><span class="cl"><span class="k">5.</span> <span class="gs">**ç³»ç»Ÿæ€§åœ°è¦†ç›–è¾¹ç¼˜æƒ…å†µ**</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## è¾¹ç¼˜æƒ…å†µæ¸…å•
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">- [ ]</span> Null/undefined è¾“å…¥
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> ç©ºå­—ç¬¦ä¸²/æ•°ç»„/å¯¹è±¡
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> è¾¹ç•Œå€¼ (0, -1, MAX_INT)
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> æ— æ•ˆç±»å‹
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Unicode/ç‰¹æ®Šå­—ç¬¦
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> å¹¶å‘è®¿é—®ï¼ˆå¦‚æœé€‚ç”¨ï¼‰
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> é”™è¯¯æ¡ä»¶
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## æµ‹è¯•ç»“æ„
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>describe(â€™[Unit Under Test]â€™, () =&gt; {
describe(â€™[Method/Function]â€™, () =&gt; {
describe(â€˜when [condition]â€™, () =&gt; {
it(â€˜should [expected behavior]â€™, () =&gt; {
// Arrange
// Act<br>
// Assert
});
});
});
});</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">åŒ¹é…ä»£ç åº“ä¸­ç°æœ‰çš„æµ‹è¯•æ¨¡å¼ã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æ¶æ„åˆ†æå¸ˆ-claudeagentsarchitectmd">æ¶æ„åˆ†æå¸ˆ (<code>~/.claude/agents/architect.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">name: architect
</span></span><span class="line"><span class="cl">description: Analyzes codebase architecture and suggests improvements
</span></span><span class="line"><span class="cl">tools: Read, Grep, Glob
</span></span><span class="line"><span class="cl">model: opus
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ä½ æ˜¯ä¸€ä½è½¯ä»¶æ¶æ„å¸ˆã€‚åœ¨åˆ†æä»£ç æ—¶ï¼š
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## åˆ†ææ¡†æ¶
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>
</span></span><span class="line"><span class="cl"><span class="gu">### 1. ä¾èµ–åˆ†æ
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> æ˜ å°„æ¨¡å—ä¾èµ–
</span></span><span class="line"><span class="cl"><span class="k">-</span> è¯†åˆ«å¾ªç¯ä¾èµ–
</span></span><span class="line"><span class="cl"><span class="k">-</span> æ‰¾å‡ºé«˜è€¦åˆç»„ä»¶
</span></span><span class="line"><span class="cl"><span class="k">-</span> å®šä½ä¸Šå¸å¯¹è±¡ (god objects)/æ¨¡å—
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">### 2. æ¨¡å¼è¯†åˆ«
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> ä½¿ç”¨äº†ä»€ä¹ˆæ¶æ„æ¨¡å¼ï¼Ÿ
</span></span><span class="line"><span class="cl"><span class="k">-</span> å®ƒä»¬çš„åº”ç”¨æ˜¯å¦ä¸€è‡´ï¼Ÿ
</span></span><span class="line"><span class="cl"><span class="k">-</span> ç¼ºå°‘ä»€ä¹ˆæ¨¡å¼ä¼šæœ‰å¸®åŠ©ï¼Ÿ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">### 3. å¯æ‰©å±•æ€§è¯„ä¼°
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> ç“¶é¢ˆè¯†åˆ«
</span></span><span class="line"><span class="cl"><span class="k">-</span> æ°´å¹³æ‰©å±•å‡†å¤‡åº¦
</span></span><span class="line"><span class="cl"><span class="k">-</span> æ•°æ®åº“/å­˜å‚¨æ¨¡å¼
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">### 4. å¯ç»´æŠ¤æ€§è¯„åˆ†
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>1-10 åˆ†å¹¶ç»™å‡ºç†ç”±ï¼š
</span></span><span class="line"><span class="cl"><span class="k">-</span> ä»£ç ç»„ç»‡
</span></span><span class="line"><span class="cl"><span class="k">-</span> å…³æ³¨ç‚¹åˆ†ç¦»
</span></span><span class="line"><span class="cl"><span class="k">-</span> æµ‹è¯•è¦†ç›–ç‡
</span></span><span class="line"><span class="cl"><span class="k">-</span> æ–‡æ¡£
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## è¾“å‡ºæ ¼å¼
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>```markdown
</span></span><span class="line"><span class="cl"><span class="gh"># Architecture Analysis: [Component/System]
</span></span></span><span class="line"><span class="cl"><span class="gh"></span>
</span></span><span class="line"><span class="cl"><span class="gu">## Current State (å½“å‰çŠ¶æ€)
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>[å›¾è¡¨æˆ–æè¿°]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Strengths (ä¼˜åŠ¿)
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>- 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Concerns (æ‹…å¿§)
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>-
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Recommendations (å»ºè®®)
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">1.</span> [ä¼˜å…ˆçº§] æè¿°
</span></span><span class="line"><span class="cl"><span class="k">2.</span> [ä¼˜å…ˆçº§] æè¿°
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Suggested Refactoring Roadmap (å»ºè®®é‡æ„è·¯çº¿å›¾)
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>Phase 1: [é€Ÿèµ¢é¡¹]
</span></span><span class="line"><span class="cl">Phase 2: [ä¸­ç­‰å·¥ä½œé‡]
</span></span><span class="line"><span class="cl">Phase 3: [é‡å¤§é‡æ„]
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">### ç¼–æ’å™¨æ¨¡å¼ (Orchestrator Pattern)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">å¯¹äºå¤æ‚ä»»åŠ¡ï¼Œä½¿ç”¨ä¸€ä¸ªä¸» Agent + ä¸“ç”¨å­ Agentï¼š
</span></span></code></pre></td></tr></table>
</div>
</div><p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Main Agent (Opus)                       â”‚
â”‚                     - ä»»åŠ¡è§„åˆ’                              â”‚
â”‚                     - å†³ç­–åˆ¶å®š                              â”‚
â”‚                     - ç»“æœç»¼åˆ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   â”‚                   â”‚
â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ code-reviewerâ”‚     â”‚ test-writer â”‚     â”‚  architect  â”‚
â”‚   (Opus)    â”‚     â”‚   (Opus)    â”‚     â”‚   (Opus)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">### å­ Agent ç›‘æ§ä»ªè¡¨ç›˜
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">å‚è§ [ç¬¬ 8 èŠ‚](#8-å­-agent-ç›‘æ§ä»ªè¡¨ç›˜) æŸ¥çœ‹å®Œæ•´å®ç°ã€‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">## 7. æ¨¡å¼ 6ï¼šé‡æç¤ºï¼ˆReprompterï¼‰ç³»ç»Ÿ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">### æ‰‹æ‰“ Prompt çš„é—®é¢˜
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">- é«˜è´¨é‡ Prompt éœ€è¦æ—¶é—´è¾“å…¥
</span></span><span class="line"><span class="cl">- æ‰“å­—ä¼šæ‰“æ–­å¿ƒæµçŠ¶æ€
</span></span><span class="line"><span class="cl">- å®¹æ˜“å¿˜è®°é‡è¦çš„çº¦æŸæ¡ä»¶
</span></span><span class="line"><span class="cl">- Prompt è´¨é‡ä¸ä¸€è‡´
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">### è§£å†³æ–¹æ¡ˆï¼šè¯­éŸ³ â†’ ç»“æ„åŒ–ç®¡é“
</span></span></code></pre></td></tr></table>
</div>
</div><p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Voice     â”‚â”€â”€â”€â”€â–¶â”‚  Clarifying  â”‚â”€â”€â”€â”€â–¶â”‚  Structured  â”‚
â”‚  Dictation   â”‚     â”‚  Questions   â”‚     â”‚    Prompt    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                     â”‚                     â”‚
â”‚                     â”‚                     â”‚
Raw idea            Refinement            XML-tagged
(æ‚ä¹±çš„æƒ³æ³•)          (å¯¹è¯æ¾„æ¸…)            (æœ€ä½³åŒ–ç»“æ„)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">### å®ç°</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#### 1. è¯­éŸ³è¾“å…¥è®¾ç½®</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">ä½¿ç”¨ä½ çš„æ“ä½œç³»ç»Ÿå¬å†™åŠŸèƒ½æˆ–ç±»ä¼¼å·¥å…·ï¼š</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">macOS</span><span class="p">:</span> <span class="err">å†…ç½®å¬å†™</span> <span class="p">(</span><span class="n">Fn</span> <span class="n">Fn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Windows</span><span class="p">:</span> <span class="n">Windows</span> <span class="err">è¯­éŸ³è¯†åˆ«</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">è·¨å¹³å°</span><span class="p">:</span> <span class="n">Whisper</span> <span class="n">API</span><span class="p">,</span> <span class="n">Talon</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#### 2. Reprompter å‘½ä»¤ (`~/.claude/commands/reprompt.md`)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">```</span><span class="n">markdown</span>
</span></span><span class="line"><span class="cl"><span class="o">---</span>
</span></span><span class="line"><span class="cl"><span class="n">description</span><span class="p">:</span> <span class="n">Convert</span> <span class="n">rough</span> <span class="n">voice</span> <span class="n">input</span> <span class="n">into</span> <span class="n">a</span> <span class="n">structured</span> <span class="n">prompt</span>
</span></span><span class="line"><span class="cl"><span class="n">argument</span><span class="o">-</span><span class="n">hint</span><span class="p">:</span> <span class="p">[</span><span class="n">rough</span><span class="o">-</span><span class="n">idea</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">---</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">æˆ‘ä¼šç»™ä½ ä¸€ä¸ªç²—ç³™çš„ã€è¯­éŸ³å£è¿°çš„æƒ³æ³•ã€‚ä½ çš„å·¥ä½œæ˜¯ï¼š</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Step 1: Understand (ç†è§£)</span>
</span></span><span class="line"><span class="cl"><span class="err">é—®æˆ‘æ¾„æ¸…æ€§é—®é¢˜ä»¥äº†è§£ï¼š</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">å…·ä½“ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">çº¦æŸæ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">æˆåŠŸæ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿ</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">æˆ‘éœ€è¦æä¾›ä»€ä¹ˆ</span> <span class="n">Context</span><span class="err">ï¼Ÿ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">ä¸€æ¬¡é—®ä¸€ä¸ªé—®é¢˜ã€‚ç­‰å¾…æˆ‘çš„å›ç­”ã€‚</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Step 2: Structure (ç»“æ„åŒ–)</span>
</span></span><span class="line"><span class="cl"><span class="err">ä¸€æ—¦ä½ ç†è§£äº†ï¼Œä½¿ç”¨è¿™ç§æ ¼å¼åˆ›å»ºä¸€ä¸ªç»“æ„åŒ–çš„</span> <span class="n">Prompt</span><span class="err">ï¼š</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">```</span><span class="n">xml</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">task</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">goal</span><span class="o">&gt;</span><span class="p">[</span><span class="err">æ¸…æ™°ã€å…·ä½“çš„ç›®æ ‡</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">goal</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">context</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">files</span><span class="o">&gt;</span><span class="p">[</span><span class="err">éœ€é˜…è¯»çš„ç›¸å…³æ–‡ä»¶</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">files</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">background</span><span class="o">&gt;</span><span class="p">[</span><span class="err">å…³é”®èƒŒæ™¯</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">background</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;/</span><span class="n">context</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">constraints</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">must</span><span class="o">&gt;</span><span class="p">[</span><span class="err">å¿…é¡»åŒ…å«çš„è¦ç´ </span><span class="p">]</span><span class="o">&lt;/</span><span class="n">must</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">must_not</span><span class="o">&gt;</span><span class="p">[</span><span class="err">ç¦æ­¢çš„è¦ç´ </span><span class="p">]</span><span class="o">&lt;/</span><span class="n">must_not</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;/</span><span class="n">constraints</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">output</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">format</span><span class="o">&gt;</span><span class="p">[</span><span class="err">é¢„æœŸçš„è¾“å‡ºæ ¼å¼</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">format</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">success_criteria</span><span class="o">&gt;</span><span class="p">[</span><span class="err">å¦‚ä½•éªŒè¯æˆåŠŸ</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">success_criteria</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;/</span><span class="n">output</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">task</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="step-3-confirm-ç¡®è®¤">Step 3: Confirm (ç¡®è®¤)</h2>
<p>å‘æˆ‘å±•ç¤ºç»“æ„åŒ–çš„ Promptï¼Œå¹¶è¯¢é—®å®ƒæ˜¯å¦æ­£ç¡®æ•æ‰äº†æˆ‘çš„æ„å›¾ã€‚</p>
<hr>
<p>æˆ‘çš„ç²—ç³™æƒ³æ³•ï¼š$ARGUMENTS</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#### 3. ç®€å•ä»»åŠ¡çš„å¿«é€Ÿé‡æç¤º
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">åˆ›å»º `~/.claude/commands/qr.md` (quick reprompt)ï¼š
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">```markdown
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Quick reprompt - one clarifying question, then execute
</span></span><span class="line"><span class="cl">argument-hint: [task]
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ä»»åŠ¡ï¼š$ARGUMENTS
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">åœ¨æ‰§è¡Œä¹‹å‰ï¼Œé—®æˆ‘**ä¸€ä¸ª**æ¾„æ¸…æ€§é—®é¢˜ï¼Œä»¥ç¡®ä¿ä½ ç†è§£è¿™é¡¹ä»»åŠ¡æœ€å…³é”®çš„æ–¹é¢ã€‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">åœ¨æˆ‘å›ç­”åï¼Œç»§ç»­æ‰§è¡Œã€‚
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¤ºä¾‹ä¼šè¯">ç¤ºä¾‹ä¼šè¯</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="err">ä½ </span><span class="p">:</span> <span class="o">/</span><span class="n">reprompt</span> <span class="err">æˆ‘éœ€è¦é‡æ„é‚£ä¸ª</span> <span class="n">auth</span> <span class="err">çš„ä¸œè¥¿æ¥ä½¿ç”¨æˆ‘ä»¬è®¨è®ºçš„æ–°æ¨¡å¼ï¼Œä½ çŸ¥é“å°±æ˜¯é‚£ä¸ªå¸¦ä¸­é—´ä»¶çš„</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Claude</span><span class="p">:</span> <span class="err">æˆ‘æƒ³ç¡®ä¿æˆ‘ç†è§£æ­£ç¡®ã€‚å½“ä½ è¯´â€œå¸¦ä¸­é—´ä»¶çš„æ–°æ¨¡å¼â€æ—¶ï¼Œä½ æŒ‡çš„æ˜¯ï¼š</span>
</span></span><span class="line"><span class="cl"><span class="mf">1.</span> <span class="err">æˆ‘ä»¬åœ¨æœ¬æ­¤ä¼šè¯æ—©äº›æ—¶å€™è®¨è®ºçš„å…·ä½“ä¸­é—´ä»¶æ¨¡å¼ï¼Ÿ</span>
</span></span><span class="line"><span class="cl"><span class="mf">2.</span> <span class="err">ä½ ä»¬ä»£ç åº“ä¸­æŸå¤„è®°å½•çš„æ¨¡å¼ï¼Ÿ</span>
</span></span><span class="line"><span class="cl"><span class="mf">3.</span> <span class="err">ä¸€ä¸ªé€šç”¨çš„ä¸­é—´ä»¶è®¤è¯æ¨¡å¼ï¼ˆæ¯”å¦‚</span> <span class="n">JWT</span> <span class="err">éªŒè¯ä¸­é—´ä»¶ï¼‰ï¼Ÿ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">ä½ </span><span class="p">:</span> <span class="err">ç¬¬</span> <span class="mi">2</span> <span class="err">ä¸ªï¼Œåœ¨</span> <span class="n">docs</span><span class="o">/</span><span class="n">auth</span><span class="o">-</span><span class="n">v2</span><span class="o">.</span><span class="n">md</span> <span class="err">é‡Œ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Claude</span><span class="p">:</span> <span class="err">æ˜ç™½äº†ã€‚å†é—®ä¸€ä¸ªé—®é¢˜ï¼šè¿™æ¬¡é‡æ„åº”è¯¥ï¼š</span>
</span></span><span class="line"><span class="cl"><span class="n">A</span><span class="p">)</span> <span class="err">å®Œå…¨æ›¿æ¢ç°æœ‰çš„</span> <span class="n">auth</span> <span class="err">ç³»ç»Ÿ</span>
</span></span><span class="line"><span class="cl"><span class="n">B</span><span class="p">)</span> <span class="err">æš‚æ—¶ä¸å…¶å¹¶è¡Œè¿è¡Œï¼ˆè¿ç§»è·¯å¾„ï¼‰</span>
</span></span><span class="line"><span class="cl"><span class="n">C</span><span class="p">)</span> <span class="err">ä»…æ›´æ–°ç‰¹å®šç»„ä»¶ï¼Ÿ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">ä½ </span><span class="p">:</span> <span class="n">A</span><span class="err">ï¼Œå®Œå…¨æ›¿æ¢</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Claude</span><span class="p">:</span> <span class="err">è¿™æ˜¯ä½ çš„ç»“æ„åŒ–</span> <span class="n">Prompt</span><span class="err">ï¼š</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">task</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">goal</span><span class="o">&gt;</span><span class="err">é‡æ„è®¤è¯ç³»ç»Ÿä»¥ä½¿ç”¨</span> <span class="n">docs</span><span class="o">/</span><span class="n">auth</span><span class="o">-</span><span class="n">v2</span><span class="o">.</span><span class="n">md</span> <span class="err">ä¸­å®šä¹‰çš„æ¨¡å¼</span><span class="o">&lt;/</span><span class="n">goal</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">context</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">files</span><span class="o">&gt;</span><span class="n">docs</span><span class="o">/</span><span class="n">auth</span><span class="o">-</span><span class="n">v2</span><span class="o">.</span><span class="n">md</span><span class="p">,</span> <span class="n">src</span><span class="o">/</span><span class="n">auth</span><span class="o">/**</span><span class="p">,</span> <span class="n">src</span><span class="o">/</span><span class="n">middleware</span><span class="o">/**&lt;/</span><span class="n">files</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">background</span><span class="o">&gt;</span><span class="err">ç°æœ‰</span> <span class="n">auth</span> <span class="err">çš„å®Œå…¨æ›¿æ¢</span> <span class="o">-</span> <span class="err">æ— å¹¶è¡Œè¿è¡Œ</span><span class="o">&lt;/</span><span class="n">background</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;/</span><span class="n">context</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">constraints</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">must</span><span class="o">&gt;</span><span class="err">ä¸¥æ ¼éµå¾ª</span> <span class="n">auth</span><span class="o">-</span><span class="n">v2</span><span class="o">.</span><span class="n">md</span> <span class="err">ä¸­è®°å½•çš„æ¨¡å¼</span><span class="o">&lt;/</span><span class="n">must</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">must</span><span class="o">&gt;</span><span class="err">ç»´æŠ¤æ‰€æœ‰ç°æœ‰çš„å—</span> <span class="n">auth</span> <span class="err">ä¿æŠ¤çš„è·¯ç”±</span><span class="o">&lt;/</span><span class="n">must</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">must</span><span class="o">&gt;</span><span class="err">åŒ…å«ç°æœ‰ç”¨æˆ·ä¼šè¯çš„è¿ç§»</span><span class="o">&lt;/</span><span class="n">must</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">must_not</span><span class="o">&gt;</span><span class="err">ä¿ç•™ä»»ä½•å·²å¼ƒç”¨çš„</span> <span class="n">auth</span> <span class="err">ä»£ç å¤„äºæ´»åŠ¨çŠ¶æ€</span><span class="o">&lt;/</span><span class="n">must_not</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;/</span><span class="n">constraints</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">output</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">format</span><span class="o">&gt;</span><span class="err">åŒ…å«æ–°</span> <span class="n">auth</span> <span class="err">å®ç°çš„ä¿®æ”¹åçš„æ–‡ä»¶</span><span class="o">&lt;/</span><span class="n">format</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">success_criteria</span><span class="o">&gt;</span><span class="err">æ‰€æœ‰ç°æœ‰æµ‹è¯•é€šè¿‡ï¼Œæ·»åŠ äº†æ–°</span> <span class="n">auth</span> <span class="err">æµ‹è¯•ï¼Œåœ¨</span> <span class="n">CHANGELOG</span> <span class="err">ä¸­è®°å½•</span><span class="o">&lt;/</span><span class="n">success_criteria</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;/</span><span class="n">output</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">task</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">è¿™æ˜¯å¦æ•æ‰äº†ä½ çš„æ„å›¾ï¼Ÿå‡†å¤‡å¥½ç»§ç»­äº†å—ï¼Ÿ</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="8-å­-agent-ç›‘æ§ä»ªè¡¨ç›˜">8. å­ Agent ç›‘æ§ä»ªè¡¨ç›˜</h2>
<p>ä¸€ä¸ªåŸºäº React çš„ç®€å•ä»ªè¡¨ç›˜ï¼Œç”¨äºç›‘æ§å­ Agent æ´»åŠ¨ã€‚</p>
<h3 id="å®‰è£…">å®‰è£…</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># åˆ›å»ºç›‘æ§ç›®å½•</span>
</span></span><span class="line"><span class="cl">mkdir -p ~/.claude/monitoring
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ~/.claude/monitoring
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åˆ›å»º package.json</span>
</span></span><span class="line"><span class="cl">npm init -y
</span></span><span class="line"><span class="cl">npm install react react-dom next tailwindcss
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ä»ªè¡¨ç›˜ä»£ç -claudemonitoringpagesindextsx">ä»ªè¡¨ç›˜ä»£ç  (<code>~/.claude/monitoring/pages/index.tsx</code>)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">SubagentLog</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">timestamp</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">agentName</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">task</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">model</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">tokensUsed</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">duration</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">status</span><span class="o">:</span> <span class="s1">&#39;running&#39;</span> <span class="o">|</span> <span class="s1">&#39;completed&#39;</span> <span class="o">|</span> <span class="s1">&#39;failed&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">result?</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">SessionStats</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">totalTokens</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">totalDuration</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">agentBreakdown</span>: <span class="kt">Record</span><span class="p">&lt;</span><span class="nt">string</span><span class="p">,</span> <span class="na">number</span><span class="p">&gt;;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">Dashboard() {</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">logs</span><span class="p">,</span> <span class="nx">setLogs</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">SubagentLog</span><span class="err">[]</span><span class="p">&gt;([]);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">stats</span><span class="p">,</span> <span class="nx">setStats</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">SessionStats</span> <span class="err">|</span> <span class="na">null</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æ¯ 2 ç§’è½®è¯¢ä¸€æ¬¡æ›´æ–°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">fetchLogs</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span> <span class="mi">2000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">fetchLogs</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">fetchLogs</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/logs&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setLogs</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">logs</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setStats</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">stats</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Failed to fetch logs:&#39;</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">getStatusColor</span> <span class="o">=</span> <span class="p">(</span><span class="nx">status</span>: <span class="kt">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">switch</span> <span class="p">(</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="s1">&#39;running&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="s1">&#39;bg-yellow-500&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="s1">&#39;completed&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="s1">&#39;bg-green-500&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="s1">&#39;failed&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="s1">&#39;bg-red-500&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">default</span><span class="o">:</span> <span class="k">return</span> <span class="s1">&#39;bg-gray-500&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;min-h-screen bg-gray-900 text-white p-8&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-3xl font-bold mb-8&#34;</span><span class="p">&gt;</span><span class="err">ğŸ¤–</span> <span class="nx">Subagent</span> <span class="nx">Monitor</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="cm">/* ç»Ÿè®¡é¢æ¿ */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">stats</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;grid grid-cols-3 gap-4 mb-8&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;bg-gray-800 p-4 rounded-lg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-gray-400 text-sm&#34;</span><span class="p">&gt;</span><span class="nx">Total</span> <span class="nx">Tokens</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-2xl font-bold&#34;</span><span class="p">&gt;{</span><span class="nx">stats</span><span class="p">.</span><span class="nx">totalTokens</span><span class="p">.</span><span class="nx">toLocaleString</span><span class="p">()}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;bg-gray-800 p-4 rounded-lg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-gray-400 text-sm&#34;</span><span class="p">&gt;</span><span class="nx">Total</span> <span class="nx">Duration</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-2xl font-bold&#34;</span><span class="p">&gt;{(</span><span class="nx">stats</span><span class="p">.</span><span class="nx">totalDuration</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)}</span><span class="nx">s</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;bg-gray-800 p-4 rounded-lg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-gray-400 text-sm&#34;</span><span class="p">&gt;</span><span class="nx">Active</span> <span class="nx">Agents</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-2xl font-bold&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">{</span><span class="nx">logs</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">l</span> <span class="o">=&gt;</span> <span class="nx">l</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="s1">&#39;running&#39;</span><span class="p">).</span><span class="nx">length</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">)}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="cm">/* Agent ç»†åˆ† */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">stats</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;bg-gray-800 p-4 rounded-lg mb-8&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-lg font-semibold mb-4&#34;</span><span class="p">&gt;</span><span class="nx">Token</span> <span class="nx">Usage</span> <span class="nx">by</span> <span class="nx">Agent</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;space-y-2&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span><span class="nb">Object</span><span class="p">.</span><span class="nx">entries</span><span class="p">(</span><span class="nx">stats</span><span class="p">.</span><span class="nx">agentBreakdown</span><span class="p">).</span><span class="nx">map</span><span class="p">(([</span><span class="nx">agent</span><span class="p">,</span> <span class="nx">tokens</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">agent</span><span class="p">}</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex items-center&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;w-32 text-sm&#34;</span><span class="p">&gt;{</span><span class="nx">agent</span><span class="p">}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex-1 bg-gray-700 rounded h-4&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">div</span> 
</span></span><span class="line"><span class="cl">                    <span class="na">className</span><span class="o">=</span><span class="s">&#34;bg-blue-500 h-4 rounded&#34;</span>
</span></span><span class="line"><span class="cl">                    <span class="na">style</span><span class="o">=</span><span class="p">{{</span> <span class="nx">width</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="p">(</span><span class="nx">tokens</span> <span class="o">/</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">totalTokens</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="si">}</span><span class="sb">%`</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl">                  <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;w-24 text-right text-sm&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">{</span><span class="nx">tokens</span><span class="p">.</span><span class="nx">toLocaleString</span><span class="p">()}</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">))}</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">)}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="cm">/* æ´»åŠ¨æ—¥å¿— */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;bg-gray-800 rounded-lg overflow-hidden&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-lg font-semibold p-4 border-b border-gray-700&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nx">Activity</span> <span class="nx">Log</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;divide-y divide-gray-700 max-h-96 overflow-y-auto&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span><span class="nx">logs</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">log</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">i</span><span class="p">}</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;p-4 hover:bg-gray-750&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex items-center justify-between mb-2&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex items-center space-x-3&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="sb">`w-2 h-2 rounded-full </span><span class="si">${</span><span class="nx">getStatusColor</span><span class="p">(</span><span class="nx">log</span><span class="p">.</span><span class="nx">status</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;font-medium&#34;</span><span class="p">&gt;{</span><span class="nx">log</span><span class="p">.</span><span class="nx">agentName</span><span class="p">}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-gray-400 text-sm&#34;</span><span class="p">&gt;({</span><span class="nx">log</span><span class="p">.</span><span class="nx">model</span><span class="p">})&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-gray-400 text-sm&#34;</span><span class="p">&gt;{</span><span class="nx">log</span><span class="p">.</span><span class="nx">timestamp</span><span class="p">}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-sm text-gray-300 mb-2&#34;</span><span class="p">&gt;{</span><span class="nx">log</span><span class="p">.</span><span class="nx">task</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex space-x-4 text-xs text-gray-500&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="err">â±</span> <span class="p">{</span><span class="nx">log</span><span class="p">.</span><span class="nx">duration</span><span class="p">}</span><span class="nx">ms</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="err">ğŸ“Š</span> <span class="p">{</span><span class="nx">log</span><span class="p">.</span><span class="nx">tokensUsed</span><span class="p">}</span> <span class="nx">tokens</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">{</span><span class="nx">log</span><span class="p">.</span><span class="nx">result</span> <span class="o">&amp;&amp;</span> <span class="nx">log</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="s1">&#39;completed&#39;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;mt-2 p-2 bg-gray-900 rounded text-sm&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">{</span><span class="nx">log</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">)}...</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">)}</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">))}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ—¥å¿—æ”¶é›†-hook">æ—¥å¿—æ”¶é›† Hook</h3>
<p>æ·»åŠ åˆ°ä½ çš„ hooks é…ç½®ä»¥å‘ä»ªè¡¨ç›˜æä¾›æ•°æ®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;hooks&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;PreToolUse&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;matcher&#34;</span><span class="p">:</span> <span class="s2">&#34;Task&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;hooks&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;command&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;command&#34;</span><span class="p">:</span> <span class="s2">&#34;~/.claude/monitoring/log-subagent.sh start&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;PostToolUse&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;matcher&#34;</span><span class="p">:</span> <span class="s2">&#34;Task&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;hooks&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;command&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;command&#34;</span><span class="p">:</span> <span class="s2">&#34;~/.claude/monitoring/log-subagent.sh complete&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ—¥å¿—è„šæœ¬-claudemonitoringlog-subagentsh">æ—¥å¿—è„šæœ¬ (<code>~/.claude/monitoring/log-subagent.sh</code>)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">ACTION</span><span class="o">=</span><span class="nv">$1</span>
</span></span><span class="line"><span class="cl"><span class="nv">INPUT</span><span class="o">=</span><span class="k">$(</span>cat<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">TIMESTAMP</span><span class="o">=</span><span class="k">$(</span>date -Iseconds<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">LOG_FILE</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$HOME</span><span class="s2">/.claude/monitoring/logs/</span><span class="k">$(</span>date +%Y-%m-%d<span class="k">)</span><span class="s2">.json&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">mkdir -p <span class="s2">&#34;</span><span class="nv">$HOME</span><span class="s2">/.claude/monitoring/logs&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">AGENT_NAME</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$INPUT</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.tool_input.description // &#34;unknown&#34;&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">MODEL</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$INPUT</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.model // &#34;unknown&#34;&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">TASK</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$INPUT</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.tool_input.prompt // &#34;&#34;&#39;</span> <span class="p">|</span> head -c 200<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$ACTION</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;start&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;{\&#34;timestamp\&#34;: \&#34;</span><span class="nv">$TIMESTAMP</span><span class="s2">\&#34;, \&#34;agentName\&#34;: \&#34;</span><span class="nv">$AGENT_NAME</span><span class="s2">\&#34;, \&#34;model\&#34;: \&#34;</span><span class="nv">$MODEL</span><span class="s2">\&#34;, \&#34;task\&#34;: \&#34;</span><span class="nv">$TASK</span><span class="s2">\&#34;, \&#34;status\&#34;: \&#34;running\&#34;}&#34;</span> &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">elif</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$ACTION</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;complete&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nv">RESULT</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$INPUT</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.result // &#34;&#34;&#39;</span> <span class="p">|</span> head -c 500<span class="k">)</span>
</span></span><span class="line"><span class="cl">    <span class="nv">TOKENS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$INPUT</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.tokens_used // 0&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;{\&#34;timestamp\&#34;: \&#34;</span><span class="nv">$TIMESTAMP</span><span class="s2">\&#34;, \&#34;agentName\&#34;: \&#34;</span><span class="nv">$AGENT_NAME</span><span class="s2">\&#34;, \&#34;model\&#34;: \&#34;</span><span class="nv">$MODEL</span><span class="s2">\&#34;, \&#34;status\&#34;: \&#34;completed\&#34;, \&#34;result\&#34;: \&#34;</span><span class="nv">$RESULT</span><span class="s2">\&#34;, \&#34;tokensUsed\&#34;: </span><span class="nv">$TOKENS</span><span class="s2">}&#34;</span> &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">exit</span> <span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="9-å¿«é€Ÿå‚è€ƒè¡¨">9. å¿«é€Ÿå‚è€ƒè¡¨</h2>
<h3 id="é”®ç›˜å¿«æ·é”®">é”®ç›˜å¿«æ·é”®</h3>
<table>
  <thead>
      <tr>
          <th>å¿«æ·é”®</th>
          <th>æ“ä½œ</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>Escape</code></td>
          <td>ä¸­æ–­å½“å‰æ“ä½œ</td>
      </tr>
      <tr>
          <td><code>Escape Escape</code></td>
          <td>æ‰“å¼€ Rewind (æ—¶é—´æ—…è¡Œ)</td>
      </tr>
      <tr>
          <td><code>Shift + Tab</code></td>
          <td>åˆ‡æ¢ Plan Mode / è‡ªåŠ¨æ¥å—</td>
      </tr>
      <tr>
          <td><code>Ctrl + C</code></td>
          <td>é€€å‡º Claude Code</td>
      </tr>
      <tr>
          <td><code>â†‘</code> / <code>â†“</code></td>
          <td>æµè§ˆ Prompt å†å²</td>
      </tr>
  </tbody>
</table>
<h3 id="å¿…å¤‡å‘½ä»¤">å¿…å¤‡å‘½ä»¤</h3>
<table>
  <thead>
      <tr>
          <th>å‘½ä»¤</th>
          <th>ç”¨é€”</th>
          <th>ä½•æ—¶ä½¿ç”¨</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>/clear</code></td>
          <td>æ¸…ç†å¯¹è¯</td>
          <td>å¼€å§‹æ–°ä»»åŠ¡ï¼ŒContext è‡ƒè‚¿</td>
      </tr>
      <tr>
          <td><code>/compact</code></td>
          <td>æ€»ç»“ Context</td>
          <td>æ¥è¿‘ 70% ä½¿ç”¨ç‡</td>
      </tr>
      <tr>
          <td><code>/context</code></td>
          <td>æ˜¾ç¤º Context ä½¿ç”¨ç‡</td>
          <td>å®šæœŸç›‘æ§</td>
      </tr>
      <tr>
          <td><code>/rewind</code></td>
          <td>æ—¶é—´æ—…è¡Œç•Œé¢</td>
          <td>çŠ¯äº†é”™ï¼Œæƒ³æ’¤é”€</td>
      </tr>
      <tr>
          <td><code>/help</code></td>
          <td>åˆ—å‡ºæ‰€æœ‰å‘½ä»¤</td>
          <td>å¿˜è®°å‘½ä»¤åç§°</td>
      </tr>
      <tr>
          <td><code>/model</code></td>
          <td>åˆ‡æ¢æ¨¡å‹</td>
          <td>æˆæœ¬ä¼˜åŒ–ï¼Œèƒ½åŠ›éœ€æ±‚</td>
      </tr>
      <tr>
          <td><code>/agents</code></td>
          <td>ç®¡ç†å­ Agent</td>
          <td>é…ç½®è‡ªå®šä¹‰ Agent</td>
      </tr>
      <tr>
          <td><code>/permissions</code></td>
          <td>æŸ¥çœ‹/ç¼–è¾‘æƒé™</td>
          <td>æ’æŸ¥å·¥å…·è®¿é—®é—®é¢˜</td>
      </tr>
      <tr>
          <td><code>/hooks</code></td>
          <td>ç®¡ç† Hooks</td>
          <td>å®¡æŸ¥/æ›´æ–°å®‰å…¨è§„åˆ™</td>
      </tr>
  </tbody>
</table>
<h3 id="context-ç®¡ç†é˜ˆå€¼">Context ç®¡ç†é˜ˆå€¼</h3>
<table>
  <thead>
      <tr>
          <th>Context %</th>
          <th>çŠ¶æ€</th>
          <th>è¡ŒåŠ¨</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>0-40%</td>
          <td>ğŸŸ¢ å¥åº·</td>
          <td>è‡ªç”±å·¥ä½œ</td>
      </tr>
      <tr>
          <td>40-60%</td>
          <td>ğŸŸ¡ è§‚å¯Ÿ</td>
          <td>å¯¹æ–°æ–‡ä»¶ä¿æŒé€‰æ‹©æ€§</td>
      </tr>
      <tr>
          <td>60-80%</td>
          <td>ğŸŸ  è­¦æˆ’</td>
          <td>è€ƒè™‘å‹ç¼©</td>
      </tr>
      <tr>
          <td>80-95%</td>
          <td>ğŸ”´ å±æ€¥</td>
          <td><code>/clear</code> æˆ–æœ‰é’ˆå¯¹æ€§çš„ <code>/compact</code></td>
      </tr>
      <tr>
          <td>95-100%</td>
          <td>â›” å±é™©</td>
          <td>è‡ªåŠ¨å‹ç¼©è§¦å‘ï¼ˆä¸å¯æ§ï¼‰</td>
      </tr>
  </tbody>
</table>
<h3 id="æ¨¡å‹é€‰æ‹©æŒ‡å—">æ¨¡å‹é€‰æ‹©æŒ‡å—</h3>
<table>
  <thead>
      <tr>
          <th>æ¨¡å‹</th>
          <th>æœ€é€‚åˆ</th>
          <th>æˆæœ¬</th>
          <th>é€Ÿåº¦</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Opus 4.5</td>
          <td>æ¶æ„ã€å¤æ‚æ¨ç†ã€å…³é”®ä»£ç </td>
          <td>$$$</td>
          <td>æ…¢</td>
      </tr>
      <tr>
          <td>Sonnet 4.5</td>
          <td>å¤§å¤šæ•°ç¼–ç ä»»åŠ¡ã€å¹³è¡¡å‹</td>
          <td>$$</td>
          <td>ä¸­</td>
      </tr>
      <tr>
          <td>Haiku 4.5</td>
          <td>å¿«é€ŸæŸ¥è¯¢ã€ç®€å•ä»»åŠ¡ã€æ¢ç´¢</td>
          <td>$</td>
          <td>å¿«</td>
      </tr>
  </tbody>
</table>
<h3 id="æ–‡ä»¶ä½ç½®">æ–‡ä»¶ä½ç½®</h3>
<table>
  <thead>
      <tr>
          <th>è·¯å¾„</th>
          <th>ç”¨é€”</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>~/.claude/CLAUDE.md</code></td>
          <td>å…¨å±€æŒ‡ä»¤</td>
      </tr>
      <tr>
          <td><code>~/.claude/settings.json</code></td>
          <td>å…¨å±€è®¾ç½®ï¼Œhooks</td>
      </tr>
      <tr>
          <td><code>~/.claude/commands/</code></td>
          <td>ä¸ªäºº Slash å‘½ä»¤</td>
      </tr>
      <tr>
          <td><code>~/.claude/agents/</code></td>
          <td>è‡ªå®šä¹‰å­ Agent</td>
      </tr>
      <tr>
          <td><code>.claude/CLAUDE.md</code></td>
          <td>é¡¹ç›®æŒ‡ä»¤ï¼ˆå›¢é˜Ÿï¼‰</td>
      </tr>
      <tr>
          <td><code>.claude/settings.json</code></td>
          <td>é¡¹ç›®è®¾ç½®ï¼ˆå›¢é˜Ÿï¼‰</td>
      </tr>
      <tr>
          <td><code>.claude/settings.local.json</code></td>
          <td>æœ¬åœ°é¡¹ç›®è®¾ç½® (gitignored)</td>
      </tr>
      <tr>
          <td><code>.claude/commands/</code></td>
          <td>é¡¹ç›® Slash å‘½ä»¤</td>
      </tr>
      <tr>
          <td><code>.claude/agents/</code></td>
          <td>é¡¹ç›®å­ Agent</td>
      </tr>
  </tbody>
</table>
<h3 id="å®‰å…¨-hook-æ£€æŸ¥æ¸…å•">å®‰å…¨ Hook æ£€æŸ¥æ¸…å•</h3>
<table>
  <thead>
      <tr>
          <th>Hook ç±»å‹</th>
          <th>æ¨èç”¨é€”</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>PreToolUse:Bash</code></td>
          <td>é˜»æ­¢å±é™©å‘½ä»¤</td>
      </tr>
      <tr>
          <td><code>PreToolUse:Write</code></td>
          <td>ä¿æŠ¤æ•æ„Ÿæ–‡ä»¶</td>
      </tr>
      <tr>
          <td><code>PostToolUse:Write(*.py)</code></td>
          <td>è‡ªåŠ¨æ ¼å¼åŒ– Python</td>
      </tr>
      <tr>
          <td><code>PostToolUse:Write(*.ts)</code></td>
          <td>è‡ªåŠ¨æ ¼å¼åŒ– + ç±»å‹æ£€æŸ¥</td>
      </tr>
      <tr>
          <td><code>PostToolUse:Edit</code></td>
          <td>è¿è¡Œ Linters</td>
      </tr>
      <tr>
          <td><code>Stop</code></td>
          <td>ä¼šè¯æ‘˜è¦è®°å½•</td>
      </tr>
  </tbody>
</table>
<h3 id="prompt-è´¨é‡æ£€æŸ¥æ¸…å•">Prompt è´¨é‡æ£€æŸ¥æ¸…å•</h3>
<p>åœ¨å‘é€ Prompt ä¹‹å‰ï¼Œè¯·éªŒè¯ï¼š</p>
<ul>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> <strong>ç›®æ ‡å…·ä½“</strong>ï¼šåˆ°åº•åº”è¯¥å‘ç”Ÿä»€ä¹ˆï¼Ÿ</li>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> <strong>æä¾› Context</strong>ï¼šClaude éœ€è¦å“ªäº›æ–‡ä»¶/ä¿¡æ¯ï¼Ÿ</li>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> <strong>çº¦æŸæ˜ç¡®</strong>ï¼šå¿…é¡»/å¿…é¡»ä¸å‘ç”Ÿä»€ä¹ˆï¼Ÿ</li>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> <strong>æˆåŠŸæ ‡å‡†å®šä¹‰</strong>ï¼šæˆ‘å¦‚ä½•çŸ¥é“å®ƒå®Œæˆäº†ï¼Ÿ</li>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> <strong>ç»™å‡ºç¤ºä¾‹</strong>ï¼šå¯¹äºå¤æ‚æ¨¡å¼ï¼Œå±•ç¤ºå®ƒè€Œä¸æ˜¯è®²è¿°å®ƒ</li>
</ul>
<h3 id="é”™è¯¯æ¢å¤æµç¨‹å›¾">é”™è¯¯æ¢å¤æµç¨‹å›¾</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Issue Detected (æ£€æµ‹åˆ°é—®é¢˜)
</span></span><span class="line"><span class="cl">      â”‚
</span></span><span class="line"><span class="cl">      â–¼
</span></span><span class="line"><span class="cl">  Small/Local? (å°çš„/å±€éƒ¨çš„?) â”€â”€â”€â”€Yesâ”€â”€â”€â”€â–¶ Escape Escape (Rewind)
</span></span><span class="line"><span class="cl">      â”‚                                       â”‚
</span></span><span class="line"><span class="cl">      No                                é€‰å–æ¢å¤ç‚¹
</span></span><span class="line"><span class="cl">      â”‚                                       â”‚
</span></span><span class="line"><span class="cl">      â–¼                                       â–¼
</span></span><span class="line"><span class="cl">  Code broken? (ä»£ç åäº†?) â”€â”€â”€â”€Yesâ”€â”€â”€â”€â–¶ git checkout / git stash
</span></span><span class="line"><span class="cl">      â”‚
</span></span><span class="line"><span class="cl">      No
</span></span><span class="line"><span class="cl">      â”‚
</span></span><span class="line"><span class="cl">      â–¼
</span></span><span class="line"><span class="cl">  Context rot? (Context è…çƒ‚?) â”€â”€â”€â”€Yesâ”€â”€â”€â”€â–¶ /clear + å¸¦ç¬”è®°é‡å¯
</span></span><span class="line"><span class="cl">      â”‚
</span></span><span class="line"><span class="cl">      No
</span></span><span class="line"><span class="cl">      â”‚
</span></span><span class="line"><span class="cl">      â–¼
</span></span><span class="line"><span class="cl">  Log to error journal for pattern analysis (è®°å½•åˆ°é”™è¯¯æ—¥å¿—è¿›è¡Œæ¨¡å¼åˆ†æ)
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="é™„å½•claudemd-æ¨¡æ¿">é™„å½•ï¼šCLAUDE.md æ¨¡æ¿</h2>
<p>å°†å…¶å¤åˆ¶åˆ°ä½ çš„é¡¹ç›®æ ¹ç›®å½•å¹¶æ ¹æ®éœ€è¦è‡ªå®šä¹‰ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl"><span class="gh"># Project: [NAME]
</span></span></span><span class="line"><span class="cl"><span class="gh"></span>
</span></span><span class="line"><span class="cl"><span class="gu">## Overview
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>[2-3 å¥è¯æè¿°é¡¹ç›®]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Tech Stack
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> Language: [e.g., TypeScript 5.3]
</span></span><span class="line"><span class="cl"><span class="k">-</span> Framework: [e.g., Next.js 14]
</span></span><span class="line"><span class="cl"><span class="k">-</span> Database: [e.g., PostgreSQL + Prisma]
</span></span><span class="line"><span class="cl"><span class="k">-</span> Testing: [e.g., Jest + React Testing Library]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Key Commands
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> <span class="sb">`npm run dev`</span> - å¯åŠ¨å¼€å‘æœåŠ¡å™¨
</span></span><span class="line"><span class="cl"><span class="k">-</span> <span class="sb">`npm run build`</span> - ç”Ÿäº§æ„å»º
</span></span><span class="line"><span class="cl"><span class="k">-</span> <span class="sb">`npm run test`</span> - è¿è¡Œæµ‹è¯•
</span></span><span class="line"><span class="cl"><span class="k">-</span> <span class="sb">`npm run lint`</span> - è¿è¡Œ linter
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Project Structure
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>src/
â”œâ”€â”€ app/          # Next.js app router
â”œâ”€â”€ components/   # React components
â”œâ”€â”€ lib/          # Utilities and helpers
â”œâ”€â”€ hooks/        # Custom React hooks
â””â”€â”€ types/        # TypeScript types</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1">## Coding Standards (ç¼–ç è§„èŒƒ)</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">ä½¿ç”¨å¸¦</span> <span class="n">hooks</span> <span class="err">çš„å‡½æ•°å¼ç»„ä»¶</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">ä¼˜å…ˆä½¿ç”¨å…·åå¯¼å‡º</span> <span class="p">(</span><span class="n">named</span> <span class="n">exports</span><span class="p">)</span> <span class="err">è€Œéé»˜è®¤å¯¼å‡º</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">æ¯ä¸ªæ–‡ä»¶ä¸€ä¸ªç»„ä»¶</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">æµ‹è¯•æ”¾åœ¨</span> <span class="err">`</span><span class="n">__tests__</span><span class="o">/</span><span class="err">`</span> <span class="err">ç›®å½•ä¸­</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Important Patterns (é‡è¦æ¨¡å¼)</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">State</span> <span class="n">management</span><span class="p">:</span> <span class="p">[</span><span class="err">æè¿°æ¨¡å¼</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">API</span> <span class="n">calls</span><span class="p">:</span> <span class="p">[</span><span class="err">æè¿°æ¨¡å¼</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Error</span> <span class="n">handling</span><span class="p">:</span> <span class="p">[</span><span class="err">æè¿°æ¨¡å¼</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## DO NOT (ä¸è¦)</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">ä¿®æ”¹</span> <span class="err">`</span><span class="n">node_modules</span><span class="o">/</span><span class="err">`</span> <span class="err">ä¸­çš„æ–‡ä»¶</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">ç›´æ¥æäº¤åˆ°</span> <span class="n">main</span> <span class="err">åˆ†æ”¯</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">è·³è¿‡æ–°åŠŸèƒ½çš„æµ‹è¯•</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Subagent Rules (å­ Agent è§„åˆ™)</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">å­</span> <span class="n">Agent</span> <span class="err">å§‹ç»ˆä½¿ç”¨</span> <span class="n">Opus</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">ç”Ÿæˆå­</span> <span class="n">Agent</span> <span class="err">å‰å…ˆé€šå‘Š</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">ç®€æ´æ€»ç»“å­</span> <span class="n">Agent</span> <span class="err">çš„ç»“æœ</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## Context Management (Context ç®¡ç†)</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">å½“</span> <span class="n">Context</span> <span class="err">è¶…è¿‡</span> <span class="mi">60</span><span class="o">%</span> <span class="err">æ—¶è­¦å‘Š</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">å½“</span> <span class="o">&gt;</span><span class="mi">50</span><span class="o">%</span> <span class="err">æ—¶ï¼Œåœ¨å›å¤ä¸­åŒ…å«</span> <span class="s2">&#34;Context: X%&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="err">æœªç»è¯¢é—®ç»ä¸è‡ªåŠ¨å‹ç¼©</span> <span class="p">(</span><span class="n">auto</span><span class="o">-</span><span class="n">compact</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p><em>æŒ‡å—ç‰ˆæœ¬ 1.0 | æœ€åæ›´æ–°ï¼š2026å¹´1æœˆ</em></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2026-01-22&nbsp;<a class="git-hash" href="https://github.com/chenguangwei/commit/656b6c9e96f34e103b95060a0570389e75594fee" target="_blank" title="commit by chenguangwei(chenguangwei1017@163.com) 656b6c9e96f34e103b95060a0570389e75594fee: Refactor code structure for improved readability and maintainability">
                                    <i class="fas fa-hashtag fa-fw" aria-hidden="true"></i>656b6c9</a></span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/claude-code/index.md" target="_blank">é˜…è¯»åŸå§‹æ–‡æ¡£</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="http://localhost:1313/claude-code/" data-title="Claude Code ç²¾é€šæŒ‡å—ï¼šå®ç° 10 å€æ•ˆç‡çš„é«˜çº§æ¨¡å¼" data-hashtags="Claude Code,LLM,æ•ˆç‡,ç¼–ç¨‹"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Hacker News" data-sharer="hackernews" data-url="http://localhost:1313/claude-code/" data-title="Claude Code ç²¾é€šæŒ‡å—ï¼šå®ç° 10 å€æ•ˆç‡çš„é«˜çº§æ¨¡å¼"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Line" data-sharer="line" data-url="http://localhost:1313/claude-code/" data-title="Claude Code ç²¾é€šæŒ‡å—ï¼šå®ç° 10 å€æ•ˆç‡çš„é«˜çº§æ¨¡å¼"><i data-svg-src="/lib/simple-icons/icons/line.min.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="http://localhost:1313/claude-code/" data-title="Claude Code ç²¾é€šæŒ‡å—ï¼šå®ç° 10 å€æ•ˆç‡çš„é«˜çº§æ¨¡å¼" data-ralateuid="xxxx"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/claude-code/">Claude Code</a>,&nbsp;<a href="/tags/llm/">LLM</a>,&nbsp;<a href="/tags/%E6%95%88%E7%8E%87/">æ•ˆç‡</a>,&nbsp;<a href="/tags/%E7%BC%96%E7%A8%8B/">ç¼–ç¨‹</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/claude-code-en/" class="prev" rel="prev" title="Claude Code Mastery: Advanced Patterns for 10x Productivity"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Claude Code Mastery: Advanced Patterns for 10x Productivity</a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line"><p>ä¸€ä¸ªç¨‹åºå‘˜ï¼Œä¸»è¯­è¨€ Javaï¼Œå…¶ä»–è¯­è¨€ä¹Ÿéƒ½äº†è§£ä¸€äº›ï¼Œç°åœ¨å¸Œæœ› AI ç›¸å…³æŠ€æœ¯é¢†åŸŸåŠæ–¹æ¡ˆã€‚</p><p>å†™åšå®¢çš„è¿‡ç¨‹èƒ½åŠ æ·±è‡ªå·±å¯¹ä¸€ä¸ªçŸ¥è¯†ç‚¹çš„ç†è§£ï¼ŒåŒæ—¶è¿˜å¯ä»¥åˆ†äº«ç»™ä»–äººã€‚</p><p>å–œæ¬¢å‰æ²¿ç§‘æŠ€ï¼Œè‡ªå·±ä¹Ÿåœ¨ä¸€å®¶äººå·¥æ™ºèƒ½å…¬å¸å·¥ä½œï¼Œå¸Œæœ›å’Œå¤§å®¶ä¸€è·¯åŒè¡Œå­¦ä¹  AIï¼Œåšä¸€ä¸ªä¸è½åæ—¶ä»£çš„äººï¼ŒåŒæ—¶ä¹Ÿä¼šåˆ†äº«ä¸€äº›è‡ªå·±ç‹¬ç«‹å¼€å‘çš„ç»éªŒå’Œå¿ƒå¾—ã€‚</p></div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2025 - 2026</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">ä¸€è·¯åŒè¡Œ</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/algoliasearch/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":50},"comment":{},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.zh-cn","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":50,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
