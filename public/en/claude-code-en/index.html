<!DOCTYPE html>
<html lang="en">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Claude Code Mastery: Advanced Patterns for 10x Productivity - ‰∏ÄË∑ØÂêåË°å</title><meta name="Description" content="A comprehensive guide to the patterns that actually move the needle. Reverse-engineered from 2000&#43; hours of LLM-assisted coding."><meta property="og:url" content="http://localhost:1313/en/claude-code-en/">
  <meta property="og:site_name" content="‰∏ÄË∑ØÂêåË°å">
  <meta property="og:title" content="Claude Code Mastery: Advanced Patterns for 10x Productivity">
  <meta property="og:description" content="A comprehensive guide to the patterns that actually move the needle. Reverse-engineered from 2000&#43; hours of LLM-assisted coding.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-01-22T23:00:00+08:00">
    <meta property="article:modified_time" content="2025-01-22T23:00:00+08:00">
    <meta property="article:tag" content="Claude Code">
    <meta property="article:tag" content="LLM">
    <meta property="article:tag" content="Productivity">
    <meta property="article:tag" content="Programming">
    <meta property="og:image" content="http://localhost:1313/logo.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/logo.png">
  <meta name="twitter:title" content="Claude Code Mastery: Advanced Patterns for 10x Productivity">
  <meta name="twitter:description" content="A comprehensive guide to the patterns that actually move the needle. Reverse-engineered from 2000&#43; hours of LLM-assisted coding.">
      <meta name="twitter:site" content="@https://x.com/cgw1017">
<meta name="application-name" content="‰∏ÄË∑ØÈÄöË°å">
<meta name="apple-mobile-web-app-title" content="‰∏ÄË∑ØÈÄöË°å"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://localhost:1313/en/claude-code-en/" /><link rel="prev" href="http://localhost:1313/en/emoji-support/" /><link rel="next" href="http://localhost:1313/en/claude-code/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Claude Code Mastery: Advanced Patterns for 10x Productivity",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/localhost:1313\/en\/claude-code-en\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "http:\/\/localhost:1313\/images\/Apple-Devices-Preview.png",
                            "width":  3200 ,
                            "height":  2048 
                        }],"genre": "posts","keywords": "Claude Code, LLM, Productivity, Programming","wordcount":  5913 ,
        "url": "http:\/\/localhost:1313\/en\/claude-code-en\/","datePublished": "2025-01-22T23:00:00+08:00","dateModified": "2025-01-22T23:00:00+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "‰∏ÄË∑ØÂêåË°å","logo": {
                    "@type": "ImageObject",
                    "url": "http:\/\/localhost:1313\/images\/avatar.png",
                    "width":  256 ,
                    "height":  256 
                }},"author": {
                "@type": "Person",
                "name": "‰∏ÄË∑ØÂêåË°å"
            },"description": "A comprehensive guide to the patterns that actually move the needle. Reverse-engineered from 2000+ hours of LLM-assisted coding."
    }
    </script></head>
    <body data-header-desktop="auto" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/en/" title="‰∏ÄË∑ØÂêåË°å"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw' aria-hidden='true'></i></span>AI‰∏ÄË∑ØÂêåË°å</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/en/posts/"> Posts </a><a class="menu-item" href="/en/tags/"> Tags </a><a class="menu-item" href="/en/categories/"> Categories </a><a class="menu-item" href="/en/about/"> About </a><a class="menu-item" href="https://github.com/chenguangwei" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="Select Language">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/en/claude-code-en/" selected>English</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/en/" title="‰∏ÄË∑ØÂêåË°å"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw' aria-hidden='true'></i></span>AI‰∏ÄË∑ØÂêåË°å</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/en/posts/" title="">Posts</a><a class="menu-item" href="/en/tags/" title="">Tags</a><a class="menu-item" href="/en/categories/" title="">Categories</a><a class="menu-item" href="/en/about/" title="">About</a><a class="menu-item" href="https://github.com/chenguangwei" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Select Language">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/en/claude-code-en/" selected>English</option></select>
                </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Claude Code Mastery: Advanced Patterns for 10x Productivity</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/en/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>‰∏ÄË∑ØÂêåË°å</a></span>&nbsp;<span class="post-category">included in <a href="/en/categories/ai/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>AI</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2025-01-22">2025-01-22</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;5913 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;28 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#table-of-contents">Table of Contents</a></li>
    <li><a href="#1-core-philosophy-context-engineering">1. Core Philosophy: Context Engineering</a>
      <ul>
        <li><a href="#the-fundamental-mindset-shift">The Fundamental Mindset Shift</a></li>
        <li><a href="#the-context-quality-curve">The Context Quality Curve</a></li>
      </ul>
    </li>
    <li><a href="#2-pattern-1-error-logging-system">2. Pattern 1: Error Logging System</a>
      <ul>
        <li><a href="#the-problem">The Problem</a></li>
        <li><a href="#the-solution-reconstruct-the-feedback-loop">The Solution: Reconstruct the Feedback Loop</a></li>
        <li><a href="#implementation">Implementation</a>
          <ul>
            <li><a href="#error-log-template-claudeerror-logmd">Error Log Template (<code>~/.claude/error-log.md</code>)</a></li>
            <li><a href="#slash-command-for-quick-logging">Slash Command for Quick Logging</a></li>
          </ul>
        </li>
        <li><a href="#error-categories--common-fixes">Error Categories &amp; Common Fixes</a></li>
      </ul>
    </li>
    <li><a href="#3-pattern-2-slash-commands-as-lightweight-local-apps">3. Pattern 2: Slash Commands as Lightweight Local Apps</a>
      <ul>
        <li><a href="#the-mental-model">The Mental Model</a></li>
        <li><a href="#command-architecture">Command Architecture</a></li>
        <li><a href="#essential-slash-commands-collection">Essential Slash Commands Collection</a>
          <ul>
            <li><a href="#1-smart-commit-claudecommandscommitmd">1. Smart Commit (<code>~/.claude/commands/commit.md</code>)</a></li>
            <li><a href="#2-pr-creator-claudecommandsprmd">2. PR Creator (<code>~/.claude/commands/pr.md</code>)</a></li>
            <li><a href="#3-deep-investigation-claudecommandsinvestigatemd">3. Deep Investigation (<code>~/.claude/commands/investigate.md</code>)</a></li>
            <li><a href="#4-test-generator-claudecommandstestmd">4. Test Generator (<code>~/.claude/commands/test.md</code>)</a></li>
            <li><a href="#5-security-audit-claudecommandssecurity-auditmd">5. Security Audit (<code>~/.claude/commands/security-audit.md</code>)</a></li>
            <li><a href="#6-refactor-planner-claudecommandsrefactor-planmd">6. Refactor Planner (<code>~/.claude/commands/refactor-plan.md</code>)</a></li>
            <li><a href="#bash-safety-hook-claudehooksbash-safetysh">Bash Safety Hook (<code>~/.claude/hooks/bash-safety.sh</code>)</a></li>
            <li><a href="#write-safety-hook-claudehookswrite-safetysh">Write Safety Hook (<code>~/.claude/hooks/write-safety.sh</code>)</a></li>
            <li><a href="#session-summary-hook-claudehookssession-summarysh">Session Summary Hook (<code>~/.claude/hooks/session-summary.sh</code>)</a></li>
          </ul>
        </li>
        <li><a href="#making-hooks-executable">Making Hooks Executable</a></li>
        <li><a href="#the-safe-yolo-alias">The ‚ÄúSafe YOLO‚Äù Alias</a></li>
      </ul>
    </li>
    <li><a href="#5-pattern-4-context-hygiene">5. Pattern 4: Context Hygiene</a>
      <ul>
        <li><a href="#understanding-context-degradation">Understanding Context Degradation</a></li>
        <li><a href="#disable-auto-compact">Disable Auto-Compact</a></li>
        <li><a href="#the-context-status-pattern">The /context Status Pattern</a></li>
        <li><a href="#the-double-escape-time-travel-pattern">The ‚ÄúDouble-Escape Time Travel‚Äù Pattern</a></li>
        <li><a href="#context-management-workflow">Context Management Workflow</a></li>
        <li><a href="#smart-compaction-command">Smart Compaction Command</a></li>
      </ul>
    </li>
    <li><a href="#6-pattern-5-subagent-control">6. Pattern 5: Subagent Control</a>
      <ul>
        <li><a href="#the-default-problem">The Default Problem</a></li>
        <li><a href="#force-opus-subagents">Force Opus Subagents</a></li>
        <li><a href="#custom-subagent-collection">Custom Subagent Collection</a>
          <ul>
            <li><a href="#code-reviewer-claudeagentscode-reviewermd">Code Reviewer (<code>~/.claude/agents/code-reviewer.md</code>)</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#critical-">Critical üî¥</a></li>
    <li><a href="#important-">Important üü°</a></li>
    <li><a href="#suggestions-">Suggestions üü¢</a>
      <ul>
        <li>
          <ul>
            <li><a href="#test-writer-claudeagentstest-writermd">Test Writer (<code>~/.claude/agents/test-writer.md</code>)</a></li>
            <li><a href="#architecture-analyst-claudeagentsarchitectmd">Architecture Analyst (<code>~/.claude/agents/architect.md</code>)</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#step-3-confirm">Step 3: Confirm</a>
      <ul>
        <li><a href="#example-session">Example Session</a></li>
      </ul>
    </li>
    <li><a href="#8-subagent-monitoring-dashboard">8. Subagent Monitoring Dashboard</a>
      <ul>
        <li><a href="#installation">Installation</a></li>
        <li><a href="#dashboard-code-claudemonitoringpagesindextsx">Dashboard Code (<code>~/.claude/monitoring/pages/index.tsx</code>)</a></li>
        <li><a href="#log-collection-hook">Log Collection Hook</a></li>
        <li><a href="#log-script-claudemonitoringlog-subagentsh">Log Script (<code>~/.claude/monitoring/log-subagent.sh</code>)</a></li>
      </ul>
    </li>
    <li><a href="#9-quick-reference-table">9. Quick Reference Table</a>
      <ul>
        <li><a href="#keyboard-shortcuts">Keyboard Shortcuts</a></li>
        <li><a href="#essential-commands">Essential Commands</a></li>
        <li><a href="#context-management-thresholds">Context Management Thresholds</a></li>
        <li><a href="#model-selection-guide">Model Selection Guide</a></li>
        <li><a href="#file-locations">File Locations</a></li>
        <li><a href="#safety-hook-checklist">Safety Hook Checklist</a></li>
        <li><a href="#prompt-quality-checklist">Prompt Quality Checklist</a></li>
        <li><a href="#error-recovery-flowchart">Error Recovery Flowchart</a></li>
      </ul>
    </li>
    <li><a href="#appendix-claudemd-template">Appendix: CLAUDE.md Template</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="claude-code-mastery-advanced-patterns-for-10x-productivity">Claude Code Mastery: Advanced Patterns for 10x Productivity</h1>
<p><strong>A comprehensive guide to the patterns that actually move the needle</strong></p>
<p><em>Reverse-engineered from 2000+ hours of LLM-assisted coding</em></p>
<hr>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#1-core-philosophy-context-engineering" rel="">Core Philosophy: Context Engineering</a></li>
<li><a href="#2-pattern-1-error-logging-system" rel="">Pattern 1: Error Logging System</a></li>
<li><a href="#3-pattern-2-slash-commands-as-lightweight-local-apps" rel="">Pattern 2: Slash Commands as Lightweight Local Apps</a></li>
<li><a href="#4-pattern-3-hooks-for-deterministic-safety" rel="">Pattern 3: Hooks for Deterministic Safety</a></li>
<li><a href="#5-pattern-4-context-hygiene" rel="">Pattern 4: Context Hygiene</a></li>
<li><a href="#6-pattern-5-subagent-control" rel="">Pattern 5: Subagent Control</a></li>
<li><a href="#7-pattern-6-the-reprompter-system" rel="">Pattern 6: The Reprompter System</a></li>
<li><a href="#8-subagent-monitoring-dashboard" rel="">Subagent Monitoring Dashboard</a></li>
<li><a href="#9-quick-reference-table" rel="">Quick Reference Table</a></li>
</ol>
<hr>
<h2 id="1-core-philosophy-context-engineering">1. Core Philosophy: Context Engineering</h2>
<h3 id="the-fundamental-mindset-shift">The Fundamental Mindset Shift</h3>
<p><strong>Any issue in LLM-generated code is solely due to YOU.</strong></p>
<p>This isn‚Äôt blame‚Äîit‚Äôs empowerment. Every error traces back to:</p>
<ul>
<li><strong>Improper prompting</strong>: Vague instructions, missing constraints, unclear success criteria</li>
<li><strong>Improper context engineering</strong>: Wrong files loaded, stale context, missing architectural knowledge</li>
<li><strong>Context rot</strong>: Degraded quality as the context window fills with irrelevant information</li>
<li><strong>Lost in the middle</strong>: The well-documented phenomenon where LLMs pay less attention to middle-of-context information</li>
</ul>
<h3 id="the-context-quality-curve">The Context Quality Curve</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Quality of Output
</span></span><span class="line"><span class="cl">     ‚îÇ
</span></span><span class="line"><span class="cl"> 100%‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ
</span></span><span class="line"><span class="cl">     ‚îÇ        ‚îÇ‚ï≤
</span></span><span class="line"><span class="cl">  80%‚îÇ        ‚îÇ ‚ï≤
</span></span><span class="line"><span class="cl">     ‚îÇ        ‚îÇ  ‚ï≤ ‚Üê &#34;Lost in the Middle&#34; begins
</span></span><span class="line"><span class="cl">  60%‚îÇ        ‚îÇ   ‚ï≤
</span></span><span class="line"><span class="cl">     ‚îÇ        ‚îÇ    ‚ï≤____
</span></span><span class="line"><span class="cl">  40%‚îÇ        ‚îÇ         ‚ï≤___
</span></span><span class="line"><span class="cl">     ‚îÇ        ‚îÇ              ‚ï≤___
</span></span><span class="line"><span class="cl">  20%‚îÇ        ‚îÇ                   ‚ï≤
</span></span><span class="line"><span class="cl">     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Context Usage %
</span></span><span class="line"><span class="cl">           20%   40%   60%   80%  100%
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Key insight</strong>: Quality degrades non-linearly. The last 20% of context is poison.</p>
<hr>
<h2 id="2-pattern-1-error-logging-system">2. Pattern 1: Error Logging System</h2>
<h3 id="the-problem">The Problem</h3>
<p>Agentic coding hides the input-output loop from you. Claude makes decisions, executes tools, and you only see the final result. When things go wrong, you don‚Äôt know <em>why</em>.</p>
<h3 id="the-solution-reconstruct-the-feedback-loop">The Solution: Reconstruct the Feedback Loop</h3>
<p>Create a systematic log of failures with:</p>
<ol>
<li><strong>The exact triggering prompt</strong></li>
<li><strong>The context state</strong> (what files were loaded, % used)</li>
<li><strong>The failure mode</strong> (wrong output, hallucination, refusal, loop)</li>
<li><strong>Your diagnosis</strong> (what did YOU do wrong?)</li>
</ol>
<h3 id="implementation">Implementation</h3>
<h4 id="error-log-template-claudeerror-logmd">Error Log Template (<code>~/.claude/error-log.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl"><span class="gh"># Claude Code Error Log
</span></span></span><span class="line"><span class="cl"><span class="gh"></span> 
</span></span><span class="line"><span class="cl"><span class="gu">## Entry Format
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> **Date**: 
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Prompt**: [exact text]
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Context %**: 
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Files Loaded**: 
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Failure Mode**: [wrong-output | hallucination | refusal | infinite-loop | context-rot]
</span></span><span class="line"><span class="cl"><span class="k">-</span> **What Claude Did**: 
</span></span><span class="line"><span class="cl"><span class="k">-</span> **What I Expected**: 
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Root Cause**: [prompting | context | model-limitation]
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Fix Applied**: 
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Pattern Identified**: 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## 2025-01-03 | Context Rot in Auth Refactor
</span></span></span><span class="line"><span class="cl"><span class="gu"></span> 
</span></span><span class="line"><span class="cl"><span class="gs">**Prompt**</span>: &#34;Now refactor the auth module to use the new pattern&#34;
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gs">**Context %**</span>: 78%
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gs">**Files Loaded**</span>: 12 files from src/auth/, 3 config files, previous conversation
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gs">**Failure Mode**</span>: wrong-output
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gs">**What Claude Did**</span>: Used old pattern despite being shown new one 30 messages ago
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gs">**What I Expected**</span>: Apply the new auth pattern from message <span class="ni">#4</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gs">**Root Cause**</span>: context - the new pattern was in &#34;lost middle&#34; zone
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gs">**Fix Applied**</span>: /clear ‚Üí re-stated pattern ‚Üí pointed to specific file with pattern
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gs">**Pattern Identified**</span>: ALWAYS re-state critical patterns before asking for implementation if &gt;50% context used
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">---
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="slash-command-for-quick-logging">Slash Command for Quick Logging</h4>
<p>Create <code>~/.claude/commands/log-error.md</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Log a Claude Code error for pattern analysis
</span></span><span class="line"><span class="cl">argument-hint: [failure-mode] [brief-description]
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">I need to log an error for my learning system. Please help me fill out this template:
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gs">**Failure Mode**</span>: $1
</span></span><span class="line"><span class="cl"><span class="gs">**Brief Description**</span>: $2
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Ask me the following questions one at a time:
</span></span><span class="line"><span class="cl"><span class="k">1.</span> What was the exact prompt that triggered this?
</span></span><span class="line"><span class="cl"><span class="k">2.</span> What was the context % when this happened?
</span></span><span class="line"><span class="cl"><span class="k">3.</span> What files were loaded?
</span></span><span class="line"><span class="cl"><span class="k">4.</span> What did you expect vs what happened?
</span></span><span class="line"><span class="cl"><span class="k">5.</span> What do you think the root cause was?
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Then format it as a markdown entry I can append to my error log.
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="error-categories--common-fixes">Error Categories &amp; Common Fixes</h3>
<table>
  <thead>
      <tr>
          <th>Failure Mode</th>
          <th>Common Causes</th>
          <th>Standard Fixes</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Wrong Output</strong></td>
          <td>Vague prompt, missing constraints</td>
          <td>Add explicit constraints, examples</td>
      </tr>
      <tr>
          <td><strong>Hallucination</strong></td>
          <td>Asked about code Claude hasn‚Äôt seen</td>
          <td>@-mention specific files first</td>
      </tr>
      <tr>
          <td><strong>Refusal</strong></td>
          <td>Triggered safety, ambiguous request</td>
          <td>Rephrase, provide more context</td>
      </tr>
      <tr>
          <td><strong>Infinite Loop</strong></td>
          <td>Unclear success criteria</td>
          <td>Define exit conditions explicitly</td>
      </tr>
      <tr>
          <td><strong>Context Rot</strong></td>
          <td>&gt;70% context, stale information</td>
          <td>/clear, restart with fresh context</td>
      </tr>
      <tr>
          <td><strong>Regression</strong></td>
          <td>Fixed something, broke something else</td>
          <td>Require tests before implementation</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="3-pattern-2-slash-commands-as-lightweight-local-apps">3. Pattern 2: Slash Commands as Lightweight Local Apps</h2>
<h3 id="the-mental-model">The Mental Model</h3>
<p>Think of slash commands as <strong>Claude-as-a-Service workflows</strong>. They‚Äôre like SaaS products you can build in 5 minutes:</p>
<ul>
<li>Pre-configured prompts with best practices baked in</li>
<li>Argument handling for dynamic behavior</li>
<li>Tool restrictions for safety</li>
<li>Model selection for cost/quality tradeoffs</li>
</ul>
<h3 id="command-architecture">Command Architecture</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">~/.claude/commands/          # Personal commands (available everywhere)
</span></span><span class="line"><span class="cl">‚îú‚îÄ‚îÄ quick/                   # Fast, simple commands
</span></span><span class="line"><span class="cl">‚îÇ   ‚îú‚îÄ‚îÄ commit.md
</span></span><span class="line"><span class="cl">‚îÇ   ‚îú‚îÄ‚îÄ pr.md
</span></span><span class="line"><span class="cl">‚îÇ   ‚îî‚îÄ‚îÄ review.md
</span></span><span class="line"><span class="cl">‚îú‚îÄ‚îÄ research/                # Investigation commands
</span></span><span class="line"><span class="cl">‚îÇ   ‚îú‚îÄ‚îÄ deep-dive.md
</span></span><span class="line"><span class="cl">‚îÇ   ‚îú‚îÄ‚îÄ compare.md
</span></span><span class="line"><span class="cl">‚îÇ   ‚îî‚îÄ‚îÄ audit.md
</span></span><span class="line"><span class="cl">‚îî‚îÄ‚îÄ workflows/               # Multi-step processes
</span></span><span class="line"><span class="cl">    ‚îú‚îÄ‚îÄ feature.md
</span></span><span class="line"><span class="cl">    ‚îú‚îÄ‚îÄ debug.md
</span></span><span class="line"><span class="cl">    ‚îî‚îÄ‚îÄ refactor.md
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">.claude/commands/            # Project commands (team-shared)
</span></span><span class="line"><span class="cl">‚îú‚îÄ‚îÄ test.md
</span></span><span class="line"><span class="cl">‚îú‚îÄ‚îÄ deploy.md
</span></span><span class="line"><span class="cl">‚îî‚îÄ‚îÄ docs.md
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="essential-slash-commands-collection">Essential Slash Commands Collection</h3>
<h4 id="1-smart-commit-claudecommandscommitmd">1. Smart Commit (<code>~/.claude/commands/commit.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Create a semantic commit with conventional format
</span></span><span class="line"><span class="cl">allowed-tools: Bash(git diff:*), Bash(git status:*), Bash(git add:*), Bash(git commit:*)
</span></span><span class="line"><span class="cl">model: claude-3-5-haiku-20241022
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Analyze my staged changes and create a commit:
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">1.</span> Run <span class="sb">`git diff --cached`</span> to see staged changes
</span></span><span class="line"><span class="cl"><span class="k">2.</span> Run <span class="sb">`git status`</span> to understand the scope
</span></span><span class="line"><span class="cl"><span class="k">3.</span> Generate a commit message following Conventional Commits:
</span></span><span class="line"><span class="cl">   <span class="k">-</span> feat: new feature
</span></span><span class="line"><span class="cl">   <span class="k">-</span> fix: bug fix
</span></span><span class="line"><span class="cl">   <span class="k">-</span> refactor: code restructuring
</span></span><span class="line"><span class="cl">   <span class="k">-</span> docs: documentation
</span></span><span class="line"><span class="cl">   <span class="k">-</span> test: adding tests
</span></span><span class="line"><span class="cl">   <span class="k">-</span> chore: maintenance
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">4.</span> Format: <span class="sb">`type(scope): brief description`</span>
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Keep under 72 characters
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Use imperative mood (&#34;add&#34; not &#34;added&#34;)
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">5.</span> Ask me to confirm, then commit
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">If no changes are staged, help me stage relevant files first.
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="2-pr-creator-claudecommandsprmd">2. PR Creator (<code>~/.claude/commands/pr.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Create a comprehensive pull request
</span></span><span class="line"><span class="cl">allowed-tools: Bash(git:*), Bash(gh:*)
</span></span><span class="line"><span class="cl">argument-hint: [base-branch]
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Create a pull request against $ARGUMENTS (default: main):
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">1.</span> Run <span class="sb">`git log main..HEAD --oneline`</span> to see commits
</span></span><span class="line"><span class="cl"><span class="k">2.</span> Run <span class="sb">`git diff main...HEAD --stat`</span> for change summary
</span></span><span class="line"><span class="cl"><span class="k">3.</span> Generate PR with:
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Title: conventional format matching primary change
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Description:
</span></span><span class="line"><span class="cl">     ## Summary
</span></span><span class="line"><span class="cl">     [2-3 sentences on what and why]
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">     ## Changes
</span></span><span class="line"><span class="cl">     <span class="k">-</span> [bullet list of key changes]
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">     ## Testing
</span></span><span class="line"><span class="cl">     <span class="k">-</span> [how this was tested]
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">     ## Screenshots
</span></span><span class="line"><span class="cl">     [if UI changes, note that screenshots should be added]
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">4.</span> Use <span class="sb">`gh pr create`</span> with generated content
</span></span><span class="line"><span class="cl"><span class="k">5.</span> Output the PR URL when complete
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="3-deep-investigation-claudecommandsinvestigatemd">3. Deep Investigation (<code>~/.claude/commands/investigate.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Deep dive into a bug or behavior
</span></span><span class="line"><span class="cl">allowed-tools: Read, Grep, Glob, Bash(git log:*), Bash(git blame:*)
</span></span><span class="line"><span class="cl">argument-hint: [issue-description]
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Investigate: $ARGUMENTS
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Follow this systematic process:
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Phase 1: Understand
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> What is the expected behavior?
</span></span><span class="line"><span class="cl"><span class="k">-</span> What is the actual behavior?
</span></span><span class="line"><span class="cl"><span class="k">-</span> When did this start? (check git log if relevant)
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Phase 2: Locate
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> Search for relevant code with Grep
</span></span><span class="line"><span class="cl"><span class="k">-</span> Trace the code path from entry point
</span></span><span class="line"><span class="cl"><span class="k">-</span> Identify all files involved
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Phase 3: Analyze
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> Use git blame to understand history
</span></span><span class="line"><span class="cl"><span class="k">-</span> Look for recent changes that might have caused this
</span></span><span class="line"><span class="cl"><span class="k">-</span> Check for related issues/patterns elsewhere
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Phase 4: Report
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>Provide a structured report:
</span></span><span class="line"><span class="cl"><span class="k">1.</span> <span class="gs">**Root Cause**</span>: [one sentence]
</span></span><span class="line"><span class="cl"><span class="k">2.</span> <span class="gs">**Affected Files**</span>: [list]
</span></span><span class="line"><span class="cl"><span class="k">3.</span> <span class="gs">**Recommended Fix**</span>: [approach]
</span></span><span class="line"><span class="cl"><span class="k">4.</span> <span class="gs">**Risk Assessment**</span>: [what could break]
</span></span><span class="line"><span class="cl"><span class="k">5.</span> <span class="gs">**Test Plan**</span>: [how to verify]
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Do NOT make any changes. Investigation only.
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="4-test-generator-claudecommandstestmd">4. Test Generator (<code>~/.claude/commands/test.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Generate comprehensive tests for a file or function
</span></span><span class="line"><span class="cl">allowed-tools: Read, Write, Bash(npm test:*), Bash(pytest:*)
</span></span><span class="line"><span class="cl">argument-hint: [file-or-function]
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Generate tests for: $ARGUMENTS
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Process:
</span></span></span><span class="line"><span class="cl"><span class="gu"></span> 
</span></span><span class="line"><span class="cl"><span class="k">1.</span> <span class="gs">**Read the target code**</span> - understand all paths and edge cases
</span></span><span class="line"><span class="cl"><span class="k">2.</span> <span class="gs">**Identify test framework**</span> - check existing tests, package.json, pytest.ini
</span></span><span class="line"><span class="cl"><span class="k">3.</span> <span class="gs">**Generate tests covering**</span>:
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Happy path (normal usage)
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Edge cases (empty, null, boundary values)
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Error cases (invalid input, exceptions)
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Integration points (mocks for external deps)
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">4.</span> <span class="gs">**Follow existing patterns**</span> - match style of existing tests
</span></span><span class="line"><span class="cl"><span class="k">5.</span> <span class="gs">**Run the tests**</span> - ensure they pass
</span></span><span class="line"><span class="cl"><span class="k">6.</span> <span class="gs">**Report coverage gaps**</span> - what&#39;s still untested?
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Output format: Create test file(s) following project conventions.
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="5-security-audit-claudecommandssecurity-auditmd">5. Security Audit (<code>~/.claude/commands/security-audit.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Security-focused code review
</span></span><span class="line"><span class="cl">allowed-tools: Read, Grep, Glob
</span></span><span class="line"><span class="cl">argument-hint: [file-or-directory]
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Perform security audit on: $ARGUMENTS
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Check for:
</span></span></span><span class="line"><span class="cl"><span class="gu"></span> 
</span></span><span class="line"><span class="cl"><span class="gu">### Input Validation
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">- [ ]</span> SQL injection vulnerabilities
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> XSS (Cross-Site Scripting)
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Command injection
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Path traversal
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">### Authentication &amp; Authorization
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">- [ ]</span> Hardcoded credentials
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Weak session handling
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Missing auth checks
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Privilege escalation paths
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">### Data Handling
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">- [ ]</span> Sensitive data in logs
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Unencrypted secrets
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> PII exposure
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Insecure deserialization
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">### Dependencies
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">- [ ]</span> Known vulnerable packages
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Outdated dependencies
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Unused dependencies
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Output Format:
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>For each finding:
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Severity**: Critical / High / Medium / Low
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Location**: file:line
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Issue**: description
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Recommendation**: how to fix
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Reference**: CWE or OWASP link if applicable
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="6-refactor-planner-claudecommandsrefactor-planmd">6. Refactor Planner (<code>~/.claude/commands/refactor-plan.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Plan a refactoring without executing it
</span></span><span class="line"><span class="cl">allowed-tools: Read, Grep, Glob
</span></span><span class="line"><span class="cl">argument-hint: [what-to-refactor]
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Plan refactoring for: $ARGUMENTS
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## DO NOT MAKE ANY CHANGES - PLANNING ONLY
</span></span></span><span class="line"><span class="cl"><span class="gu"></span> 
</span></span><span class="line"><span class="cl"><span class="gu">### Analysis Phase:
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">1.</span> Read all relevant files
</span></span><span class="line"><span class="cl"><span class="k">2.</span> Map dependencies (what imports this? what does this import?)
</span></span><span class="line"><span class="cl"><span class="k">3.</span> Identify test coverage
</span></span><span class="line"><span class="cl"><span class="k">4.</span> Note potential breaking changes
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">### Output a Refactoring Plan:
</span></span></span><span class="line"><span class="cl"><span class="gu"></span> 
</span></span><span class="line"><span class="cl">``<span class="sb">`markdown
</span></span></span><span class="line"><span class="cl"><span class="sb"># Refactoring Plan: [title]
</span></span></span><span class="line"><span class="cl"><span class="sb"> 
</span></span></span><span class="line"><span class="cl"><span class="sb">## Current State
</span></span></span><span class="line"><span class="cl"><span class="sb">[Describe the current architecture/code]
</span></span></span><span class="line"><span class="cl"><span class="sb"> 
</span></span></span><span class="line"><span class="cl"><span class="sb">## Desired State
</span></span></span><span class="line"><span class="cl"><span class="sb">[Describe the target architecture/code]
</span></span></span><span class="line"><span class="cl"><span class="sb"> 
</span></span></span><span class="line"><span class="cl"><span class="sb">## Steps (in order)
</span></span></span><span class="line"><span class="cl"><span class="sb">1. [ ] Step 1 - [description] - Risk: Low/Med/High
</span></span></span><span class="line"><span class="cl"><span class="sb">2. [ ] Step 2 - [description] - Risk: Low/Med/High
</span></span></span><span class="line"><span class="cl"><span class="sb">...
</span></span></span><span class="line"><span class="cl"><span class="sb"> 
</span></span></span><span class="line"><span class="cl"><span class="sb">## Files to Modify
</span></span></span><span class="line"><span class="cl"><span class="sb">- `</span>path/to/file.ts<span class="sb">` - [what changes]
</span></span></span><span class="line"><span class="cl"><span class="sb">- `</span>path/to/other.ts<span class="sb">` - [what changes]
</span></span></span><span class="line"><span class="cl"><span class="sb"> 
</span></span></span><span class="line"><span class="cl"><span class="sb">## Files to Create
</span></span></span><span class="line"><span class="cl"><span class="sb">- `</span>path/to/new.ts<span class="sb">` - [purpose]
</span></span></span><span class="line"><span class="cl"><span class="sb"> 
</span></span></span><span class="line"><span class="cl"><span class="sb">## Files to Delete
</span></span></span><span class="line"><span class="cl"><span class="sb">- `</span>path/to/old.ts` - [why safe to delete]
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Tests to Add/Update
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> [list of test changes needed]
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Rollback Plan
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>[How to undo if something goes wrong]
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Estimated Effort
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>[Time estimate]
</span></span></code></pre></td></tr></table>
</div>
</div><p>When I approve, I‚Äôll run a separate command to execute each step.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="o">---</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">## 4. Pattern 3: Hooks for Deterministic Safety</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">### The Problem with --dangerously-skip-permissions</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="n">The</span> <span class="err">`</span><span class="o">--</span><span class="n">dangerously</span><span class="o">-</span><span class="n">skip</span><span class="o">-</span><span class="n">permissions</span><span class="err">`</span> <span class="n">flag</span> <span class="n">is</span> <span class="n">seductive</span><span class="o">.</span> <span class="n">It</span> <span class="n">eliminates</span> <span class="n">the</span> <span class="n">constant</span> <span class="s2">&#34;Can I run X?&#34;</span> <span class="n">prompts</span> <span class="ow">and</span> <span class="n">enables</span> <span class="bp">true</span> <span class="n">flow</span> <span class="n">state</span><span class="o">.</span> <span class="n">But</span> <span class="n">it</span><span class="s1">&#39;s called &#34;dangerous&#34; for a reason‚ÄîClaude can:</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Delete</span> <span class="n">files</span> <span class="n">with</span> <span class="err">`</span><span class="n">rm</span> <span class="o">-</span><span class="n">rf</span><span class="err">`</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Push</span> <span class="n">to</span> <span class="n">git</span> <span class="n">without</span> <span class="n">review</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Run</span> <span class="n">arbitrary</span> <span class="n">shell</span> <span class="n">commands</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Modify</span> <span class="n">system</span> <span class="n">files</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">### The Solution: Guardrails via Hooks</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="n">Hooks</span> <span class="n">let</span> <span class="n">you</span> <span class="n">intercept</span> <span class="n">Claude</span><span class="s1">&#39;s actions at various lifecycle points and apply your own rules. The pattern:</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                                             ‚îÇ
‚îÇ   ‚Äìdangerously-skip-permissions    +    Safety Hooks       ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ        (Flow State)                    (Guardrails)         ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ                    = Safe YOLO Mode                         ‚îÇ
‚îÇ                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">### Hook Configuration
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Location: `~/.claude/settings.json` or `.claude/settings.json`
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">#### Complete Safety Hook Configuration
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">```json
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;hooks&#34;: {
</span></span><span class="line"><span class="cl">    &#34;PreToolUse&#34;: [
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;matcher&#34;: &#34;Bash&#34;,
</span></span><span class="line"><span class="cl">        &#34;hooks&#34;: [
</span></span><span class="line"><span class="cl">          {
</span></span><span class="line"><span class="cl">            &#34;type&#34;: &#34;command&#34;,
</span></span><span class="line"><span class="cl">            &#34;command&#34;: &#34;~/.claude/hooks/bash-safety.sh&#34;
</span></span><span class="line"><span class="cl">          }
</span></span><span class="line"><span class="cl">        ]
</span></span><span class="line"><span class="cl">      },
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;matcher&#34;: &#34;Write&#34;,
</span></span><span class="line"><span class="cl">        &#34;hooks&#34;: [
</span></span><span class="line"><span class="cl">          {
</span></span><span class="line"><span class="cl">            &#34;type&#34;: &#34;command&#34;,
</span></span><span class="line"><span class="cl">            &#34;command&#34;: &#34;~/.claude/hooks/write-safety.sh&#34;
</span></span><span class="line"><span class="cl">          }
</span></span><span class="line"><span class="cl">        ]
</span></span><span class="line"><span class="cl">      }
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">    &#34;PostToolUse&#34;: [
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;matcher&#34;: &#34;Write(*.py)&#34;,
</span></span><span class="line"><span class="cl">        &#34;hooks&#34;: [
</span></span><span class="line"><span class="cl">          {
</span></span><span class="line"><span class="cl">            &#34;type&#34;: &#34;command&#34;,
</span></span><span class="line"><span class="cl">            &#34;command&#34;: &#34;python -m black \&#34;$CLAUDE_FILE_PATHS\&#34;&#34;
</span></span><span class="line"><span class="cl">          }
</span></span><span class="line"><span class="cl">        ]
</span></span><span class="line"><span class="cl">      },
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;matcher&#34;: &#34;Write(*.ts)&#34;,
</span></span><span class="line"><span class="cl">        &#34;hooks&#34;: [
</span></span><span class="line"><span class="cl">          {
</span></span><span class="line"><span class="cl">            &#34;type&#34;: &#34;command&#34;,
</span></span><span class="line"><span class="cl">            &#34;command&#34;: &#34;npx prettier --write \&#34;$CLAUDE_FILE_PATHS\&#34;&#34;
</span></span><span class="line"><span class="cl">          }
</span></span><span class="line"><span class="cl">        ]
</span></span><span class="line"><span class="cl">      },
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;matcher&#34;: &#34;Write(*.tsx)&#34;,
</span></span><span class="line"><span class="cl">        &#34;hooks&#34;: [
</span></span><span class="line"><span class="cl">          {
</span></span><span class="line"><span class="cl">            &#34;type&#34;: &#34;command&#34;,
</span></span><span class="line"><span class="cl">            &#34;command&#34;: &#34;npx prettier --write \&#34;$CLAUDE_FILE_PATHS\&#34; &amp;&amp; npx tsc --noEmit \&#34;$CLAUDE_FILE_PATHS\&#34; 2&gt;&amp;1 || echo &#39;‚ö†Ô∏è TypeScript errors&#39;&#34;
</span></span><span class="line"><span class="cl">          }
</span></span><span class="line"><span class="cl">        ]
</span></span><span class="line"><span class="cl">      }
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">    &#34;Stop&#34;: [
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;matcher&#34;: &#34;*&#34;,
</span></span><span class="line"><span class="cl">        &#34;hooks&#34;: [
</span></span><span class="line"><span class="cl">          {
</span></span><span class="line"><span class="cl">            &#34;type&#34;: &#34;command&#34;,
</span></span><span class="line"><span class="cl">            &#34;command&#34;: &#34;~/.claude/hooks/session-summary.sh&#34;
</span></span><span class="line"><span class="cl">          }
</span></span><span class="line"><span class="cl">        ]
</span></span><span class="line"><span class="cl">      }
</span></span><span class="line"><span class="cl">    ]
</span></span><span class="line"><span class="cl">  }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="bash-safety-hook-claudehooksbash-safetysh">Bash Safety Hook (<code>~/.claude/hooks/bash-safety.sh</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span> 
</span></span><span class="line"><span class="cl"><span class="c1"># Read the tool input from stdin</span>
</span></span><span class="line"><span class="cl"><span class="nv">INPUT</span><span class="o">=</span><span class="k">$(</span>cat<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">COMMAND</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$INPUT</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.tool_input.command // empty&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># Define dangerous patterns</span>
</span></span><span class="line"><span class="cl"><span class="nv">DANGEROUS_PATTERNS</span><span class="o">=(</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;rm -rf /&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;rm -rf ~&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;rm -rf \$HOME&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;rm -rf \*&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&gt; /dev/sd&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;mkfs&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;dd if=&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;:(){:|:&amp;};:&#34;</span>         <span class="c1"># Fork bomb</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;chmod -R 777 /&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;chown -R&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;curl.*| bash&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;wget.*| bash&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;curl.*| sh&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;wget.*| sh&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;git push.*--force&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;git push.*-f&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;DROP TABLE&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;DROP DATABASE&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;DELETE FROM.*WHERE 1&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;npm publish&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;pip upload&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">)</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># Check each pattern</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> pattern in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">DANGEROUS_PATTERNS</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$COMMAND</span><span class="s2">&#34;</span> <span class="p">|</span> grep -qE <span class="s2">&#34;</span><span class="nv">$pattern</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s1">&#39;{&#34;decision&#34;: &#34;block&#34;, &#34;reason&#34;: &#34;Blocked dangerous command pattern: &#39;</span><span class="s2">&#34;</span><span class="nv">$pattern</span><span class="s2">&#34;</span><span class="s1">&#39;&#34;}&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">exit</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># Block operations outside project directory (optional)</span>
</span></span><span class="line"><span class="cl"><span class="nv">PROJECT_DIR</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$COMMAND</span><span class="s2">&#34;</span> <span class="p">|</span> grep -qE <span class="s2">&#34;cd\s+[^.]|cd\s+/(?!home)&#34;</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s1">&#39;{&#34;decision&#34;: &#34;ask&#34;, &#34;reason&#34;: &#34;Command navigates outside project directory&#34;}&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">exit</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># Allow command to proceed</span>
</span></span><span class="line"><span class="cl"><span class="nb">exit</span> <span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="write-safety-hook-claudehookswrite-safetysh">Write Safety Hook (<code>~/.claude/hooks/write-safety.sh</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span> 
</span></span><span class="line"><span class="cl"><span class="nv">INPUT</span><span class="o">=</span><span class="k">$(</span>cat<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">FILE_PATH</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$INPUT</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.tool_input.file_path // empty&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># Protected paths</span>
</span></span><span class="line"><span class="cl"><span class="nv">PROTECTED_PATTERNS</span><span class="o">=(</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^/etc/&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^/usr/&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^/bin/&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^/sbin/&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^\\.env</span>$<span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^\\.env\\.&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^.*\\.pem</span>$<span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^.*\\.key</span>$<span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^.*_rsa</span>$<span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^package-lock\\.json</span>$<span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^yarn\\.lock</span>$<span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;^pnpm-lock\\.yaml</span>$<span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">)</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">for</span> pattern in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">PROTECTED_PATTERNS</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$FILE_PATH</span><span class="s2">&#34;</span> <span class="p">|</span> grep -qE <span class="s2">&#34;</span><span class="nv">$pattern</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="s1">&#39;{&#34;decision&#34;: &#34;ask&#34;, &#34;reason&#34;: &#34;Protected file: &#39;</span><span class="s2">&#34;</span><span class="nv">$FILE_PATH</span><span class="s2">&#34;</span><span class="s1">&#39;&#34;}&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">exit</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="nb">exit</span> <span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="session-summary-hook-claudehookssession-summarysh">Session Summary Hook (<code>~/.claude/hooks/session-summary.sh</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span> 
</span></span><span class="line"><span class="cl"><span class="c1"># Log session end with summary</span>
</span></span><span class="line"><span class="cl"><span class="nv">TIMESTAMP</span><span class="o">=</span><span class="k">$(</span>date +%Y-%m-%d_%H:%M:%S<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">LOG_FILE</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$HOME</span><span class="s2">/.claude/session-logs/</span><span class="nv">$TIMESTAMP</span><span class="s2">.log&#34;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">mkdir -p <span class="s2">&#34;</span><span class="nv">$HOME</span><span class="s2">/.claude/session-logs&#34;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># Get git diff if in a repo</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> git rev-parse --git-dir &gt; /dev/null 2&gt;<span class="p">&amp;</span>1<span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;=== Session End: </span><span class="nv">$TIMESTAMP</span><span class="s2"> ===&#34;</span> &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;&#34;</span> &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;=== Files Changed ===&#34;</span> &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    git diff --name-only &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;&#34;</span> &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;=== Diff Summary ===&#34;</span> &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    git diff --stat &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="nb">exit</span> <span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="making-hooks-executable">Making Hooks Executable</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod +x ~/.claude/hooks/*.sh
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="the-safe-yolo-alias">The ‚ÄúSafe YOLO‚Äù Alias</h3>
<p>Add to your shell config (<code>~/.bashrc</code> or <code>~/.zshrc</code>):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Safe YOLO mode - permissions skipped but hooks protect you</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> claude-yolo<span class="o">=</span><span class="s2">&#34;claude --dangerously-skip-permissions&#34;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># Extra safe - also run in Docker</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> claude-sandbox<span class="o">=</span><span class="s2">&#34;docker run -it -v </span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">:/workspace anthropic/claude-code --dangerously-skip-permissions&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="5-pattern-4-context-hygiene">5. Pattern 4: Context Hygiene</h2>
<h3 id="understanding-context-degradation">Understanding Context Degradation</h3>
<p>Context isn‚Äôt just about running out of tokens‚Äîquality degrades long before you hit limits:</p>
<table>
  <thead>
      <tr>
          <th>Context %</th>
          <th>Quality</th>
          <th>Recommendation</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>0-40%</td>
          <td>Excellent</td>
          <td>Full attention, great recall</td>
      </tr>
      <tr>
          <td>40-60%</td>
          <td>Good</td>
          <td>Start being selective about new context</td>
      </tr>
      <tr>
          <td>60-80%</td>
          <td>Degraded</td>
          <td>‚ÄúLost in the middle‚Äù effects begin</td>
      </tr>
      <tr>
          <td>80-95%</td>
          <td>Poor</td>
          <td>Frequent mistakes, forgotten instructions</td>
      </tr>
      <tr>
          <td>95-100%</td>
          <td>Critical</td>
          <td>Auto-compact triggers, context lost</td>
      </tr>
  </tbody>
</table>
<h3 id="disable-auto-compact">Disable Auto-Compact</h3>
<p>Auto-compact is convenient but opaque. You don‚Äôt control what gets summarized, and critical details can be lost.</p>
<p><strong>Recommendation</strong>: Manage compaction manually.</p>
<p>Add to your <code>CLAUDE.md</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl"><span class="gu">## Context Management Rules
</span></span></span><span class="line"><span class="cl"><span class="gu"></span> 
</span></span><span class="line"><span class="cl"><span class="k">-</span> NEVER auto-compact. I will manage context manually.
</span></span><span class="line"><span class="cl"><span class="k">-</span> When context exceeds 70%, warn me immediately.
</span></span><span class="line"><span class="cl"><span class="k">-</span> Include a &#34;Context: XX%&#34; note in your responses when above 50%.
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="the-context-status-pattern">The /context Status Pattern</h3>
<p>Create <code>~/.claude/commands/status.md</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Show current context status and recommendations
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Provide a context status report:
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Context Status
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> **Current Usage**: [X]% of context window
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Estimated Tokens**: [X]k / 200k
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Files in Context**: [list main files]
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Conversation Turns**: [X]
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Health Assessment
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">- [ ]</span> Under 50%: ‚úÖ Healthy
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> 50-70%: ‚ö†Ô∏è Consider clearing soon
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Over 70%: üî¥ Clear recommended
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Recommendations
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>[If over 50%, suggest what could be cleared or compacted]
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Key Context to Preserve
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>[List the most important things that should survive a /clear]
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="the-double-escape-time-travel-pattern">The ‚ÄúDouble-Escape Time Travel‚Äù Pattern</h3>
<p>This is the most underutilized feature in Claude Code:</p>
<ol>
<li><strong>Press Escape once</strong>: Interrupts current Claude operation</li>
<li><strong>Press Escape twice</strong>: Opens the <strong>Rewind</strong> interface</li>
</ol>
<p>The Rewind interface lets you:</p>
<ul>
<li>See your full conversation history with diffs</li>
<li>Select ANY previous point to restore to</li>
<li>Restore BOTH code AND conversation state</li>
<li>Explore alternative approaches without losing work</li>
</ul>
<h3 id="context-management-workflow">Context Management Workflow</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
</span></span><span class="line"><span class="cl">‚îÇ                                                             ‚îÇ
</span></span><span class="line"><span class="cl">‚îÇ   1. Start Fresh: /clear                                    ‚îÇ
</span></span><span class="line"><span class="cl">‚îÇ      ‚îî‚îÄ‚îÄ Begin with clean context                           ‚îÇ
</span></span><span class="line"><span class="cl">‚îÇ                                                             ‚îÇ
</span></span><span class="line"><span class="cl">‚îÇ   2. Work Phase: Write code, iterate                        ‚îÇ
</span></span><span class="line"><span class="cl">‚îÇ      ‚îî‚îÄ‚îÄ Monitor: &#34;what&#39;s my context usage?&#34;                ‚îÇ
</span></span><span class="line"><span class="cl">‚îÇ                                                             ‚îÇ
</span></span><span class="line"><span class="cl">‚îÇ   3. Checkpoint (at 50%): Document state                    ‚îÇ
</span></span><span class="line"><span class="cl">‚îÇ      ‚îî‚îÄ‚îÄ Save important decisions to CLAUDE.md or notes     ‚îÇ
</span></span><span class="line"><span class="cl">‚îÇ                                                             ‚îÇ
</span></span><span class="line"><span class="cl">‚îÇ   4. Continue or Clear (at 70%):                            ‚îÇ
</span></span><span class="line"><span class="cl">‚îÇ      ‚îú‚îÄ‚îÄ Option A: /compact with specific instructions      ‚îÇ
</span></span><span class="line"><span class="cl">‚îÇ      ‚îî‚îÄ‚îÄ Option B: /clear + restore from notes              ‚îÇ
</span></span><span class="line"><span class="cl">‚îÇ                                                             ‚îÇ
</span></span><span class="line"><span class="cl">‚îÇ   5. Emergency: Double-Escape                               ‚îÇ
</span></span><span class="line"><span class="cl">‚îÇ      ‚îî‚îÄ‚îÄ Rewind to any previous state                       ‚îÇ
</span></span><span class="line"><span class="cl">‚îÇ                                                             ‚îÇ
</span></span><span class="line"><span class="cl">‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="smart-compaction-command">Smart Compaction Command</h3>
<p>Create <code>~/.claude/commands/smart-compact.md</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Compact context with explicit preservation rules
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Perform a smart compaction:
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## MUST PRESERVE (never summarize away):
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">1.</span> Current task/goal
</span></span><span class="line"><span class="cl"><span class="k">2.</span> All file paths mentioned in last 10 messages
</span></span><span class="line"><span class="cl"><span class="k">3.</span> Any explicit decisions or constraints I stated
</span></span><span class="line"><span class="cl"><span class="k">4.</span> Error messages and their solutions
</span></span><span class="line"><span class="cl"><span class="k">5.</span> The current plan/checklist if one exists
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## CAN SUMMARIZE:
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">1.</span> Exploration that led to dead ends
</span></span><span class="line"><span class="cl"><span class="k">2.</span> Verbose output from commands (keep just the conclusion)
</span></span><span class="line"><span class="cl"><span class="k">3.</span> File contents that haven&#39;t been modified
</span></span><span class="line"><span class="cl"><span class="k">4.</span> General discussion that led to decisions (keep just decisions)
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## FORMAT:
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>After compaction, start your next message with:
</span></span></code></pre></td></tr></table>
</div>
</div><p>üì¶ Context compacted. Preserved:</p>
<ul>
<li>[key item 1]</li>
<li>[key item 2]</li>
<li>[current goal]</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Now perform /compact with these rules in mind.
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="6-pattern-5-subagent-control">6. Pattern 5: Subagent Control</h2>
<h3 id="the-default-problem">The Default Problem</h3>
<p>Claude Code spawns subagents for various tasks, but by default may use cheaper/faster models (Sonnet, Haiku) even when you‚Äôre paying for Opus. This leads to:</p>
<ul>
<li>Lower quality analysis for ‚Äúresearch‚Äù tasks</li>
<li>Inconsistent code quality between main agent and subagents</li>
<li>Wasted context when subagent returns poor results</li>
</ul>
<h3 id="force-opus-subagents">Force Opus Subagents</h3>
<p>Add to your global <code>~/.claude/CLAUDE.md</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl"><span class="gu">## Subagent Rules
</span></span></span><span class="line"><span class="cl"><span class="gu"></span> 
</span></span><span class="line"><span class="cl"><span class="k">-</span> **ALWAYS use Opus for subagents** unless I explicitly request otherwise
</span></span><span class="line"><span class="cl"><span class="k">-</span> Subagents should be used for:
</span></span><span class="line"><span class="cl">  <span class="k">-</span> Research and investigation tasks
</span></span><span class="line"><span class="cl">  <span class="k">-</span> Parallel analysis of multiple files
</span></span><span class="line"><span class="cl">  <span class="k">-</span> Code review of changes
</span></span><span class="line"><span class="cl">  <span class="k">-</span> Test generation
</span></span><span class="line"><span class="cl">  <span class="k">-</span> Documentation writing
</span></span><span class="line"><span class="cl"><span class="k">-</span> Before spawning a subagent, tell me what it will do
</span></span><span class="line"><span class="cl"><span class="k">-</span> After subagent completes, summarize its findings concisely
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="custom-subagent-collection">Custom Subagent Collection</h3>
<p>Create specialized subagents in <code>~/.claude/agents/</code>:</p>
<h4 id="code-reviewer-claudeagentscode-reviewermd">Code Reviewer (<code>~/.claude/agents/code-reviewer.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">name: code-reviewer
</span></span><span class="line"><span class="cl">description: Expert code review focusing on bugs, security, and maintainability
</span></span><span class="line"><span class="cl">tools: Read, Grep, Glob
</span></span><span class="line"><span class="cl">model: opus
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">You are a senior code reviewer with expertise in:
</span></span><span class="line"><span class="cl"><span class="k">-</span> Security vulnerabilities
</span></span><span class="line"><span class="cl"><span class="k">-</span> Performance issues  
</span></span><span class="line"><span class="cl"><span class="k">-</span> Code maintainability
</span></span><span class="line"><span class="cl"><span class="k">-</span> Testing gaps
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">When reviewing code:
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">1.</span> <span class="gs">**First Pass - Critical Issues**</span>
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Security vulnerabilities (injection, auth, data exposure)
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Logic errors that could cause bugs
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Race conditions or concurrency issues
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">2.</span> <span class="gs">**Second Pass - Quality Issues**</span>
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Code duplication
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Complex functions that need refactoring
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Missing error handling
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Unclear naming
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">3.</span> <span class="gs">**Third Pass - Suggestions**</span>
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Performance improvements
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Better patterns/abstractions
</span></span><span class="line"><span class="cl">   <span class="k">-</span> Documentation needs
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Output format:
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="critical-">Critical üî¥</h2>
<ul>
<li>[file:line] Issue description</li>
</ul>
<h2 id="important-">Important üü°</h2>
<ul>
<li>[file:line] Issue description</li>
</ul>
<h2 id="suggestions-">Suggestions üü¢</h2>
<ul>
<li>[file:line] Suggestion</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Be specific. Include line numbers. Suggest fixes.
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="test-writer-claudeagentstest-writermd">Test Writer (<code>~/.claude/agents/test-writer.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">name: test-writer
</span></span><span class="line"><span class="cl">description: Writes comprehensive tests with edge case coverage
</span></span><span class="line"><span class="cl">tools: Read, Write, Bash
</span></span><span class="line"><span class="cl">model: opus
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">You are a testing expert. When writing tests:
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Principles
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">1.</span> <span class="gs">**Test behavior, not implementation**</span>
</span></span><span class="line"><span class="cl"><span class="k">2.</span> <span class="gs">**One assertion per test**</span> (when practical)
</span></span><span class="line"><span class="cl"><span class="k">3.</span> <span class="gs">**Descriptive test names**</span>: &#34;should_return_empty_array_when_input_is_null&#34;
</span></span><span class="line"><span class="cl"><span class="k">4.</span> <span class="gs">**Arrange-Act-Assert**</span> structure
</span></span><span class="line"><span class="cl"><span class="k">5.</span> <span class="gs">**Cover edge cases systematically**</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Edge Case Checklist
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">- [ ]</span> Null/undefined inputs
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Empty strings/arrays/objects
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Boundary values (0, -1, MAX_INT)
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Invalid types
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Unicode/special characters
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Concurrent access (if applicable)
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Error conditions
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Test Structure
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>describe(‚Äô[Unit Under Test]‚Äô, () =&gt; {
describe(‚Äô[Method/Function]‚Äô, () =&gt; {
describe(‚Äòwhen [condition]‚Äô, () =&gt; {
it(‚Äòshould [expected behavior]‚Äô, () =&gt; {
// Arrange
// Act<br>
// Assert
});
});
});
});</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Match existing test patterns in the codebase.
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="architecture-analyst-claudeagentsarchitectmd">Architecture Analyst (<code>~/.claude/agents/architect.md</code>)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">name: architect
</span></span><span class="line"><span class="cl">description: Analyzes codebase architecture and suggests improvements
</span></span><span class="line"><span class="cl">tools: Read, Grep, Glob
</span></span><span class="line"><span class="cl">model: opus
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">You are a software architect. When analyzing code:
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Analysis Framework
</span></span></span><span class="line"><span class="cl"><span class="gu"></span> 
</span></span><span class="line"><span class="cl"><span class="gu">### 1. Dependency Analysis
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> Map module dependencies
</span></span><span class="line"><span class="cl"><span class="k">-</span> Identify circular dependencies
</span></span><span class="line"><span class="cl"><span class="k">-</span> Find highly-coupled components
</span></span><span class="line"><span class="cl"><span class="k">-</span> Locate god objects/modules
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">### 2. Pattern Recognition
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> What architectural patterns are used?
</span></span><span class="line"><span class="cl"><span class="k">-</span> Are they applied consistently?
</span></span><span class="line"><span class="cl"><span class="k">-</span> What patterns are missing that would help?
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">### 3. Scalability Assessment
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> Bottleneck identification
</span></span><span class="line"><span class="cl"><span class="k">-</span> Horizontal scaling readiness
</span></span><span class="line"><span class="cl"><span class="k">-</span> Database/storage patterns
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">### 4. Maintainability Score
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>Rate 1-10 with justification:
</span></span><span class="line"><span class="cl"><span class="k">-</span> Code organization
</span></span><span class="line"><span class="cl"><span class="k">-</span> Separation of concerns
</span></span><span class="line"><span class="cl"><span class="k">-</span> Test coverage
</span></span><span class="line"><span class="cl"><span class="k">-</span> Documentation
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Output Format
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>```markdown
</span></span><span class="line"><span class="cl"><span class="gh"># Architecture Analysis: [Component/System]
</span></span></span><span class="line"><span class="cl"><span class="gh"></span> 
</span></span><span class="line"><span class="cl"><span class="gu">## Current State
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>[Diagram or description]
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Strengths
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>- 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Concerns
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Recommendations
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">1.</span> [Priority] Description
</span></span><span class="line"><span class="cl"><span class="k">2.</span> [Priority] Description
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Suggested Refactoring Roadmap
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>Phase 1: [Quick wins]
</span></span><span class="line"><span class="cl">Phase 2: [Medium effort]
</span></span><span class="line"><span class="cl">Phase 3: [Major refactoring]
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">### Orchestrator Pattern
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">For complex tasks, use a main agent + specialized subagents:
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Main Agent (Opus)                       ‚îÇ
‚îÇ                     - Task planning                         ‚îÇ
‚îÇ                     - Decision making                       ‚îÇ
‚îÇ                     - Result synthesis                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   ‚îÇ                   ‚îÇ
‚ñº                   ‚ñº                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ code-reviewer‚îÇ     ‚îÇ test-writer ‚îÇ     ‚îÇ  architect  ‚îÇ
‚îÇ   (Opus)    ‚îÇ     ‚îÇ   (Opus)    ‚îÇ     ‚îÇ   (Opus)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1">### Subagent Monitoring Dashboard</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="n">See</span> <span class="p">[</span><span class="n">Section</span> <span class="mi">8</span><span class="p">](</span><span class="c1">#8-subagent-monitoring-dashboard) for complete implementation.</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="o">---</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">## 7. Pattern 6: The Reprompter System</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">### The Problem with Typing Prompts</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">High</span><span class="o">-</span><span class="n">quality</span> <span class="n">prompts</span> <span class="n">take</span> <span class="n">time</span> <span class="n">to</span> <span class="n">type</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Typing</span> <span class="n">interrupts</span> <span class="n">flow</span> <span class="n">state</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Easy</span> <span class="n">to</span> <span class="n">forget</span> <span class="n">important</span> <span class="n">constraints</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Inconsistent</span> <span class="n">prompt</span> <span class="n">quality</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">### The Solution: Voice ‚Üí Structure Pipeline</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Voice     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Clarifying  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Structured  ‚îÇ
‚îÇ  Dictation   ‚îÇ     ‚îÇ  Questions   ‚îÇ     ‚îÇ    Prompt    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ                     ‚îÇ                     ‚îÇ
‚îÇ                     ‚îÇ                     ‚îÇ
Raw idea            Refinement            XML-tagged
(messy)              (dialog)             (optimal)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1">### Implementation</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">#### 1. Voice Input Setup</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="n">Use</span> <span class="n">your</span> <span class="ne">OS</span> <span class="n">dictation</span> <span class="ow">or</span> <span class="n">a</span> <span class="k">tool</span> <span class="n">like</span><span class="p">:</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">macOS</span><span class="p">:</span> <span class="n">Built</span><span class="o">-</span><span class="ow">in</span> <span class="n">dictation</span> <span class="p">(</span><span class="n">Fn</span> <span class="n">Fn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Windows</span><span class="p">:</span> <span class="n">Windows</span> <span class="n">Speech</span> <span class="n">Recognition</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Cross</span><span class="o">-</span><span class="n">platform</span><span class="p">:</span> <span class="n">Whisper</span> <span class="n">API</span><span class="p">,</span> <span class="n">Talon</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">#### 2. Reprompter Command (`~/.claude/commands/reprompt.md`)</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="err">```</span><span class="n">markdown</span>
</span></span><span class="line"><span class="cl"><span class="o">---</span>
</span></span><span class="line"><span class="cl"><span class="n">description</span><span class="p">:</span> <span class="n">Convert</span> <span class="n">rough</span> <span class="n">voice</span> <span class="n">input</span> <span class="n">into</span> <span class="n">a</span> <span class="n">structured</span> <span class="n">prompt</span>
</span></span><span class="line"><span class="cl"><span class="n">argument</span><span class="o">-</span><span class="n">hint</span><span class="p">:</span> <span class="p">[</span><span class="n">rough</span><span class="o">-</span><span class="n">idea</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">---</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="n">I</span><span class="s1">&#39;m going to give you a rough, voice-dictated idea. Your job is to:</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">## Step 1: Understand</span>
</span></span><span class="line"><span class="cl"><span class="n">Ask</span> <span class="n">me</span> <span class="n">clarifying</span> <span class="n">questions</span> <span class="n">to</span> <span class="n">understand</span><span class="p">:</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">What</span> <span class="n">is</span> <span class="n">the</span> <span class="n">specific</span> <span class="n">goal</span><span class="err">?</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">What</span> <span class="n">are</span> <span class="n">the</span> <span class="n">constraints</span><span class="err">?</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">What</span> <span class="n">does</span> <span class="n">success</span> <span class="n">look</span> <span class="n">like</span><span class="err">?</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">What</span> <span class="n">context</span> <span class="k">do</span> <span class="n">I</span> <span class="n">need</span> <span class="n">to</span> <span class="n">provide</span><span class="err">?</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="n">Ask</span> <span class="n">ONE</span> <span class="n">question</span> <span class="n">at</span> <span class="n">a</span> <span class="n">time</span><span class="o">.</span> <span class="n">Wait</span> <span class="k">for</span> <span class="n">my</span> <span class="n">answer</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">## Step 2: Structure</span>
</span></span><span class="line"><span class="cl"><span class="n">Once</span> <span class="n">you</span> <span class="n">understand</span><span class="p">,</span> <span class="n">create</span> <span class="n">a</span> <span class="n">structured</span> <span class="n">prompt</span> <span class="n">using</span> <span class="n">this</span> <span class="n">format</span><span class="p">:</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="err">```</span><span class="n">xml</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">task</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">goal</span><span class="o">&gt;</span><span class="p">[</span><span class="n">Clear</span><span class="p">,</span> <span class="n">specific</span> <span class="n">objective</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">goal</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">context</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">files</span><span class="o">&gt;</span><span class="p">[</span><span class="n">Relevant</span> <span class="n">files</span> <span class="n">to</span> <span class="n">read</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">files</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">background</span><span class="o">&gt;</span><span class="p">[</span><span class="n">Key</span> <span class="n">context</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">background</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;/</span><span class="n">context</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">constraints</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">must</span><span class="o">&gt;</span><span class="p">[</span><span class="n">Required</span> <span class="n">elements</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">must</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">must_not</span><span class="o">&gt;</span><span class="p">[</span><span class="n">Forbidden</span> <span class="n">elements</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">must_not</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;/</span><span class="n">constraints</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">output</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">format</span><span class="o">&gt;</span><span class="p">[</span><span class="n">Expected</span> <span class="n">output</span> <span class="n">format</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">format</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">success_criteria</span><span class="o">&gt;</span><span class="p">[</span><span class="n">How</span> <span class="n">to</span> <span class="n">verify</span> <span class="n">success</span><span class="p">]</span><span class="o">&lt;/</span><span class="n">success_criteria</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;/</span><span class="n">output</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">task</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="step-3-confirm">Step 3: Confirm</h2>
<p>Show me the structured prompt and ask if it captures my intent correctly.</p>
<hr>
<p>My rough idea: $ARGUMENTS</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">#### 3. Quick Reprompt for Simple Tasks
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Create `~/.claude/commands/qr.md` (quick reprompt):
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">```markdown
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">description: Quick reprompt - one clarifying question, then execute
</span></span><span class="line"><span class="cl">argument-hint: [task]
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Task: $ARGUMENTS
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Before executing, ask me ONE clarifying question to ensure you understand the most critical aspect of this task. 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">After I answer, proceed with execution.
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="example-session">Example Session</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">You</span><span class="p">:</span> <span class="o">/</span><span class="n">reprompt</span> <span class="n">I</span> <span class="n">need</span> <span class="n">to</span> <span class="n">like</span> <span class="n">refactor</span> <span class="n">the</span> <span class="n">auth</span> <span class="n">thing</span> <span class="n">to</span> <span class="n">use</span> <span class="n">that</span> <span class="n">new</span> <span class="n">pattern</span> <span class="n">we</span> <span class="n">discussed</span><span class="p">,</span> <span class="n">you</span> <span class="n">know</span> <span class="n">the</span> <span class="n">one</span> <span class="n">with</span> <span class="n">the</span> <span class="n">middleware</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="n">Claude</span><span class="p">:</span> <span class="n">I</span> <span class="n">want</span> <span class="n">to</span> <span class="n">make</span> <span class="n">sure</span> <span class="n">I</span> <span class="n">understand</span> <span class="n">correctly</span><span class="o">.</span> <span class="n">When</span> <span class="n">you</span> <span class="n">say</span> <span class="s2">&#34;the new pattern with middleware,&#34;</span> <span class="n">are</span> <span class="n">you</span> <span class="n">referring</span> <span class="n">to</span><span class="p">:</span>
</span></span><span class="line"><span class="cl"><span class="mf">1.</span> <span class="n">A</span> <span class="n">specific</span> <span class="n">middleware</span> <span class="n">pattern</span> <span class="n">we</span> <span class="n">discussed</span> <span class="n">earlier</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">session</span><span class="err">?</span>
</span></span><span class="line"><span class="cl"><span class="mf">2.</span> <span class="n">A</span> <span class="n">pattern</span> <span class="n">documented</span> <span class="n">somewhere</span> <span class="ow">in</span> <span class="n">your</span> <span class="n">codebase</span><span class="err">?</span>
</span></span><span class="line"><span class="cl"><span class="mf">3.</span> <span class="n">A</span> <span class="n">general</span> <span class="n">middleware</span> <span class="n">authentication</span> <span class="n">pattern</span> <span class="p">(</span><span class="n">like</span> <span class="n">JWT</span> <span class="n">validation</span> <span class="n">middleware</span><span class="p">)</span><span class="err">?</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="n">You</span><span class="p">:</span> <span class="n">Number</span> <span class="mi">2</span><span class="p">,</span> <span class="n">it</span><span class="s1">&#39;s in docs/auth-v2.md</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="n">Claude</span><span class="p">:</span> <span class="n">Got</span> <span class="n">it</span><span class="o">.</span> <span class="n">One</span> <span class="n">more</span> <span class="n">question</span><span class="p">:</span> <span class="n">Should</span> <span class="n">this</span> <span class="n">refactoring</span><span class="p">:</span>
</span></span><span class="line"><span class="cl"><span class="n">A</span><span class="p">)</span> <span class="n">Replace</span> <span class="n">the</span> <span class="n">existing</span> <span class="n">auth</span> <span class="n">system</span> <span class="n">entirely</span>
</span></span><span class="line"><span class="cl"><span class="n">B</span><span class="p">)</span> <span class="n">Run</span> <span class="n">alongside</span> <span class="n">it</span> <span class="n">temporarily</span> <span class="p">(</span><span class="n">migration</span> <span class="n">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">C</span><span class="p">)</span> <span class="n">Just</span> <span class="n">update</span> <span class="n">specific</span> <span class="n">components</span><span class="err">?</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="n">You</span><span class="p">:</span> <span class="n">A</span><span class="p">,</span> <span class="n">full</span> <span class="n">replacement</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="n">Claude</span><span class="p">:</span> <span class="n">Here</span><span class="s1">&#39;s your structured prompt:</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">task</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">goal</span><span class="o">&gt;</span><span class="n">Refactor</span> <span class="n">authentication</span> <span class="n">system</span> <span class="n">to</span> <span class="n">use</span> <span class="n">the</span> <span class="n">pattern</span> <span class="n">defined</span> <span class="ow">in</span> <span class="n">docs</span><span class="o">/</span><span class="n">auth</span><span class="o">-</span><span class="n">v2</span><span class="o">.</span><span class="n">md</span><span class="o">&lt;/</span><span class="n">goal</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">context</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">files</span><span class="o">&gt;</span><span class="n">docs</span><span class="o">/</span><span class="n">auth</span><span class="o">-</span><span class="n">v2</span><span class="o">.</span><span class="n">md</span><span class="p">,</span> <span class="n">src</span><span class="o">/</span><span class="n">auth</span><span class="o">/**</span><span class="p">,</span> <span class="n">src</span><span class="o">/</span><span class="n">middleware</span><span class="o">/**&lt;/</span><span class="n">files</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">background</span><span class="o">&gt;</span><span class="n">Full</span> <span class="n">replacement</span> <span class="n">of</span> <span class="n">existing</span> <span class="n">auth</span> <span class="o">-</span> <span class="n">no</span> <span class="n">parallel</span> <span class="n">running</span><span class="o">&lt;/</span><span class="n">background</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;/</span><span class="n">context</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">constraints</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">must</span><span class="o">&gt;</span><span class="n">Follow</span> <span class="n">patterns</span> <span class="n">exactly</span> <span class="n">as</span> <span class="n">documented</span> <span class="ow">in</span> <span class="n">auth</span><span class="o">-</span><span class="n">v2</span><span class="o">.</span><span class="n">md</span><span class="o">&lt;/</span><span class="n">must</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">must</span><span class="o">&gt;</span><span class="n">Maintain</span> <span class="n">all</span> <span class="n">existing</span> <span class="n">auth</span><span class="o">-</span><span class="n">protected</span> <span class="n">routes</span><span class="o">&lt;/</span><span class="n">must</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">must</span><span class="o">&gt;</span><span class="n">Include</span> <span class="n">migration</span> <span class="k">for</span> <span class="n">existing</span> <span class="n">user</span> <span class="n">sessions</span><span class="o">&lt;/</span><span class="n">must</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">must_not</span><span class="o">&gt;</span><span class="n">Leave</span> <span class="n">any</span> <span class="n">deprecated</span> <span class="n">auth</span> <span class="n">code</span> <span class="n">active</span><span class="o">&lt;/</span><span class="n">must_not</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;/</span><span class="n">constraints</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">output</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">format</span><span class="o">&gt;</span><span class="n">Modified</span> <span class="n">files</span> <span class="n">with</span> <span class="n">new</span> <span class="n">auth</span> <span class="n">implementation</span><span class="o">&lt;/</span><span class="n">format</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">success_criteria</span><span class="o">&gt;</span><span class="n">All</span> <span class="n">existing</span> <span class="n">tests</span> <span class="k">pass</span><span class="p">,</span> <span class="n">new</span> <span class="n">auth</span> <span class="n">tests</span> <span class="n">added</span><span class="p">,</span> <span class="n">documented</span> <span class="ow">in</span> <span class="n">CHANGELOG</span><span class="o">&lt;/</span><span class="n">success_criteria</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;/</span><span class="n">output</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">task</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="n">Does</span> <span class="n">this</span> <span class="n">capture</span> <span class="n">your</span> <span class="n">intent</span><span class="err">?</span> <span class="n">Ready</span> <span class="n">to</span> <span class="n">proceed</span><span class="err">?</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="8-subagent-monitoring-dashboard">8. Subagent Monitoring Dashboard</h2>
<p>A simple React-based dashboard for monitoring subagent activity.</p>
<h3 id="installation">Installation</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Create the monitoring directory</span>
</span></span><span class="line"><span class="cl">mkdir -p ~/.claude/monitoring
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ~/.claude/monitoring
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1"># Create package.json</span>
</span></span><span class="line"><span class="cl">npm init -y
</span></span><span class="line"><span class="cl">npm install react react-dom next tailwindcss
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="dashboard-code-claudemonitoringpagesindextsx">Dashboard Code (<code>~/.claude/monitoring/pages/index.tsx</code>)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tsx" data-lang="tsx"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">SubagentLog</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">timestamp</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">agentName</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">task</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">model</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">tokensUsed</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">duration</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">status</span><span class="o">:</span> <span class="s1">&#39;running&#39;</span> <span class="o">|</span> <span class="s1">&#39;completed&#39;</span> <span class="o">|</span> <span class="s1">&#39;failed&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">result?</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="kr">interface</span> <span class="nx">SessionStats</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">totalTokens</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">totalDuration</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">agentBreakdown</span>: <span class="kt">Record</span><span class="p">&lt;</span><span class="nt">string</span><span class="p">,</span> <span class="na">number</span><span class="p">&gt;;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">Dashboard() {</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">logs</span><span class="p">,</span> <span class="nx">setLogs</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">SubagentLog</span><span class="err">[]</span><span class="p">&gt;([]);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">stats</span><span class="p">,</span> <span class="nx">setStats</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">&lt;</span><span class="nt">SessionStats</span> <span class="err">|</span> <span class="na">null</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Poll for updates every 2 seconds
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">fetchLogs</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span> <span class="mi">2000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="nx">fetchLogs</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[]);</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">fetchLogs</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/logs&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setLogs</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">logs</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setStats</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">stats</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Failed to fetch logs:&#39;</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">getStatusColor</span> <span class="o">=</span> <span class="p">(</span><span class="nx">status</span>: <span class="kt">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">switch</span> <span class="p">(</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="s1">&#39;running&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="s1">&#39;bg-yellow-500&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="s1">&#39;completed&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="s1">&#39;bg-green-500&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="s1">&#39;failed&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="s1">&#39;bg-red-500&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">default</span><span class="o">:</span> <span class="k">return</span> <span class="s1">&#39;bg-gray-500&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;min-h-screen bg-gray-900 text-white p-8&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-3xl font-bold mb-8&#34;</span><span class="p">&gt;</span><span class="err">ü§ñ</span> <span class="nx">Subagent</span> <span class="nx">Monitor</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="cm">/* Stats Panel */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">stats</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;grid grid-cols-3 gap-4 mb-8&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;bg-gray-800 p-4 rounded-lg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-gray-400 text-sm&#34;</span><span class="p">&gt;</span><span class="nx">Total</span> <span class="nx">Tokens</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-2xl font-bold&#34;</span><span class="p">&gt;{</span><span class="nx">stats</span><span class="p">.</span><span class="nx">totalTokens</span><span class="p">.</span><span class="nx">toLocaleString</span><span class="p">()}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;bg-gray-800 p-4 rounded-lg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-gray-400 text-sm&#34;</span><span class="p">&gt;</span><span class="nx">Total</span> <span class="nx">Duration</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-2xl font-bold&#34;</span><span class="p">&gt;{(</span><span class="nx">stats</span><span class="p">.</span><span class="nx">totalDuration</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)}</span><span class="nx">s</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;bg-gray-800 p-4 rounded-lg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-gray-400 text-sm&#34;</span><span class="p">&gt;</span><span class="nx">Active</span> <span class="nx">Agents</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-2xl font-bold&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">{</span><span class="nx">logs</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">l</span> <span class="o">=&gt;</span> <span class="nx">l</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="s1">&#39;running&#39;</span><span class="p">).</span><span class="nx">length</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">)}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="cm">/* Agent Breakdown */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">stats</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;bg-gray-800 p-4 rounded-lg mb-8&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-lg font-semibold mb-4&#34;</span><span class="p">&gt;</span><span class="nx">Token</span> <span class="nx">Usage</span> <span class="nx">by</span> <span class="nx">Agent</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;space-y-2&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span><span class="nb">Object</span><span class="p">.</span><span class="nx">entries</span><span class="p">(</span><span class="nx">stats</span><span class="p">.</span><span class="nx">agentBreakdown</span><span class="p">).</span><span class="nx">map</span><span class="p">(([</span><span class="nx">agent</span><span class="p">,</span> <span class="nx">tokens</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">agent</span><span class="p">}</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex items-center&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;w-32 text-sm&#34;</span><span class="p">&gt;{</span><span class="nx">agent</span><span class="p">}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex-1 bg-gray-700 rounded h-4&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">div</span> 
</span></span><span class="line"><span class="cl">                    <span class="na">className</span><span class="o">=</span><span class="s">&#34;bg-blue-500 h-4 rounded&#34;</span>
</span></span><span class="line"><span class="cl">                    <span class="na">style</span><span class="o">=</span><span class="p">{{</span> <span class="nx">width</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="p">(</span><span class="nx">tokens</span> <span class="o">/</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">totalTokens</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="si">}</span><span class="sb">%`</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl">                  <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;w-24 text-right text-sm&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">{</span><span class="nx">tokens</span><span class="p">.</span><span class="nx">toLocaleString</span><span class="p">()}</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">))}</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">)}</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="cm">/* Activity Log */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;bg-gray-800 rounded-lg overflow-hidden&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-lg font-semibold p-4 border-b border-gray-700&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nx">Activity</span> <span class="nx">Log</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;divide-y divide-gray-700 max-h-96 overflow-y-auto&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span><span class="nx">logs</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">log</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">i</span><span class="p">}</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;p-4 hover:bg-gray-750&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex items-center justify-between mb-2&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex items-center space-x-3&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="sb">`w-2 h-2 rounded-full </span><span class="si">${</span><span class="nx">getStatusColor</span><span class="p">(</span><span class="nx">log</span><span class="p">.</span><span class="nx">status</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;font-medium&#34;</span><span class="p">&gt;{</span><span class="nx">log</span><span class="p">.</span><span class="nx">agentName</span><span class="p">}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-gray-400 text-sm&#34;</span><span class="p">&gt;({</span><span class="nx">log</span><span class="p">.</span><span class="nx">model</span><span class="p">})&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-gray-400 text-sm&#34;</span><span class="p">&gt;{</span><span class="nx">log</span><span class="p">.</span><span class="nx">timestamp</span><span class="p">}&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">p</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;text-sm text-gray-300 mb-2&#34;</span><span class="p">&gt;{</span><span class="nx">log</span><span class="p">.</span><span class="nx">task</span><span class="p">}&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex space-x-4 text-xs text-gray-500&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="err">‚è±</span> <span class="p">{</span><span class="nx">log</span><span class="p">.</span><span class="nx">duration</span><span class="p">}</span><span class="nx">ms</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="err">üìä</span> <span class="p">{</span><span class="nx">log</span><span class="p">.</span><span class="nx">tokensUsed</span><span class="p">}</span> <span class="nx">tokens</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">{</span><span class="nx">log</span><span class="p">.</span><span class="nx">result</span> <span class="o">&amp;&amp;</span> <span class="nx">log</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="s1">&#39;completed&#39;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;mt-2 p-2 bg-gray-900 rounded text-sm&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">{</span><span class="nx">log</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">)}...</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">)}</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">))}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="log-collection-hook">Log Collection Hook</h3>
<p>Add to your hooks configuration to feed the dashboard:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;hooks&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;PreToolUse&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;matcher&#34;</span><span class="p">:</span> <span class="s2">&#34;Task&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;hooks&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;command&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;command&#34;</span><span class="p">:</span> <span class="s2">&#34;~/.claude/monitoring/log-subagent.sh start&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;PostToolUse&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;matcher&#34;</span><span class="p">:</span> <span class="s2">&#34;Task&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;hooks&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;command&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;command&#34;</span><span class="p">:</span> <span class="s2">&#34;~/.claude/monitoring/log-subagent.sh complete&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="log-script-claudemonitoringlog-subagentsh">Log Script (<code>~/.claude/monitoring/log-subagent.sh</code>)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span> 
</span></span><span class="line"><span class="cl"><span class="nv">ACTION</span><span class="o">=</span><span class="nv">$1</span>
</span></span><span class="line"><span class="cl"><span class="nv">INPUT</span><span class="o">=</span><span class="k">$(</span>cat<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">TIMESTAMP</span><span class="o">=</span><span class="k">$(</span>date -Iseconds<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">LOG_FILE</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$HOME</span><span class="s2">/.claude/monitoring/logs/</span><span class="k">$(</span>date +%Y-%m-%d<span class="k">)</span><span class="s2">.json&#34;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">mkdir -p <span class="s2">&#34;</span><span class="nv">$HOME</span><span class="s2">/.claude/monitoring/logs&#34;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="nv">AGENT_NAME</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$INPUT</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.tool_input.description // &#34;unknown&#34;&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">MODEL</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$INPUT</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.model // &#34;unknown&#34;&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">TASK</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$INPUT</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.tool_input.prompt // &#34;&#34;&#39;</span> <span class="p">|</span> head -c 200<span class="k">)</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$ACTION</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;start&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;{\&#34;timestamp\&#34;: \&#34;</span><span class="nv">$TIMESTAMP</span><span class="s2">\&#34;, \&#34;agentName\&#34;: \&#34;</span><span class="nv">$AGENT_NAME</span><span class="s2">\&#34;, \&#34;model\&#34;: \&#34;</span><span class="nv">$MODEL</span><span class="s2">\&#34;, \&#34;task\&#34;: \&#34;</span><span class="nv">$TASK</span><span class="s2">\&#34;, \&#34;status\&#34;: \&#34;running\&#34;}&#34;</span> &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">elif</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$ACTION</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;complete&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nv">RESULT</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$INPUT</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.result // &#34;&#34;&#39;</span> <span class="p">|</span> head -c 500<span class="k">)</span>
</span></span><span class="line"><span class="cl">    <span class="nv">TOKENS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$INPUT</span><span class="s2">&#34;</span> <span class="p">|</span> jq -r <span class="s1">&#39;.tokens_used // 0&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;{\&#34;timestamp\&#34;: \&#34;</span><span class="nv">$TIMESTAMP</span><span class="s2">\&#34;, \&#34;agentName\&#34;: \&#34;</span><span class="nv">$AGENT_NAME</span><span class="s2">\&#34;, \&#34;model\&#34;: \&#34;</span><span class="nv">$MODEL</span><span class="s2">\&#34;, \&#34;status\&#34;: \&#34;completed\&#34;, \&#34;result\&#34;: \&#34;</span><span class="nv">$RESULT</span><span class="s2">\&#34;, \&#34;tokensUsed\&#34;: </span><span class="nv">$TOKENS</span><span class="s2">}&#34;</span> &gt;&gt; <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="nb">exit</span> <span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="9-quick-reference-table">9. Quick Reference Table</h2>
<h3 id="keyboard-shortcuts">Keyboard Shortcuts</h3>
<table>
  <thead>
      <tr>
          <th>Shortcut</th>
          <th>Action</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>Escape</code></td>
          <td>Interrupt current operation</td>
      </tr>
      <tr>
          <td><code>Escape Escape</code></td>
          <td>Open Rewind (time travel)</td>
      </tr>
      <tr>
          <td><code>Shift + Tab</code></td>
          <td>Toggle Plan Mode / Auto-accept</td>
      </tr>
      <tr>
          <td><code>Ctrl + C</code></td>
          <td>Exit Claude Code</td>
      </tr>
      <tr>
          <td><code>‚Üë</code> / <code>‚Üì</code></td>
          <td>Navigate prompt history</td>
      </tr>
  </tbody>
</table>
<h3 id="essential-commands">Essential Commands</h3>
<table>
  <thead>
      <tr>
          <th>Command</th>
          <th>Purpose</th>
          <th>When to Use</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>/clear</code></td>
          <td>Clear conversation</td>
          <td>Starting new task, context bloat</td>
      </tr>
      <tr>
          <td><code>/compact</code></td>
          <td>Summarize context</td>
          <td>Approaching 70% usage</td>
      </tr>
      <tr>
          <td><code>/context</code></td>
          <td>Show context usage</td>
          <td>Regular monitoring</td>
      </tr>
      <tr>
          <td><code>/rewind</code></td>
          <td>Time travel UI</td>
          <td>Made a mistake, want to undo</td>
      </tr>
      <tr>
          <td><code>/help</code></td>
          <td>List all commands</td>
          <td>Forgot command names</td>
      </tr>
      <tr>
          <td><code>/model</code></td>
          <td>Switch model</td>
          <td>Cost optimization, capability needs</td>
      </tr>
      <tr>
          <td><code>/agents</code></td>
          <td>Manage subagents</td>
          <td>Configure custom agents</td>
      </tr>
      <tr>
          <td><code>/permissions</code></td>
          <td>View/edit permissions</td>
          <td>Troubleshooting tool access</td>
      </tr>
      <tr>
          <td><code>/hooks</code></td>
          <td>Manage hooks</td>
          <td>Review/update safety rules</td>
      </tr>
  </tbody>
</table>
<h3 id="context-management-thresholds">Context Management Thresholds</h3>
<table>
  <thead>
      <tr>
          <th>Context %</th>
          <th>Status</th>
          <th>Action</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>0-40%</td>
          <td>üü¢ Healthy</td>
          <td>Work freely</td>
      </tr>
      <tr>
          <td>40-60%</td>
          <td>üü° Watch</td>
          <td>Be selective about new files</td>
      </tr>
      <tr>
          <td>60-80%</td>
          <td>üü† Caution</td>
          <td>Consider compacting</td>
      </tr>
      <tr>
          <td>80-95%</td>
          <td>üî¥ Critical</td>
          <td>/clear or targeted /compact</td>
      </tr>
      <tr>
          <td>95-100%</td>
          <td>‚õî Danger</td>
          <td>Auto-compact triggers (uncontrolled)</td>
      </tr>
  </tbody>
</table>
<h3 id="model-selection-guide">Model Selection Guide</h3>
<table>
  <thead>
      <tr>
          <th>Model</th>
          <th>Best For</th>
          <th>Cost</th>
          <th>Speed</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Opus 4.5</td>
          <td>Architecture, complex reasoning, critical code</td>
          <td>$$$</td>
          <td>Slow</td>
      </tr>
      <tr>
          <td>Sonnet 4.5</td>
          <td>Most coding tasks, balanced</td>
          <td>$$</td>
          <td>Medium</td>
      </tr>
      <tr>
          <td>Haiku 4.5</td>
          <td>Quick queries, simple tasks, exploration</td>
          <td>$</td>
          <td>Fast</td>
      </tr>
  </tbody>
</table>
<h3 id="file-locations">File Locations</h3>
<table>
  <thead>
      <tr>
          <th>Path</th>
          <th>Purpose</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>~/.claude/CLAUDE.md</code></td>
          <td>Global instructions</td>
      </tr>
      <tr>
          <td><code>~/.claude/settings.json</code></td>
          <td>Global settings, hooks</td>
      </tr>
      <tr>
          <td><code>~/.claude/commands/</code></td>
          <td>Personal slash commands</td>
      </tr>
      <tr>
          <td><code>~/.claude/agents/</code></td>
          <td>Custom subagents</td>
      </tr>
      <tr>
          <td><code>.claude/CLAUDE.md</code></td>
          <td>Project instructions (team)</td>
      </tr>
      <tr>
          <td><code>.claude/settings.json</code></td>
          <td>Project settings (team)</td>
      </tr>
      <tr>
          <td><code>.claude/settings.local.json</code></td>
          <td>Local project settings (gitignored)</td>
      </tr>
      <tr>
          <td><code>.claude/commands/</code></td>
          <td>Project slash commands</td>
      </tr>
      <tr>
          <td><code>.claude/agents/</code></td>
          <td>Project subagents</td>
      </tr>
  </tbody>
</table>
<h3 id="safety-hook-checklist">Safety Hook Checklist</h3>
<table>
  <thead>
      <tr>
          <th>Hook Type</th>
          <th>Recommended Use</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>PreToolUse:Bash</code></td>
          <td>Block dangerous commands</td>
      </tr>
      <tr>
          <td><code>PreToolUse:Write</code></td>
          <td>Protect sensitive files</td>
      </tr>
      <tr>
          <td><code>PostToolUse:Write(*.py)</code></td>
          <td>Auto-format Python</td>
      </tr>
      <tr>
          <td><code>PostToolUse:Write(*.ts)</code></td>
          <td>Auto-format + typecheck</td>
      </tr>
      <tr>
          <td><code>PostToolUse:Edit</code></td>
          <td>Run linters</td>
      </tr>
      <tr>
          <td><code>Stop</code></td>
          <td>Session summary logging</td>
      </tr>
  </tbody>
</table>
<h3 id="prompt-quality-checklist">Prompt Quality Checklist</h3>
<p>Before sending a prompt, verify:</p>
<ul>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> <strong>Goal is specific</strong>: What exactly should happen?</li>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> <strong>Context is provided</strong>: What files/info does Claude need?</li>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> <strong>Constraints are explicit</strong>: What must/must not happen?</li>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> <strong>Success criteria defined</strong>: How do I know it‚Äôs done?</li>
<li><i class="far fa-square fa-fw" aria-hidden="true"></i> <strong>Examples given</strong>: For complex patterns, show don‚Äôt tell</li>
</ul>
<h3 id="error-recovery-flowchart">Error Recovery Flowchart</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Issue Detected
</span></span><span class="line"><span class="cl">      ‚îÇ
</span></span><span class="line"><span class="cl">      ‚ñº
</span></span><span class="line"><span class="cl">  Small/Local? ‚îÄ‚îÄ‚îÄ‚îÄYes‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ Escape Escape (Rewind)
</span></span><span class="line"><span class="cl">      ‚îÇ                           ‚îÇ
</span></span><span class="line"><span class="cl">      No                    Pick restore point
</span></span><span class="line"><span class="cl">      ‚îÇ                           ‚îÇ
</span></span><span class="line"><span class="cl">      ‚ñº                           ‚ñº
</span></span><span class="line"><span class="cl">  Code broken? ‚îÄ‚îÄ‚îÄ‚îÄYes‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ git checkout / git stash
</span></span><span class="line"><span class="cl">      ‚îÇ
</span></span><span class="line"><span class="cl">      No
</span></span><span class="line"><span class="cl">      ‚îÇ
</span></span><span class="line"><span class="cl">      ‚ñº
</span></span><span class="line"><span class="cl">  Context rot? ‚îÄ‚îÄ‚îÄ‚îÄYes‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ /clear + restart with notes
</span></span><span class="line"><span class="cl">      ‚îÇ
</span></span><span class="line"><span class="cl">      No
</span></span><span class="line"><span class="cl">      ‚îÇ
</span></span><span class="line"><span class="cl">      ‚ñº
</span></span><span class="line"><span class="cl">  Log to error journal for pattern analysis
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="appendix-claudemd-template">Appendix: CLAUDE.md Template</h2>
<p>Copy this to your project root and customize:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl"><span class="gh"># Project: [NAME]
</span></span></span><span class="line"><span class="cl"><span class="gh"></span> 
</span></span><span class="line"><span class="cl"><span class="gu">## Overview
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>[2-3 sentences describing the project]
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Tech Stack
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> Language: [e.g., TypeScript 5.3]
</span></span><span class="line"><span class="cl"><span class="k">-</span> Framework: [e.g., Next.js 14]
</span></span><span class="line"><span class="cl"><span class="k">-</span> Database: [e.g., PostgreSQL + Prisma]
</span></span><span class="line"><span class="cl"><span class="k">-</span> Testing: [e.g., Jest + React Testing Library]
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Key Commands
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">-</span> <span class="sb">`npm run dev`</span> - Start development server
</span></span><span class="line"><span class="cl"><span class="k">-</span> <span class="sb">`npm run build`</span> - Production build
</span></span><span class="line"><span class="cl"><span class="k">-</span> <span class="sb">`npm run test`</span> - Run tests
</span></span><span class="line"><span class="cl"><span class="k">-</span> <span class="sb">`npm run lint`</span> - Run linter
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="gu">## Project Structure
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>src/
‚îú‚îÄ‚îÄ app/          # Next.js app router
‚îú‚îÄ‚îÄ components/   # React components
‚îú‚îÄ‚îÄ lib/          # Utilities and helpers
‚îú‚îÄ‚îÄ hooks/        # Custom React hooks
‚îî‚îÄ‚îÄ types/        # TypeScript types</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1">## Coding Standards</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Use</span> <span class="n">functional</span> <span class="n">components</span> <span class="n">with</span> <span class="n">hooks</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Prefer</span> <span class="n">named</span> <span class="n">exports</span> <span class="n">over</span> <span class="n">default</span> <span class="n">exports</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">One</span> <span class="n">component</span> <span class="n">per</span> <span class="n">file</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Tests</span> <span class="n">go</span> <span class="ow">in</span> <span class="err">`</span><span class="n">__tests__</span><span class="o">/</span><span class="err">`</span> <span class="n">directories</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">## Important Patterns</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">State</span> <span class="n">management</span><span class="p">:</span> <span class="p">[</span><span class="n">describe</span> <span class="n">pattern</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">API</span> <span class="n">calls</span><span class="p">:</span> <span class="p">[</span><span class="n">describe</span> <span class="n">pattern</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Error</span> <span class="n">handling</span><span class="p">:</span> <span class="p">[</span><span class="n">describe</span> <span class="n">pattern</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">## DO NOT</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Modify</span> <span class="n">files</span> <span class="ow">in</span> <span class="err">`</span><span class="n">node_modules</span><span class="o">/</span><span class="err">`</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Commit</span> <span class="n">to</span> <span class="n">main</span> <span class="n">directly</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Skip</span> <span class="n">tests</span> <span class="k">for</span> <span class="n">new</span> <span class="n">features</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">## Subagent Rules</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Always</span> <span class="n">use</span> <span class="n">Opus</span> <span class="k">for</span> <span class="n">subagents</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Announce</span> <span class="n">before</span> <span class="n">spawning</span> <span class="n">subagents</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Summarize</span> <span class="n">subagent</span> <span class="n">results</span> <span class="n">concisely</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"><span class="c1">## Context Management</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Warn</span> <span class="n">when</span> <span class="n">context</span> <span class="n">exceeds</span> <span class="mi">60</span><span class="o">%</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Include</span> <span class="s2">&#34;Context: X%&#34;</span> <span class="ow">in</span> <span class="n">responses</span> <span class="n">when</span> <span class="o">&gt;</span><span class="mi">50</span><span class="o">%</span>
</span></span><span class="line"><span class="cl"><span class="o">-</span> <span class="n">Never</span> <span class="n">auto</span><span class="o">-</span><span class="n">compact</span> <span class="n">without</span> <span class="n">asking</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2025-01-22</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/en/claude-code-en/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="http://localhost:1313/en/claude-code-en/" data-title="Claude Code Mastery: Advanced Patterns for 10x Productivity" data-via="https://x.com/cgw1017" data-hashtags="Claude Code,LLM,Productivity,Programming"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="http://localhost:1313/en/claude-code-en/" data-title="Claude Code Mastery: Advanced Patterns for 10x Productivity"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="http://localhost:1313/en/claude-code-en/" data-title="Claude Code Mastery: Advanced Patterns for 10x Productivity"><i data-svg-src="/lib/simple-icons/icons/line.min.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on ÂæÆÂçö" data-sharer="weibo" data-url="http://localhost:1313/en/claude-code-en/" data-title="Claude Code Mastery: Advanced Patterns for 10x Productivity"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/en/tags/claude-code/">Claude Code</a>,&nbsp;<a href="/en/tags/llm/">LLM</a>,&nbsp;<a href="/en/tags/productivity/">Productivity</a>,&nbsp;<a href="/en/tags/programming/">Programming</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/en/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/en/emoji-support/" class="prev" rel="prev" title="Emoji Support"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Emoji Support</a>
            <a href="/en/claude-code/" class="next" rel="next" title="Claude Code Mastery: Advanced Patterns for 10x Productivity">Claude Code Mastery: Advanced Patterns for 10x Productivity<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line"><p>‰∏Ä‰∏™Á®ãÂ∫èÂëòÔºå‰∏ªËØ≠Ë®Ä JavaÔºåÂÖ∂‰ªñËØ≠Ë®Ä‰πüÈÉΩ‰∫ÜËß£‰∏Ä‰∫õÔºåÁé∞Âú®Â∏åÊúõ AI Áõ∏ÂÖ≥ÊäÄÊúØÈ¢ÜÂüüÂèäÊñπÊ°à„ÄÇ</p><p>ÂÜôÂçöÂÆ¢ÁöÑËøáÁ®ãËÉΩÂä†Ê∑±Ëá™Â∑±ÂØπ‰∏Ä‰∏™Áü•ËØÜÁÇπÁöÑÁêÜËß£ÔºåÂêåÊó∂ËøòÂèØ‰ª•ÂàÜ‰∫´Áªô‰ªñ‰∫∫„ÄÇ</p><p>ÂñúÊ¨¢ÂâçÊ≤øÁßëÊäÄÔºåËá™Â∑±‰πüÂú®‰∏ÄÂÆ∂‰∫∫Â∑•Êô∫ËÉΩÂÖ¨Âè∏Â∑•‰ΩúÔºåÂ∏åÊúõÂíåÂ§ßÂÆ∂‰∏ÄË∑ØÂêåË°åÂ≠¶‰π† AIÔºåÂÅö‰∏Ä‰∏™‰∏çËêΩÂêéÊó∂‰ª£ÁöÑ‰∫∫ÔºåÂêåÊó∂‰πü‰ºöÂàÜ‰∫´‰∏Ä‰∫õËá™Â∑±Áã¨Á´ãÂºÄÂèëÁöÑÁªèÈ™åÂíåÂøÉÂæó„ÄÇ</p></div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2025 - 2026</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/en/" target="_blank">‰∏ÄË∑ØÂêåË°å</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/algoliasearch/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.en","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
